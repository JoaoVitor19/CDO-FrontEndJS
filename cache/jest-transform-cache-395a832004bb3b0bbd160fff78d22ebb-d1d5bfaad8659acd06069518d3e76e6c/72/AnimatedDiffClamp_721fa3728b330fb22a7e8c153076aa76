0c582457260d56862e1502cc72c519bd
'use strict';

exports.__esModule = true;
exports.default = void 0;

var _AnimatedInterpolation = _interopRequireDefault(require("./AnimatedInterpolation"));

var _AnimatedNode = _interopRequireDefault(require("./AnimatedNode"));

var _AnimatedWithChildren2 = _interopRequireDefault(require("./AnimatedWithChildren"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;

  _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var AnimatedDiffClamp = function (_AnimatedWithChildren) {
  _inheritsLoose(AnimatedDiffClamp, _AnimatedWithChildren);

  function AnimatedDiffClamp(a, min, max) {
    var _this;

    _this = _AnimatedWithChildren.call(this) || this;
    _this._a = a;
    _this._min = min;
    _this._max = max;
    _this._value = _this._lastValue = _this._a.__getValue();
    return _this;
  }

  var _proto = AnimatedDiffClamp.prototype;

  _proto.__makeNative = function __makeNative() {
    this._a.__makeNative();

    _AnimatedWithChildren.prototype.__makeNative.call(this);
  };

  _proto.interpolate = function interpolate(config) {
    return new _AnimatedInterpolation.default(this, config);
  };

  _proto.__getValue = function __getValue() {
    var value = this._a.__getValue();

    var diff = value - this._lastValue;
    this._lastValue = value;
    this._value = Math.min(Math.max(this._value + diff, this._min), this._max);
    return this._value;
  };

  _proto.__attach = function __attach() {
    this._a.__addChild(this);
  };

  _proto.__detach = function __detach() {
    this._a.__removeChild(this);

    _AnimatedWithChildren.prototype.__detach.call(this);
  };

  _proto.__getNativeConfig = function __getNativeConfig() {
    return {
      type: 'diffclamp',
      input: this._a.__getNativeTag(),
      min: this._min,
      max: this._max
    };
  };

  return AnimatedDiffClamp;
}(_AnimatedWithChildren2.default);

var _default = AnimatedDiffClamp;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuaW1hdGVkRGlmZkNsYW1wLmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9BbmltYXRlZEludGVycG9sYXRpb24iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9BbmltYXRlZE5vZGUiLCJfQW5pbWF0ZWRXaXRoQ2hpbGRyZW4yIiwib2JqIiwiX2luaGVyaXRzTG9vc2UiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIl9zZXRQcm90b3R5cGVPZiIsIm8iLCJwIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBbmltYXRlZERpZmZDbGFtcCIsIl9BbmltYXRlZFdpdGhDaGlsZHJlbiIsImEiLCJtaW4iLCJtYXgiLCJfdGhpcyIsImNhbGwiLCJfYSIsIl9taW4iLCJfbWF4IiwiX3ZhbHVlIiwiX2xhc3RWYWx1ZSIsIl9fZ2V0VmFsdWUiLCJfcHJvdG8iLCJfX21ha2VOYXRpdmUiLCJpbnRlcnBvbGF0ZSIsImNvbmZpZyIsInZhbHVlIiwiZGlmZiIsIk1hdGgiLCJfX2F0dGFjaCIsIl9fYWRkQ2hpbGQiLCJfX2RldGFjaCIsIl9fcmVtb3ZlQ2hpbGQiLCJfX2dldE5hdGl2ZUNvbmZpZyIsInR5cGUiLCJpbnB1dCIsIl9fZ2V0TmF0aXZlVGFnIiwiX2RlZmF1bHQiLCJtb2R1bGUiXSwibWFwcGluZ3MiOiJBQVNBOztBQUVBQSxPQUFPLENBQUNDLFVBQVIsR0FBcUIsSUFBckI7QUFDQUQsT0FBTyxDQUFDRSxPQUFSLEdBQWtCLEtBQUssQ0FBdkI7O0FBRUEsSUFBSUMsc0JBQXNCLEdBQUdDLHNCQUFzQixDQUFDQyxPQUFPLDJCQUFSLENBQW5EOztBQUVBLElBQUlDLGFBQWEsR0FBR0Ysc0JBQXNCLENBQUNDLE9BQU8sa0JBQVIsQ0FBMUM7O0FBRUEsSUFBSUUsc0JBQXNCLEdBQUdILHNCQUFzQixDQUFDQyxPQUFP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QVNBRyxFQUFBQSxNQUFNLENBQUNPLFFBQVAsR0FBa0IsU0FBU0EsUUFBVCxHQUFvQjtBQUNwQyxTQUFLYixFQUFMLENBQVFjLFVBQVIsQ0FBbUIsSUFBbkI7QUFDRCxHQUZEOztBQUlBUixFQUFBQSxNQUFNLENBQUNTLFFBQVAsR0FBa0IsU0FBU0EsUUFBVCxHQUFvQjtBQUNwQyxTQUFLZixFQUFMLENBQVFnQixhQUFSLENBQXNCLElBQXRCOztBQUVBdEIsSUFBQUEscUJBQXFCLENBQUNWLFNBQXRCLENBQWdDK0IsUUFBaEMsQ0FBeUNoQixJQUF6QyxDQUE4QyxJQUE5QztBQUNELEdBSkQ7O0FBTUFPLEVBQUFBLE1BQU0sQ0FBQ1csaUJBQVAsR0FBMkIsU0FBU0EsaUJBQVQsR0FBNkI7QUFDdEQsV0FBTztBQUNMQyxNQUFBQSxJQUFJLEVBQUUsV0FERDtBQUVMQyxNQUFBQSxLQUFLLEVBQUUsS0FBS25CLEVBQUwsQ0FBUW9CLGNBQVIsRUFGRjtBQUdMeEIsTUFBQUEsR0FBRyxFQUFFLEtBQUtLLElBSEw7QUFJTEosTUFBQUEsR0FBRyxFQUFFLEtBQUtLO0FBSkwsS0FBUDtBQU1ELEdBUEQ7O0FBU0EsU0FBT1QsaUJBQVA7QUFDRCxDQXZEb0MsQ0F1RG5DZCxzQkFBc0IsQ0FBQ0wsT0F2RFksQ0FBckM7O0FBeURBLElBQUkrQyxRQUFRLEdBQUc1QixpQkFBZjtBQUNBckIsT0FBTyxDQUFDRSxPQUFSLEdBQWtCK0MsUUFBbEI7QUFDQUMsTUFBTSxDQUFDbEQsT0FBUCxHQUFpQkEsT0FBTyxDQUFDRSxPQUF6QiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogXG4gKiBAZm9ybWF0XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9BbmltYXRlZEludGVycG9sYXRpb24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0FuaW1hdGVkSW50ZXJwb2xhdGlvblwiKSk7XG5cbnZhciBfQW5pbWF0ZWROb2RlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9BbmltYXRlZE5vZGVcIikpO1xuXG52YXIgX0FuaW1hdGVkV2l0aENoaWxkcmVuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQW5pbWF0ZWRXaXRoQ2hpbGRyZW5cIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxudmFyIEFuaW1hdGVkRGlmZkNsYW1wID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQW5pbWF0ZWRXaXRoQ2hpbGRyZW4pIHtcbiAgX2luaGVyaXRzTG9vc2UoQW5pbWF0ZWREaWZmQ2xhbXAsIF9BbmltYXRlZFdpdGhDaGlsZHJlbik7XG5cbiAgZnVuY3Rpb24gQW5pbWF0ZWREaWZmQ2xhbXAoYSwgbWluLCBtYXgpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9BbmltYXRlZFdpdGhDaGlsZHJlbi5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgX3RoaXMuX2EgPSBhO1xuICAgIF90aGlzLl9taW4gPSBtaW47XG4gICAgX3RoaXMuX21heCA9IG1heDtcbiAgICBfdGhpcy5fdmFsdWUgPSBfdGhpcy5fbGFzdFZhbHVlID0gX3RoaXMuX2EuX19nZXRWYWx1ZSgpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBBbmltYXRlZERpZmZDbGFtcC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLl9fbWFrZU5hdGl2ZSA9IGZ1bmN0aW9uIF9fbWFrZU5hdGl2ZSgpIHtcbiAgICB0aGlzLl9hLl9fbWFrZU5hdGl2ZSgpO1xuXG4gICAgX0FuaW1hdGVkV2l0aENoaWxkcmVuLnByb3RvdHlwZS5fX21ha2VOYXRpdmUuY2FsbCh0aGlzKTtcbiAgfTtcblxuICBfcHJvdG8uaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiBpbnRlcnBvbGF0ZShjb25maWcpIHtcbiAgICByZXR1cm4gbmV3IF9BbmltYXRlZEludGVycG9sYXRpb24uZGVmYXVsdCh0aGlzLCBjb25maWcpO1xuICB9O1xuXG4gIF9wcm90by5fX2dldFZhbHVlID0gZnVuY3Rpb24gX19nZXRWYWx1ZSgpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLl9hLl9fZ2V0VmFsdWUoKTtcblxuICAgIHZhciBkaWZmID0gdmFsdWUgLSB0aGlzLl9sYXN0VmFsdWU7XG4gICAgdGhpcy5fbGFzdFZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5fdmFsdWUgPSBNYXRoLm1pbihNYXRoLm1heCh0aGlzLl92YWx1ZSArIGRpZmYsIHRoaXMuX21pbiksIHRoaXMuX21heCk7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9O1xuXG4gIF9wcm90by5fX2F0dGFjaCA9IGZ1bmN0aW9uIF9fYXR0YWNoKCkge1xuICAgIHRoaXMuX2EuX19hZGRDaGlsZCh0aGlzKTtcbiAgfTtcblxuICBfcHJvdG8uX19kZXRhY2ggPSBmdW5jdGlvbiBfX2RldGFjaCgpIHtcbiAgICB0aGlzLl9hLl9fcmVtb3ZlQ2hpbGQodGhpcyk7XG5cbiAgICBfQW5pbWF0ZWRXaXRoQ2hpbGRyZW4ucHJvdG90eXBlLl9fZGV0YWNoLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgX3Byb3RvLl9fZ2V0TmF0aXZlQ29uZmlnID0gZnVuY3Rpb24gX19nZXROYXRpdmVDb25maWcoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdkaWZmY2xhbXAnLFxuICAgICAgaW5wdXQ6IHRoaXMuX2EuX19nZXROYXRpdmVUYWcoKSxcbiAgICAgIG1pbjogdGhpcy5fbWluLFxuICAgICAgbWF4OiB0aGlzLl9tYXhcbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBBbmltYXRlZERpZmZDbGFtcDtcbn0oX0FuaW1hdGVkV2l0aENoaWxkcmVuMi5kZWZhdWx0KTtcblxudmFyIF9kZWZhdWx0ID0gQW5pbWF0ZWREaWZmQ2xhbXA7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdfQ==