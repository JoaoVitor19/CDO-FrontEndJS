cf3298fa6ced4f931a9b7f1458bee945
"use strict";

exports.__esModule = true;
exports.default = void 0;

var _ExecutionEnvironment = require("fbjs/lib/ExecutionEnvironment");

var _arrayFindIndex = _interopRequireDefault(require("array-find-index"));

var _invariant = _interopRequireDefault(require("fbjs/lib/invariant"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var isPrefixed = _ExecutionEnvironment.canUseDOM && !document.hasOwnProperty('hidden') && document.hasOwnProperty('webkitHidden');
var EVENT_TYPES = ['change', 'memoryWarning'];
var VISIBILITY_CHANGE_EVENT = isPrefixed ? 'webkitvisibilitychange' : 'visibilitychange';
var VISIBILITY_STATE_PROPERTY = isPrefixed ? 'webkitVisibilityState' : 'visibilityState';
var AppStates = {
  BACKGROUND: 'background',
  ACTIVE: 'active'
};
var listeners = [];

var AppState = function () {
  function AppState() {}

  AppState.addEventListener = function addEventListener(type, handler) {
    if (AppState.isAvailable) {
      (0, _invariant.default)(EVENT_TYPES.indexOf(type) !== -1, 'Trying to subscribe to unknown event: "%s"', type);

      if (type === 'change') {
        var callback = function callback() {
          return handler(AppState.currentState);
        };

        listeners.push([handler, callback]);
        document.addEventListener(VISIBILITY_CHANGE_EVENT, callback, false);
      }
    }
  };

  AppState.removeEventListener = function removeEventListener(type, handler) {
    if (AppState.isAvailable) {
      (0, _invariant.default)(EVENT_TYPES.indexOf(type) !== -1, 'Trying to remove listener for unknown event: "%s"', type);

      if (type === 'change') {
        var listenerIndex = (0, _arrayFindIndex.default)(listeners, function (pair) {
          return pair[0] === handler;
        });
        (0, _invariant.default)(listenerIndex !== -1, 'Trying to remove AppState listener for unregistered handler');
        var callback = listeners[listenerIndex][1];
        document.removeEventListener(VISIBILITY_CHANGE_EVENT, callback, false);
        listeners.splice(listenerIndex, 1);
      }
    }
  };

  _createClass(AppState, null, [{
    key: "currentState",
    get: function get() {
      if (!AppState.isAvailable) {
        return AppStates.ACTIVE;
      }

      switch (document[VISIBILITY_STATE_PROPERTY]) {
        case 'hidden':
        case 'prerender':
        case 'unloaded':
          return AppStates.BACKGROUND;

        default:
          return AppStates.ACTIVE;
      }
    }
  }]);

  return AppState;
}();

exports.default = AppState;
AppState.isAvailable = _ExecutionEnvironment.canUseDOM && document[VISIBILITY_STATE_PROPERTY];
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9FeGVjdXRpb25FbnZpcm9ubWVudCIsInJlcXVpcmUiLCJfYXJyYXlGaW5kSW5kZXgiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2ludmFyaWFudCIsIm9iaiIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwiX2NyZWF0ZUNsYXNzIiwiQ29uc3RydWN0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJpc1ByZWZpeGVkIiwiY2FuVXNlRE9NIiwiZG9jdW1lbnQiLCJoYXNPd25Qcm9wZXJ0eSIsIkVWRU5UX1RZUEVTIiwiVklTSUJJTElUWV9DSEFOR0VfRVZFTlQiLCJWSVNJQklMSVRZX1NUQVRFX1BST1BFUlRZIiwiQXBwU3RhdGVzIiwiQkFDS0dST1VORCIsIkFDVElWRSIsImxpc3RlbmVycyIsIkFwcFN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInR5cGUiLCJoYW5kbGVyIiwiaXNBdmFpbGFibGUiLCJpbmRleE9mIiwiY2FsbGJhY2siLCJjdXJyZW50U3RhdGUiLCJwdXNoIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImxpc3RlbmVySW5kZXgiLCJwYWlyIiwic3BsaWNlIiwiZ2V0IiwibW9kdWxlIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsT0FBTyxDQUFDQyxVQUFSLEdBQXFCLElBQXJCO0FBQ0FELE9BQU8sQ0FBQ0UsT0FBUixHQUFrQixLQUFLLENBQXZCOztBQUVBLElBQUlDLHFCQUFxQixHQUFHQyxPQUFPLENBQUMsK0JBQUQsQ0FBbkM7O0FBRUEsSUFBSUMsZUFBZSxHQUFHQyxzQkFBc0IsQ0FBQ0YsT0FBTyxDQUFD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QjtBQUNEOztBQUVELGNBQVFQLFFBQVEsQ0FBQ0kseUJBQUQsQ0FBaEI7QUFDRSxhQUFLLFFBQUw7QUFDQSxhQUFLLFdBQUw7QUFDQSxhQUFLLFVBQUw7QUFDRSxpQkFBT0MsU0FBUyxDQUFDQyxVQUFqQjs7QUFFRjtBQUNFLGlCQUFPRCxTQUFTLENBQUNFLE1BQWpCO0FBUEo7QUFTRDtBQWhCMkIsR0FBRCxDQUFqQixDQUFaOztBQW1CQSxTQUFPRSxRQUFQO0FBQ0QsQ0F0RDJCLEVBQTVCOztBQXdEQXJDLE9BQU8sQ0FBQ0UsT0FBUixHQUFrQm1DLFFBQWxCO0FBQ0FBLFFBQVEsQ0FBQ0ksV0FBVCxHQUF1QnRDLHFCQUFxQixDQUFDd0IsU0FBdEIsSUFBbUNDLFFBQVEsQ0FBQ0kseUJBQUQsQ0FBbEU7QUFDQW1CLE1BQU0sQ0FBQ25ELE9BQVAsR0FBaUJBLE9BQU8sQ0FBQ0UsT0FBekIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9FeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoXCJmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudFwiKTtcblxudmFyIF9hcnJheUZpbmRJbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImFycmF5LWZpbmQtaW5kZXhcIikpO1xuXG52YXIgX2ludmFyaWFudCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImZianMvbGliL2ludmFyaWFudFwiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuLy8gQW5kcm9pZCA0LjQgYnJvd3NlclxudmFyIGlzUHJlZml4ZWQgPSBfRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICFkb2N1bWVudC5oYXNPd25Qcm9wZXJ0eSgnaGlkZGVuJykgJiYgZG9jdW1lbnQuaGFzT3duUHJvcGVydHkoJ3dlYmtpdEhpZGRlbicpO1xudmFyIEVWRU5UX1RZUEVTID0gWydjaGFuZ2UnLCAnbWVtb3J5V2FybmluZyddO1xudmFyIFZJU0lCSUxJVFlfQ0hBTkdFX0VWRU5UID0gaXNQcmVmaXhlZCA/ICd3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlJyA6ICd2aXNpYmlsaXR5Y2hhbmdlJztcbnZhciBWSVNJQklMSVRZX1NUQVRFX1BST1BFUlRZID0gaXNQcmVmaXhlZCA/ICd3ZWJraXRWaXNpYmlsaXR5U3RhdGUnIDogJ3Zpc2liaWxpdHlTdGF0ZSc7XG52YXIgQXBwU3RhdGVzID0ge1xuICBCQUNLR1JPVU5EOiAnYmFja2dyb3VuZCcsXG4gIEFDVElWRTogJ2FjdGl2ZSdcbn07XG52YXIgbGlzdGVuZXJzID0gW107XG5cbnZhciBBcHBTdGF0ZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEFwcFN0YXRlKCkge31cblxuICBBcHBTdGF0ZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKSB7XG4gICAgaWYgKEFwcFN0YXRlLmlzQXZhaWxhYmxlKSB7XG4gICAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShFVkVOVF9UWVBFUy5pbmRleE9mKHR5cGUpICE9PSAtMSwgJ1RyeWluZyB0byBzdWJzY3JpYmUgdG8gdW5rbm93biBldmVudDogXCIlc1wiJywgdHlwZSk7XG5cbiAgICAgIGlmICh0eXBlID09PSAnY2hhbmdlJykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgICByZXR1cm4gaGFuZGxlcihBcHBTdGF0ZS5jdXJyZW50U3RhdGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGxpc3RlbmVycy5wdXNoKFtoYW5kbGVyLCBjYWxsYmFja10pO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFZJU0lCSUxJVFlfQ0hBTkdFX0VWRU5ULCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBBcHBTdGF0ZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKSB7XG4gICAgaWYgKEFwcFN0YXRlLmlzQXZhaWxhYmxlKSB7XG4gICAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShFVkVOVF9UWVBFUy5pbmRleE9mKHR5cGUpICE9PSAtMSwgJ1RyeWluZyB0byByZW1vdmUgbGlzdGVuZXIgZm9yIHVua25vd24gZXZlbnQ6IFwiJXNcIicsIHR5cGUpO1xuXG4gICAgICBpZiAodHlwZSA9PT0gJ2NoYW5nZScpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVySW5kZXggPSAoMCwgX2FycmF5RmluZEluZGV4LmRlZmF1bHQpKGxpc3RlbmVycywgZnVuY3Rpb24gKHBhaXIpIHtcbiAgICAgICAgICByZXR1cm4gcGFpclswXSA9PT0gaGFuZGxlcjtcbiAgICAgICAgfSk7XG4gICAgICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKGxpc3RlbmVySW5kZXggIT09IC0xLCAnVHJ5aW5nIHRvIHJlbW92ZSBBcHBTdGF0ZSBsaXN0ZW5lciBmb3IgdW5yZWdpc3RlcmVkIGhhbmRsZXInKTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gbGlzdGVuZXJzW2xpc3RlbmVySW5kZXhdWzFdO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFZJU0lCSUxJVFlfQ0hBTkdFX0VWRU5ULCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGxpc3RlbmVySW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoQXBwU3RhdGUsIG51bGwsIFt7XG4gICAga2V5OiBcImN1cnJlbnRTdGF0ZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKCFBcHBTdGF0ZS5pc0F2YWlsYWJsZSkge1xuICAgICAgICByZXR1cm4gQXBwU3RhdGVzLkFDVElWRTtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChkb2N1bWVudFtWSVNJQklMSVRZX1NUQVRFX1BST1BFUlRZXSkge1xuICAgICAgICBjYXNlICdoaWRkZW4nOlxuICAgICAgICBjYXNlICdwcmVyZW5kZXInOlxuICAgICAgICBjYXNlICd1bmxvYWRlZCc6XG4gICAgICAgICAgcmV0dXJuIEFwcFN0YXRlcy5CQUNLR1JPVU5EO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIEFwcFN0YXRlcy5BQ1RJVkU7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEFwcFN0YXRlO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBBcHBTdGF0ZTtcbkFwcFN0YXRlLmlzQXZhaWxhYmxlID0gX0V4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiBkb2N1bWVudFtWSVNJQklMSVRZX1NUQVRFX1BST1BFUlRZXTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdfQ==