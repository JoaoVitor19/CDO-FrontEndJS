fdc113f6e9e6071b24a603f300dfb3e0
"use strict";

exports.__esModule = true;
exports.default = void 0;

var _ExecutionEnvironment = require("fbjs/lib/ExecutionEnvironment");

var _invariant = _interopRequireDefault(require("fbjs/lib/invariant"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

var dimensions = {
  window: {
    fontScale: 1,
    height: 0,
    scale: 1,
    width: 0
  },
  screen: {
    fontScale: 1,
    height: 0,
    scale: 1,
    width: 0
  }
};
var listeners = {};

var Dimensions = function () {
  function Dimensions() {}

  Dimensions.get = function get(dimension) {
    (0, _invariant.default)(dimensions[dimension], "No dimension set for key " + dimension);
    return dimensions[dimension];
  };

  Dimensions.set = function set(initialDimensions) {
    if (initialDimensions) {
      if (_ExecutionEnvironment.canUseDOM) {
        (0, _invariant.default)(false, 'Dimensions cannot be set in the browser');
      } else {
        if (initialDimensions.screen != null) {
          dimensions.screen = initialDimensions.screen;
        }

        if (initialDimensions.window != null) {
          dimensions.window = initialDimensions.window;
        }
      }
    }
  };

  Dimensions._update = function _update() {
    if (!_ExecutionEnvironment.canUseDOM) {
      return;
    }

    var win = window;
    var docEl = win.document.documentElement;
    dimensions.window = {
      fontScale: 1,
      height: docEl.clientHeight,
      scale: win.devicePixelRatio || 1,
      width: docEl.clientWidth
    };
    dimensions.screen = {
      fontScale: 1,
      height: win.screen.height,
      scale: win.devicePixelRatio || 1,
      width: win.screen.width
    };

    if (Array.isArray(listeners['change'])) {
      listeners['change'].forEach(function (handler) {
        return handler(dimensions);
      });
    }
  };

  Dimensions.addEventListener = function addEventListener(type, handler) {
    listeners[type] = listeners[type] || [];
    listeners[type].push(handler);
  };

  Dimensions.removeEventListener = function removeEventListener(type, handler) {
    if (Array.isArray(listeners[type])) {
      listeners[type] = listeners[type].filter(function (_handler) {
        return _handler !== handler;
      });
    }
  };

  return Dimensions;
}();

exports.default = Dimensions;

if (_ExecutionEnvironment.canUseDOM) {
  Dimensions._update();

  window.addEventListener('resize', Dimensions._update, false);
}

module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9FeGVjdXRpb25FbnZpcm9ubWVudCIsInJlcXVpcmUiLCJfaW52YXJpYW50IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsImRpbWVuc2lvbnMiLCJ3aW5kb3ciLCJmb250U2NhbGUiLCJoZWlnaHQiLCJzY2FsZSIsIndpZHRoIiwic2NyZWVuIiwibGlzdGVuZXJzIiwiRGltZW5zaW9ucyIsImdldCIsImRpbWVuc2lvbiIsInNldCIsImluaXRpYWxEaW1lbnNpb25zIiwiY2FuVXNlRE9NIiwiX3VwZGF0ZSIsIndpbiIsImRvY0VsIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRIZWlnaHQiLCJkZXZpY2VQaXhlbFJhdGlvIiwiY2xpZW50V2lkdGgiLCJBcnJheSIsImlzQXJyYXkiLCJmb3JFYWNoIiwiaGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0eXBlIiwicHVzaCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmaWx0ZXIiLCJfaGFuZGxlciIsIm1vZHVsZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUFBLE9BQU8sQ0FBQ0MsVUFBUixHQUFxQixJQUFyQjtBQUNBRCxPQUFPLENBQUNFLE9BQVIsR0FBa0IsS0FBSyxDQUF2Qjs7QUFFQSxJQUFJQyxxQkFBcUIsR0FBR0MsT0FBTyxDQUFDLCtCQUFELENBQW5DOztBQUVBLElBQUlDLFVBQVUsR0FBR0Msc0JBQXNCLENBQUNGLE9BQU8sQ0FBQyxvQkFBRCxDQUFSLENBQXZDOztBQUVBLFNBQVNFLHNCQUFULENBQWdDQyxHQUFoQyxFQUFxQztBQUFFLFNBQU9BLEdBQUcsSUFBSUEsR0FBRyxDQUFDTixVQUFYLEdBQXdCTSxHQUF4QixHQUE4QjtBQUFFTCxJQUFBQSxPQUFPLEVBQUVLO0FBQVgsR0FBckM7QUFBd0Q7O0FBVy9GLElBQUlDLFVBQVUsR0FBRztBQUNmQyxFQUFBQSxN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LENBQUNrQixnQkFBWCxHQUE4QixTQUFTQSxnQkFBVCxDQUEwQkMsSUFBMUIsRUFBZ0NGLE9BQWhDLEVBQXlDO0FBQ3JFbEIsSUFBQUEsU0FBUyxDQUFDb0IsSUFBRCxDQUFULEdBQWtCcEIsU0FBUyxDQUFDb0IsSUFBRCxDQUFULElBQW1CLEVBQXJDO0FBQ0FwQixJQUFBQSxTQUFTLENBQUNvQixJQUFELENBQVQsQ0FBZ0JDLElBQWhCLENBQXFCSCxPQUFyQjtBQUNELEdBSEQ7O0FBS0FqQixFQUFBQSxVQUFVLENBQUNxQixtQkFBWCxHQUFpQyxTQUFTQSxtQkFBVCxDQUE2QkYsSUFBN0IsRUFBbUNGLE9BQW5DLEVBQTRDO0FBQzNFLFFBQUlILEtBQUssQ0FBQ0MsT0FBTixDQUFjaEIsU0FBUyxDQUFDb0IsSUFBRCxDQUF2QixDQUFKLEVBQW9DO0FBQ2xDcEIsTUFBQUEsU0FBUyxDQUFDb0IsSUFBRCxDQUFULEdBQWtCcEIsU0FBUyxDQUFDb0IsSUFBRCxDQUFULENBQWdCRyxNQUFoQixDQUF1QixVQUFVQyxRQUFWLEVBQW9CO0FBQzNELGVBQU9BLFFBQVEsS0FBS04sT0FBcEI7QUFDRCxPQUZpQixDQUFsQjtBQUdEO0FBQ0YsR0FORDs7QUFRQSxTQUFPakIsVUFBUDtBQUNELENBakU2QixFQUE5Qjs7QUFtRUFoQixPQUFPLENBQUNFLE9BQVIsR0FBa0JjLFVBQWxCOztBQUVBLElBQUliLHFCQUFxQixDQUFDa0IsU0FBMUIsRUFBcUM7QUFDbkNMLEVBQUFBLFVBQVUsQ0FBQ00sT0FBWDs7QUFFQWIsRUFBQUEsTUFBTSxDQUFDeUIsZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0NsQixVQUFVLENBQUNNLE9BQTdDLEVBQXNELEtBQXREO0FBQ0Q7O0FBRURrQixNQUFNLENBQUN4QyxPQUFQLEdBQWlCQSxPQUFPLENBQUNFLE9BQXpCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKFwiZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnRcIik7XG5cbnZhciBfaW52YXJpYW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiZmJqcy9saWIvaW52YXJpYW50XCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE5pY29sYXMgR2FsbGFnaGVyLlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogXG4gKi9cbnZhciBkaW1lbnNpb25zID0ge1xuICB3aW5kb3c6IHtcbiAgICBmb250U2NhbGU6IDEsXG4gICAgaGVpZ2h0OiAwLFxuICAgIHNjYWxlOiAxLFxuICAgIHdpZHRoOiAwXG4gIH0sXG4gIHNjcmVlbjoge1xuICAgIGZvbnRTY2FsZTogMSxcbiAgICBoZWlnaHQ6IDAsXG4gICAgc2NhbGU6IDEsXG4gICAgd2lkdGg6IDBcbiAgfVxufTtcbnZhciBsaXN0ZW5lcnMgPSB7fTtcblxudmFyIERpbWVuc2lvbnMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEaW1lbnNpb25zKCkge31cblxuICBEaW1lbnNpb25zLmdldCA9IGZ1bmN0aW9uIGdldChkaW1lbnNpb24pIHtcbiAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShkaW1lbnNpb25zW2RpbWVuc2lvbl0sIFwiTm8gZGltZW5zaW9uIHNldCBmb3Iga2V5IFwiICsgZGltZW5zaW9uKTtcbiAgICByZXR1cm4gZGltZW5zaW9uc1tkaW1lbnNpb25dO1xuICB9O1xuXG4gIERpbWVuc2lvbnMuc2V0ID0gZnVuY3Rpb24gc2V0KGluaXRpYWxEaW1lbnNpb25zKSB7XG4gICAgaWYgKGluaXRpYWxEaW1lbnNpb25zKSB7XG4gICAgICBpZiAoX0V4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICAgICAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShmYWxzZSwgJ0RpbWVuc2lvbnMgY2Fubm90IGJlIHNldCBpbiB0aGUgYnJvd3NlcicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGluaXRpYWxEaW1lbnNpb25zLnNjcmVlbiAhPSBudWxsKSB7XG4gICAgICAgICAgZGltZW5zaW9ucy5zY3JlZW4gPSBpbml0aWFsRGltZW5zaW9ucy5zY3JlZW47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5pdGlhbERpbWVuc2lvbnMud2luZG93ICE9IG51bGwpIHtcbiAgICAgICAgICBkaW1lbnNpb25zLndpbmRvdyA9IGluaXRpYWxEaW1lbnNpb25zLndpbmRvdztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBEaW1lbnNpb25zLl91cGRhdGUgPSBmdW5jdGlvbiBfdXBkYXRlKCkge1xuICAgIGlmICghX0V4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB3aW4gPSB3aW5kb3c7XG4gICAgdmFyIGRvY0VsID0gd2luLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICBkaW1lbnNpb25zLndpbmRvdyA9IHtcbiAgICAgIGZvbnRTY2FsZTogMSxcbiAgICAgIGhlaWdodDogZG9jRWwuY2xpZW50SGVpZ2h0LFxuICAgICAgc2NhbGU6IHdpbi5kZXZpY2VQaXhlbFJhdGlvIHx8IDEsXG4gICAgICB3aWR0aDogZG9jRWwuY2xpZW50V2lkdGhcbiAgICB9O1xuICAgIGRpbWVuc2lvbnMuc2NyZWVuID0ge1xuICAgICAgZm9udFNjYWxlOiAxLFxuICAgICAgaGVpZ2h0OiB3aW4uc2NyZWVuLmhlaWdodCxcbiAgICAgIHNjYWxlOiB3aW4uZGV2aWNlUGl4ZWxSYXRpbyB8fCAxLFxuICAgICAgd2lkdGg6IHdpbi5zY3JlZW4ud2lkdGhcbiAgICB9O1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdGVuZXJzWydjaGFuZ2UnXSkpIHtcbiAgICAgIGxpc3RlbmVyc1snY2hhbmdlJ10uZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gaGFuZGxlcihkaW1lbnNpb25zKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBEaW1lbnNpb25zLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpIHtcbiAgICBsaXN0ZW5lcnNbdHlwZV0gPSBsaXN0ZW5lcnNbdHlwZV0gfHwgW107XG4gICAgbGlzdGVuZXJzW3R5cGVdLnB1c2goaGFuZGxlcik7XG4gIH07XG5cbiAgRGltZW5zaW9ucy5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdGVuZXJzW3R5cGVdKSkge1xuICAgICAgbGlzdGVuZXJzW3R5cGVdID0gbGlzdGVuZXJzW3R5cGVdLmZpbHRlcihmdW5jdGlvbiAoX2hhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIF9oYW5kbGVyICE9PSBoYW5kbGVyO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBEaW1lbnNpb25zO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBEaW1lbnNpb25zO1xuXG5pZiAoX0V4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICBEaW1lbnNpb25zLl91cGRhdGUoKTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgRGltZW5zaW9ucy5fdXBkYXRlLCBmYWxzZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdfQ==