698396587347d3444cab2d9efdcebc2d
"use strict";

exports.__esModule = true;
exports.atomic = atomic;
exports.classic = classic;
exports.inline = inline;
exports.stringifyValueWithProperty = stringifyValueWithProperty;

var _createReactDOMStyle = _interopRequireDefault(require("./createReactDOMStyle"));

var _hash = _interopRequireDefault(require("../../vendor/hash"));

var _hyphenateStyleName = _interopRequireDefault(require("hyphenate-style-name"));

var _normalizeValueWithProperty = _interopRequireDefault(require("./normalizeValueWithProperty"));

var _prefixStyles = _interopRequireWildcard(require("../../modules/prefixStyles"));

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

var cache = {
  get: function get(property, value) {
    if (cache[property] != null && cache[property].hasOwnProperty(value) && cache[property][value] != null) {
      return cache[property][value];
    }
  },
  set: function set(property, value, object) {
    if (cache[property] == null) {
      cache[property] = {};
    }

    return cache[property][value] = object;
  }
};

function atomic(style) {
  return Object.keys(style).sort().reduce(function (acc, property) {
    var value = style[property];

    if (value != null) {
      var valueString = stringifyValueWithProperty(value, property);
      var cachedResult = cache.get(property, valueString);

      if (cachedResult != null) {
        var identifier = cachedResult.identifier;
        acc[identifier] = cachedResult;
      } else {
        var _identifier = createIdentifier('r', property, value);

        var rules = createAtomicRules(_identifier, property, value);

        var _cachedResult = cache.set(property, valueString, {
          property: property,
          value: stringifyValueWithProperty(value, property),
          identifier: _identifier,
          rules: rules
        });

        acc[_identifier] = _cachedResult;
      }
    }

    return acc;
  }, {});
}

function classic(style, name) {
  var _ref;

  var identifier = createIdentifier('css', name, style);

  var animationKeyframes = style.animationKeyframes,
      rest = _objectWithoutPropertiesLoose(style, ["animationKeyframes"]);

  var rules = [];
  var selector = "." + identifier;
  var animationName;

  if (animationKeyframes != null) {
    var _processKeyframesValu = processKeyframesValue(animationKeyframes),
        animationNames = _processKeyframesValu.animationNames,
        keyframesRules = _processKeyframesValu.rules;

    animationName = animationNames.join(',');
    rules.push.apply(rules, keyframesRules);
  }

  var block = createDeclarationBlock(_objectSpread(_objectSpread({}, rest), {}, {
    animationName: animationName
  }));
  rules.push("" + selector + block);
  return _ref = {}, _ref[identifier] = {
    identifier: identifier,
    rules: rules
  }, _ref;
}

function inline(style) {
  return (0, _prefixStyles.prefixInlineStyles)((0, _createReactDOMStyle.default)(style));
}

function stringifyValueWithProperty(value, property) {
  var normalizedValue = (0, _normalizeValueWithProperty.default)(value, property);
  return typeof normalizedValue !== 'string' ? JSON.stringify(normalizedValue || '') : normalizedValue;
}

function createAtomicRules(identifier, property, value) {
  var rules = [];
  var selector = "." + identifier;

  switch (property) {
    case 'animationKeyframes':
      {
        var _processKeyframesValu2 = processKeyframesValue(value),
            animationNames = _processKeyframesValu2.animationNames,
            keyframesRules = _processKeyframesValu2.rules;

        var block = createDeclarationBlock({
          animationName: animationNames.join(',')
        });
        rules.push.apply(rules, ["" + selector + block].concat(keyframesRules));
        break;
      }

    case 'placeholderTextColor':
      {
        var _block = createDeclarationBlock({
          color: value,
          opacity: 1
        });

        rules.push(selector + "::-webkit-input-placeholder" + _block, selector + "::-moz-placeholder" + _block, selector + ":-ms-input-placeholder" + _block, selector + "::placeholder" + _block);
        break;
      }

    case 'pointerEvents':
      {
        var finalValue = value;

        if (value === 'auto' || value === 'box-only') {
          finalValue = 'auto!important';

          if (value === 'box-only') {
            var _block3 = createDeclarationBlock({
              pointerEvents: 'none'
            });

            rules.push(selector + ">*" + _block3);
          }
        } else if (value === 'none' || value === 'box-none') {
          finalValue = 'none!important';

          if (value === 'box-none') {
            var _block4 = createDeclarationBlock({
              pointerEvents: 'auto'
            });

            rules.push(selector + ">*" + _block4);
          }
        }

        var _block2 = createDeclarationBlock({
          pointerEvents: finalValue
        });

        rules.push("" + selector + _block2);
        break;
      }

    case 'scrollbarWidth':
      {
        if (value === 'none') {
          rules.push(selector + "::-webkit-scrollbar{display:none}");
        }

        var _block5 = createDeclarationBlock({
          scrollbarWidth: value
        });

        rules.push("" + selector + _block5);
        break;
      }

    default:
      {
        var _createDeclarationBlo;

        var _block6 = createDeclarationBlock((_createDeclarationBlo = {}, _createDeclarationBlo[property] = value, _createDeclarationBlo));

        rules.push("" + selector + _block6);
        break;
      }
  }

  return rules;
}

function createDeclarationBlock(style) {
  var domStyle = (0, _prefixStyles.default)((0, _createReactDOMStyle.default)(style));
  var declarationsString = Object.keys(domStyle).map(function (property) {
    var value = domStyle[property];
    var prop = (0, _hyphenateStyleName.default)(property);

    if (Array.isArray(value)) {
      return value.map(function (v) {
        return prop + ":" + v;
      }).join(';');
    } else {
      return prop + ":" + value;
    }
  }).sort().join(';');
  return "{" + declarationsString + ";}";
}

function createIdentifier(prefix, name, value) {
  var hashedString = (0, _hash.default)(name + stringifyValueWithProperty(value, name));
  return process.env.NODE_ENV !== 'production' ? prefix + "-" + name + "-" + hashedString : prefix + "-" + hashedString;
}

function createKeyframes(keyframes) {
  var prefixes = ['-webkit-', ''];
  var identifier = createIdentifier('r', 'animation', keyframes);
  var steps = '{' + Object.keys(keyframes).map(function (stepName) {
    var rule = keyframes[stepName];
    var block = createDeclarationBlock(rule);
    return "" + stepName + block;
  }).join('') + '}';
  var rules = prefixes.map(function (prefix) {
    return "@" + prefix + "keyframes " + identifier + steps;
  });
  return {
    identifier: identifier,
    rules: rules
  };
}

function processKeyframesValue(keyframesValue) {
  if (typeof keyframesValue === 'number') {
    throw new Error("Invalid CSS keyframes type: " + typeof keyframesValue);
  }

  var animationNames = [];
  var rules = [];
  var value = Array.isArray(keyframesValue) ? keyframesValue : [keyframesValue];
  value.forEach(function (keyframes) {
    if (typeof keyframes === 'string') {
      animationNames.push(keyframes);
    } else {
      var _createKeyframes = createKeyframes(keyframes),
          identifier = _createKeyframes.identifier,
          keyframesRules = _createKeyframes.rules;

      animationNames.push(identifier);
      rules.push.apply(rules, keyframesRules);
    }
  });
  return {
    animationNames: animationNames,
    rules: rules
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBpbGUuanMiXSwibmFtZXMiOlsiZXhwb3J0cyIsIl9fZXNNb2R1bGUiLCJhdG9taWMiLCJjbGFzc2ljIiwiaW5saW5lIiwic3RyaW5naWZ5VmFsdWVXaXRoUHJvcGVydHkiLCJfY3JlYXRlUmVhY3RET01TdHlsZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2hhc2giLCJfaHlwaGVuYXRlU3R5bGVOYW1lIiwiX25vcm1hbGl6ZVZhbHVlV2l0aFByb3BlcnR5IiwiX3ByZWZpeFN0eWxlcyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiV2Vha01hcCIsImNhY2hlIiwib2JqIiwiZGVmYXVsdCIsImhhcyIsImdldCIsIm5ld09iaiIsImhhc1Byb3BlcnR5RGVzY3JpcHRvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsInNldCIsIm93bktleXMiLCJvYmplY3QiLCJlbnVtZXJhYmxlT25seSIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJzeW1ib2xzIiwiZmlsdGVyIiwic3ltIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidmFsdWUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIiwiZXhjbHVkZWQiLCJzb3VyY2VLZXlzIiwiaW5kZXhPZiIsInByb3BlcnR5Iiwic3R5bGUiLCJzb3J0IiwicmVkdWNlIiwiYWNjIiwidmFsdWVTdHJpbmciLCJjYWNoZWRSZXN1bHQiLCJpZGVudGlmaWVyIiwiX2lkZW50aWZpZXIiLCJjcmVhdGVJZGVudGlmaWVyIiwicnVsZXMiLCJjcmVhdGVBdG9taWNSdWxlcyIsIl9jYWNoZWRSZXN1bHQiLCJuYW1lIiwiX3JlZiIsImFuaW1hdGlvbktleWZyYW1lcyIsInJlc3QiLCJzZWxlY3RvciIsImFuaW1hdGlvbk5hbWUiLCJfcHJvY2Vzc0tleWZyYW1lc1ZhbHUiLCJwcm9jZXNzS2V5ZnJhbWVzVmFsdWUiLCJhbmltYXRpb25OYW1lcyIsImtleWZyYW1lc1J1bGVzIiwiam9pbiIsImJsb2NrIiwiY3JlYXRlRGVjbGFyYXRpb25CbG9jayIsInByZWZpeElubGluZVN0eWxlcyIsIm5vcm1hbGl6ZWRWYWx1ZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJfcHJvY2Vzc0tleWZyYW1lc1ZhbHUyIiwiY29uY2F0IiwiX2Jsb2NrIiwiY29sb3IiLCJvcGFjaXR5IiwiZmluYWxWYWx1ZSIsIl9ibG9jazMiLCJwb2ludGVyRXZlbnRzIiwiX2Jsb2NrNCIsIl9ibG9jazIiLCJfYmxvY2s1Iiwic2Nyb2xsYmFyV2lkdGgiLCJfY3JlYXRlRGVjbGFyYXRpb25CbG8iLCJfYmxvY2s2IiwiZG9tU3R5bGUiLCJkZWNsYXJhdGlvbnNTdHJpbmciLCJtYXAiLCJwcm9wIiwiQXJyYXkiLCJpc0FycmF5IiwidiIsInByZWZpeCIsImhhc2hlZFN0cmluZyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImNyZWF0ZUtleWZyYW1lcyIsImtleWZyYW1lcyIsInByZWZpeGVzIiwic3RlcHMiLCJzdGVwTmFtZSIsInJ1bGUiLCJrZXlmcmFtZXNWYWx1ZSIsIkVycm9yIiwiX2NyZWF0ZUtleWZyYW1lcyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUFBLE9BQU8sQ0FBQ0MsVUFBUixHQUFxQixJQUFyQjtBQUNBRCxPQUFPLENBQUNFLE1BQVIsR0FBaUJBLE1BQWpCO0FBQ0FGLE9BQU8sQ0FBQ0csT0FBUixHQUFrQkEsT0FBbEI7QUFD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TUFBSVgsS0FBSyxHQUFHLEVBQVo7QUFDQSxNQUFJakIsS0FBSyxHQUFHdUQsS0FBSyxDQUFDQyxPQUFOLENBQWNhLGNBQWQsSUFBZ0NBLGNBQWhDLEdBQWlELENBQUNBLGNBQUQsQ0FBN0Q7QUFDQXJFLEVBQUFBLEtBQUssQ0FBQ0osT0FBTixDQUFjLFVBQVVvRSxTQUFWLEVBQXFCO0FBQ2pDLFFBQUksT0FBT0EsU0FBUCxLQUFxQixRQUF6QixFQUFtQztBQUVqQ3BDLE1BQUFBLGNBQWMsQ0FBQ3hDLElBQWYsQ0FBb0I0RSxTQUFwQjtBQUNELEtBSEQsTUFHTztBQUVMLFVBQUlPLGdCQUFnQixHQUFHUixlQUFlLENBQUNDLFNBQUQsQ0FBdEM7QUFBQSxVQUNJbEQsVUFBVSxHQUFHeUQsZ0JBQWdCLENBQUN6RCxVQURsQztBQUFBLFVBRUllLGNBQWMsR0FBRzBDLGdCQUFnQixDQUFDdEQsS0FGdEM7O0FBSUFXLE1BQUFBLGNBQWMsQ0FBQ3hDLElBQWYsQ0FBb0IwQixVQUFwQjtBQUNBRyxNQUFBQSxLQUFLLENBQUM3QixJQUFOLENBQVdDLEtBQVgsQ0FBaUI0QixLQUFqQixFQUF3QlksY0FBeEI7QUFDRDtBQUNGLEdBYkQ7QUFjQSxTQUFPO0FBQ0xELElBQUFBLGNBQWMsRUFBRUEsY0FEWDtBQUVMWCxJQUFBQSxLQUFLLEVBQUVBO0FBRkYsR0FBUDtBQUlEIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmF0b21pYyA9IGF0b21pYztcbmV4cG9ydHMuY2xhc3NpYyA9IGNsYXNzaWM7XG5leHBvcnRzLmlubGluZSA9IGlubGluZTtcbmV4cG9ydHMuc3RyaW5naWZ5VmFsdWVXaXRoUHJvcGVydHkgPSBzdHJpbmdpZnlWYWx1ZVdpdGhQcm9wZXJ0eTtcblxudmFyIF9jcmVhdGVSZWFjdERPTVN0eWxlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9jcmVhdGVSZWFjdERPTVN0eWxlXCIpKTtcblxudmFyIF9oYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vdmVuZG9yL2hhc2hcIikpO1xuXG52YXIgX2h5cGhlbmF0ZVN0eWxlTmFtZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImh5cGhlbmF0ZS1zdHlsZS1uYW1lXCIpKTtcblxudmFyIF9ub3JtYWxpemVWYWx1ZVdpdGhQcm9wZXJ0eSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vbm9ybWFsaXplVmFsdWVXaXRoUHJvcGVydHlcIikpO1xuXG52YXIgX3ByZWZpeFN0eWxlcyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCIuLi8uLi9tb2R1bGVzL3ByZWZpeFN0eWxlc1wiKSk7XG5cbmZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsOyB2YXIgY2FjaGUgPSBuZXcgV2Vha01hcCgpOyBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUgPSBmdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKSB7IHJldHVybiBjYWNoZTsgfTsgcmV0dXJuIGNhY2hlOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmogIT09IFwiZnVuY3Rpb25cIikgeyByZXR1cm4geyBkZWZhdWx0OiBvYmogfTsgfSB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgaWYgKGNhY2hlKSB7IGNhY2hlLnNldChvYmosIG5ld09iaik7IH0gcmV0dXJuIG5ld09iajsgfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG52YXIgY2FjaGUgPSB7XG4gIGdldDogZnVuY3Rpb24gZ2V0KHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIGlmIChjYWNoZVtwcm9wZXJ0eV0gIT0gbnVsbCAmJiBjYWNoZVtwcm9wZXJ0eV0uaGFzT3duUHJvcGVydHkodmFsdWUpICYmIGNhY2hlW3Byb3BlcnR5XVt2YWx1ZV0gIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGNhY2hlW3Byb3BlcnR5XVt2YWx1ZV07XG4gICAgfVxuICB9LFxuICBzZXQ6IGZ1bmN0aW9uIHNldChwcm9wZXJ0eSwgdmFsdWUsIG9iamVjdCkge1xuICAgIGlmIChjYWNoZVtwcm9wZXJ0eV0gPT0gbnVsbCkge1xuICAgICAgY2FjaGVbcHJvcGVydHldID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhY2hlW3Byb3BlcnR5XVt2YWx1ZV0gPSBvYmplY3Q7XG4gIH1cbn07XG4vKipcbiAqIENvbXBpbGUgc3R5bGUgdG8gYXRvbWljIENTUyBydWxlcy5cbiAqL1xuXG5mdW5jdGlvbiBhdG9taWMoc3R5bGUpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHN0eWxlKS5zb3J0KCkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHByb3BlcnR5KSB7XG4gICAgdmFyIHZhbHVlID0gc3R5bGVbcHJvcGVydHldO1xuXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIHZhciB2YWx1ZVN0cmluZyA9IHN0cmluZ2lmeVZhbHVlV2l0aFByb3BlcnR5KHZhbHVlLCBwcm9wZXJ0eSk7XG4gICAgICB2YXIgY2FjaGVkUmVzdWx0ID0gY2FjaGUuZ2V0KHByb3BlcnR5LCB2YWx1ZVN0cmluZyk7XG5cbiAgICAgIGlmIChjYWNoZWRSZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICB2YXIgaWRlbnRpZmllciA9IGNhY2hlZFJlc3VsdC5pZGVudGlmaWVyO1xuICAgICAgICBhY2NbaWRlbnRpZmllcl0gPSBjYWNoZWRSZXN1bHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgX2lkZW50aWZpZXIgPSBjcmVhdGVJZGVudGlmaWVyKCdyJywgcHJvcGVydHksIHZhbHVlKTtcblxuICAgICAgICB2YXIgcnVsZXMgPSBjcmVhdGVBdG9taWNSdWxlcyhfaWRlbnRpZmllciwgcHJvcGVydHksIHZhbHVlKTtcblxuICAgICAgICB2YXIgX2NhY2hlZFJlc3VsdCA9IGNhY2hlLnNldChwcm9wZXJ0eSwgdmFsdWVTdHJpbmcsIHtcbiAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksXG4gICAgICAgICAgdmFsdWU6IHN0cmluZ2lmeVZhbHVlV2l0aFByb3BlcnR5KHZhbHVlLCBwcm9wZXJ0eSksXG4gICAgICAgICAgaWRlbnRpZmllcjogX2lkZW50aWZpZXIsXG4gICAgICAgICAgcnVsZXM6IHJ1bGVzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFjY1tfaWRlbnRpZmllcl0gPSBfY2FjaGVkUmVzdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn1cbi8qKlxuICogQ29tcGlsZSBzaW1wbGUgc3R5bGUgb2JqZWN0IHRvIGNsYXNzaWMgQ1NTIHJ1bGVzLlxuICogTm8gc3VwcG9ydCBmb3IgJ3BsYWNlaG9sZGVyVGV4dENvbG9yJywgJ3Njcm9sbGJhcldpZHRoJywgb3IgJ3BvaW50ZXJFdmVudHMnLlxuICovXG5cblxuZnVuY3Rpb24gY2xhc3NpYyhzdHlsZSwgbmFtZSkge1xuICB2YXIgX3JlZjtcblxuICB2YXIgaWRlbnRpZmllciA9IGNyZWF0ZUlkZW50aWZpZXIoJ2NzcycsIG5hbWUsIHN0eWxlKTtcblxuICB2YXIgYW5pbWF0aW9uS2V5ZnJhbWVzID0gc3R5bGUuYW5pbWF0aW9uS2V5ZnJhbWVzLFxuICAgICAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHN0eWxlLCBbXCJhbmltYXRpb25LZXlmcmFtZXNcIl0pO1xuXG4gIHZhciBydWxlcyA9IFtdO1xuICB2YXIgc2VsZWN0b3IgPSBcIi5cIiArIGlkZW50aWZpZXI7XG4gIHZhciBhbmltYXRpb25OYW1lO1xuXG4gIGlmIChhbmltYXRpb25LZXlmcmFtZXMgIT0gbnVsbCkge1xuICAgIHZhciBfcHJvY2Vzc0tleWZyYW1lc1ZhbHUgPSBwcm9jZXNzS2V5ZnJhbWVzVmFsdWUoYW5pbWF0aW9uS2V5ZnJhbWVzKSxcbiAgICAgICAgYW5pbWF0aW9uTmFtZXMgPSBfcHJvY2Vzc0tleWZyYW1lc1ZhbHUuYW5pbWF0aW9uTmFtZXMsXG4gICAgICAgIGtleWZyYW1lc1J1bGVzID0gX3Byb2Nlc3NLZXlmcmFtZXNWYWx1LnJ1bGVzO1xuXG4gICAgYW5pbWF0aW9uTmFtZSA9IGFuaW1hdGlvbk5hbWVzLmpvaW4oJywnKTtcbiAgICBydWxlcy5wdXNoLmFwcGx5KHJ1bGVzLCBrZXlmcmFtZXNSdWxlcyk7XG4gIH1cblxuICB2YXIgYmxvY2sgPSBjcmVhdGVEZWNsYXJhdGlvbkJsb2NrKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmVzdCksIHt9LCB7XG4gICAgYW5pbWF0aW9uTmFtZTogYW5pbWF0aW9uTmFtZVxuICB9KSk7XG4gIHJ1bGVzLnB1c2goXCJcIiArIHNlbGVjdG9yICsgYmxvY2spO1xuICByZXR1cm4gX3JlZiA9IHt9LCBfcmVmW2lkZW50aWZpZXJdID0ge1xuICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgcnVsZXM6IHJ1bGVzXG4gIH0sIF9yZWY7XG59XG4vKipcbiAqIENvbXBpbGUgc2ltcGxlIHN0eWxlIG9iamVjdCB0byBpbmxpbmUgRE9NIHN0eWxlcy5cbiAqIE5vIHN1cHBvcnQgZm9yICdhbmltYXRpb25LZXlmcmFtZXMnLCAncGxhY2Vob2xkZXJUZXh0Q29sb3InLCAnc2Nyb2xsYmFyV2lkdGgnLCBvciAncG9pbnRlckV2ZW50cycuXG4gKi9cblxuXG5mdW5jdGlvbiBpbmxpbmUoc3R5bGUpIHtcbiAgcmV0dXJuICgwLCBfcHJlZml4U3R5bGVzLnByZWZpeElubGluZVN0eWxlcykoKDAsIF9jcmVhdGVSZWFjdERPTVN0eWxlLmRlZmF1bHQpKHN0eWxlKSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIHZhbHVlIHN0cmluZyB0aGF0IG5vcm1hbGl6ZXMgZGlmZmVyZW50IGlucHV0IHZhbHVlcyB3aXRoIGEgY29tbW9uXG4gKiBvdXRwdXQuXG4gKi9cblxuXG5mdW5jdGlvbiBzdHJpbmdpZnlWYWx1ZVdpdGhQcm9wZXJ0eSh2YWx1ZSwgcHJvcGVydHkpIHtcbiAgLy8gZS5nLiwgMCA9PiAnMHB4JywgJ2JsYWNrJyA9PiAncmdiYSgwLDAsMCwxKSdcbiAgdmFyIG5vcm1hbGl6ZWRWYWx1ZSA9ICgwLCBfbm9ybWFsaXplVmFsdWVXaXRoUHJvcGVydHkuZGVmYXVsdCkodmFsdWUsIHByb3BlcnR5KTtcbiAgcmV0dXJuIHR5cGVvZiBub3JtYWxpemVkVmFsdWUgIT09ICdzdHJpbmcnID8gSlNPTi5zdHJpbmdpZnkobm9ybWFsaXplZFZhbHVlIHx8ICcnKSA6IG5vcm1hbGl6ZWRWYWx1ZTtcbn1cbi8qKlxuICogQ3JlYXRlIHRoZSBBdG9taWMgQ1NTIHJ1bGVzIG5lZWRlZCBmb3IgYSBnaXZlbiBTdHlsZVNoZWV0IHJ1bGUuXG4gKiBUcmFuc2xhdGVzIFN0eWxlU2hlZXQgZGVjbGFyYXRpb25zIHRvIENTUy5cbiAqL1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZUF0b21pY1J1bGVzKGlkZW50aWZpZXIsIHByb3BlcnR5LCB2YWx1ZSkge1xuICB2YXIgcnVsZXMgPSBbXTtcbiAgdmFyIHNlbGVjdG9yID0gXCIuXCIgKyBpZGVudGlmaWVyOyAvLyBIYW5kbGUgbm9uLXN0YW5kYXJkIHByb3BlcnRpZXMgYW5kIG9iamVjdCB2YWx1ZXMgdGhhdCByZXF1aXJlIG11bHRpcGxlXG4gIC8vIENTUyBydWxlcyB0byBiZSBjcmVhdGVkLlxuXG4gIHN3aXRjaCAocHJvcGVydHkpIHtcbiAgICBjYXNlICdhbmltYXRpb25LZXlmcmFtZXMnOlxuICAgICAge1xuICAgICAgICB2YXIgX3Byb2Nlc3NLZXlmcmFtZXNWYWx1MiA9IHByb2Nlc3NLZXlmcmFtZXNWYWx1ZSh2YWx1ZSksXG4gICAgICAgICAgICBhbmltYXRpb25OYW1lcyA9IF9wcm9jZXNzS2V5ZnJhbWVzVmFsdTIuYW5pbWF0aW9uTmFtZXMsXG4gICAgICAgICAgICBrZXlmcmFtZXNSdWxlcyA9IF9wcm9jZXNzS2V5ZnJhbWVzVmFsdTIucnVsZXM7XG5cbiAgICAgICAgdmFyIGJsb2NrID0gY3JlYXRlRGVjbGFyYXRpb25CbG9jayh7XG4gICAgICAgICAgYW5pbWF0aW9uTmFtZTogYW5pbWF0aW9uTmFtZXMuam9pbignLCcpXG4gICAgICAgIH0pO1xuICAgICAgICBydWxlcy5wdXNoLmFwcGx5KHJ1bGVzLCBbXCJcIiArIHNlbGVjdG9yICsgYmxvY2tdLmNvbmNhdChrZXlmcmFtZXNSdWxlcykpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAvLyBFcXVpdmFsZW50IHRvIHVzaW5nICc6OnBsYWNlaG9sZGVyJ1xuXG4gICAgY2FzZSAncGxhY2Vob2xkZXJUZXh0Q29sb3InOlxuICAgICAge1xuICAgICAgICB2YXIgX2Jsb2NrID0gY3JlYXRlRGVjbGFyYXRpb25CbG9jayh7XG4gICAgICAgICAgY29sb3I6IHZhbHVlLFxuICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcnVsZXMucHVzaChzZWxlY3RvciArIFwiOjotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVyXCIgKyBfYmxvY2ssIHNlbGVjdG9yICsgXCI6Oi1tb3otcGxhY2Vob2xkZXJcIiArIF9ibG9jaywgc2VsZWN0b3IgKyBcIjotbXMtaW5wdXQtcGxhY2Vob2xkZXJcIiArIF9ibG9jaywgc2VsZWN0b3IgKyBcIjo6cGxhY2Vob2xkZXJcIiArIF9ibG9jayk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIC8vIFBvbHlmaWxsIGZvciBhZGRpdGlvbmFsICdwb2ludGVyLWV2ZW50cycgdmFsdWVzXG4gICAgLy8gU2VlIGQxM2Y3ODYyMmIyMzNhMGFmYzBjN2EyMDBjMGEwNzkyYzhjYTllNThcblxuICAgIGNhc2UgJ3BvaW50ZXJFdmVudHMnOlxuICAgICAge1xuICAgICAgICB2YXIgZmluYWxWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ2F1dG8nIHx8IHZhbHVlID09PSAnYm94LW9ubHknKSB7XG4gICAgICAgICAgZmluYWxWYWx1ZSA9ICdhdXRvIWltcG9ydGFudCc7XG5cbiAgICAgICAgICBpZiAodmFsdWUgPT09ICdib3gtb25seScpIHtcbiAgICAgICAgICAgIHZhciBfYmxvY2szID0gY3JlYXRlRGVjbGFyYXRpb25CbG9jayh7XG4gICAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJ1bGVzLnB1c2goc2VsZWN0b3IgKyBcIj4qXCIgKyBfYmxvY2szKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdub25lJyB8fCB2YWx1ZSA9PT0gJ2JveC1ub25lJykge1xuICAgICAgICAgIGZpbmFsVmFsdWUgPSAnbm9uZSFpbXBvcnRhbnQnO1xuXG4gICAgICAgICAgaWYgKHZhbHVlID09PSAnYm94LW5vbmUnKSB7XG4gICAgICAgICAgICB2YXIgX2Jsb2NrNCA9IGNyZWF0ZURlY2xhcmF0aW9uQmxvY2soe1xuICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnYXV0bydcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBydWxlcy5wdXNoKHNlbGVjdG9yICsgXCI+KlwiICsgX2Jsb2NrNCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9ibG9jazIgPSBjcmVhdGVEZWNsYXJhdGlvbkJsb2NrKHtcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiBmaW5hbFZhbHVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJ1bGVzLnB1c2goXCJcIiArIHNlbGVjdG9yICsgX2Jsb2NrMik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIC8vIFBvbHlmaWxsIGZvciBkcmFmdCBzcGVjXG4gICAgLy8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy1zY3JvbGxiYXJzLTEvXG5cbiAgICBjYXNlICdzY3JvbGxiYXJXaWR0aCc6XG4gICAgICB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgcnVsZXMucHVzaChzZWxlY3RvciArIFwiOjotd2Via2l0LXNjcm9sbGJhcntkaXNwbGF5Om5vbmV9XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9ibG9jazUgPSBjcmVhdGVEZWNsYXJhdGlvbkJsb2NrKHtcbiAgICAgICAgICBzY3JvbGxiYXJXaWR0aDogdmFsdWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcnVsZXMucHVzaChcIlwiICsgc2VsZWN0b3IgKyBfYmxvY2s1KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICBkZWZhdWx0OlxuICAgICAge1xuICAgICAgICB2YXIgX2NyZWF0ZURlY2xhcmF0aW9uQmxvO1xuXG4gICAgICAgIHZhciBfYmxvY2s2ID0gY3JlYXRlRGVjbGFyYXRpb25CbG9jaygoX2NyZWF0ZURlY2xhcmF0aW9uQmxvID0ge30sIF9jcmVhdGVEZWNsYXJhdGlvbkJsb1twcm9wZXJ0eV0gPSB2YWx1ZSwgX2NyZWF0ZURlY2xhcmF0aW9uQmxvKSk7XG5cbiAgICAgICAgcnVsZXMucHVzaChcIlwiICsgc2VsZWN0b3IgKyBfYmxvY2s2KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gIH1cblxuICByZXR1cm4gcnVsZXM7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBDU1MgZGVjbGFyYXRpb24gYmxvY2sgZnJvbSBhIFN0eWxlU2hlZXQgb2JqZWN0LlxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlRGVjbGFyYXRpb25CbG9jayhzdHlsZSkge1xuICB2YXIgZG9tU3R5bGUgPSAoMCwgX3ByZWZpeFN0eWxlcy5kZWZhdWx0KSgoMCwgX2NyZWF0ZVJlYWN0RE9NU3R5bGUuZGVmYXVsdCkoc3R5bGUpKTtcbiAgdmFyIGRlY2xhcmF0aW9uc1N0cmluZyA9IE9iamVjdC5rZXlzKGRvbVN0eWxlKS5tYXAoZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgdmFyIHZhbHVlID0gZG9tU3R5bGVbcHJvcGVydHldO1xuICAgIHZhciBwcm9wID0gKDAsIF9oeXBoZW5hdGVTdHlsZU5hbWUuZGVmYXVsdCkocHJvcGVydHkpOyAvLyBUaGUgcHJlZml4ZXIgbWF5IHJldHVybiBhbiBhcnJheSBvZiB2YWx1ZXM6XG4gICAgLy8geyBkaXNwbGF5OiBbICctd2Via2l0LWZsZXgnLCAnZmxleCcgXSB9XG4gICAgLy8gdG8gcmVwcmVzZW50IFwiZmFsbGJhY2tcIiBkZWNsYXJhdGlvbnNcbiAgICAvLyB7IGRpc3BsYXk6IC13ZWJraXQtZmxleDsgZGlzcGxheTogZmxleDsgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWUubWFwKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiBwcm9wICsgXCI6XCIgKyB2O1xuICAgICAgfSkuam9pbignOycpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcHJvcCArIFwiOlwiICsgdmFsdWU7XG4gICAgfVxuICB9KSAvLyBPbmNlIHByb3BlcnRpZXMgYXJlIGh5cGhlbmF0ZWQsIHRoaXMgd2lsbCBwdXQgdGhlIHZlbmRvclxuICAvLyBwcmVmaXhlZCBhbmQgc2hvcnQtZm9ybSBwcm9wZXJ0aWVzIGZpcnN0IGluIHRoZSBsaXN0LlxuICAuc29ydCgpLmpvaW4oJzsnKTtcbiAgcmV0dXJuIFwie1wiICsgZGVjbGFyYXRpb25zU3RyaW5nICsgXCI7fVwiO1xufVxuLyoqXG4gKiBBbiBpZGVudGlmaWVyIGlzIGFzc29jaWF0ZWQgd2l0aCBhIHVuaXF1ZSBzZXQgb2Ygc3R5bGVzLlxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlSWRlbnRpZmllcihwcmVmaXgsIG5hbWUsIHZhbHVlKSB7XG4gIHZhciBoYXNoZWRTdHJpbmcgPSAoMCwgX2hhc2guZGVmYXVsdCkobmFtZSArIHN0cmluZ2lmeVZhbHVlV2l0aFByb3BlcnR5KHZhbHVlLCBuYW1lKSk7XG4gIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gcHJlZml4ICsgXCItXCIgKyBuYW1lICsgXCItXCIgKyBoYXNoZWRTdHJpbmcgOiBwcmVmaXggKyBcIi1cIiArIGhhc2hlZFN0cmluZztcbn1cbi8qKlxuICogQ3JlYXRlIGluZGl2aWR1YWwgQ1NTIGtleWZyYW1lcyBydWxlcy5cbiAqL1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZUtleWZyYW1lcyhrZXlmcmFtZXMpIHtcbiAgdmFyIHByZWZpeGVzID0gWyctd2Via2l0LScsICcnXTtcbiAgdmFyIGlkZW50aWZpZXIgPSBjcmVhdGVJZGVudGlmaWVyKCdyJywgJ2FuaW1hdGlvbicsIGtleWZyYW1lcyk7XG4gIHZhciBzdGVwcyA9ICd7JyArIE9iamVjdC5rZXlzKGtleWZyYW1lcykubWFwKGZ1bmN0aW9uIChzdGVwTmFtZSkge1xuICAgIHZhciBydWxlID0ga2V5ZnJhbWVzW3N0ZXBOYW1lXTtcbiAgICB2YXIgYmxvY2sgPSBjcmVhdGVEZWNsYXJhdGlvbkJsb2NrKHJ1bGUpO1xuICAgIHJldHVybiBcIlwiICsgc3RlcE5hbWUgKyBibG9jaztcbiAgfSkuam9pbignJykgKyAnfSc7XG4gIHZhciBydWxlcyA9IHByZWZpeGVzLm1hcChmdW5jdGlvbiAocHJlZml4KSB7XG4gICAgcmV0dXJuIFwiQFwiICsgcHJlZml4ICsgXCJrZXlmcmFtZXMgXCIgKyBpZGVudGlmaWVyICsgc3RlcHM7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgcnVsZXM6IHJ1bGVzXG4gIH07XG59XG4vKipcbiAqIENyZWF0ZSBDU1Mga2V5ZnJhbWVzIHJ1bGVzIGFuZCBuYW1lcyBmcm9tIGEgU3R5bGVTaGVldCBrZXlmcmFtZXMgb2JqZWN0LlxuICovXG5cblxuZnVuY3Rpb24gcHJvY2Vzc0tleWZyYW1lc1ZhbHVlKGtleWZyYW1lc1ZhbHVlKSB7XG4gIGlmICh0eXBlb2Yga2V5ZnJhbWVzVmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDU1Mga2V5ZnJhbWVzIHR5cGU6IFwiICsgdHlwZW9mIGtleWZyYW1lc1ZhbHVlKTtcbiAgfVxuXG4gIHZhciBhbmltYXRpb25OYW1lcyA9IFtdO1xuICB2YXIgcnVsZXMgPSBbXTtcbiAgdmFyIHZhbHVlID0gQXJyYXkuaXNBcnJheShrZXlmcmFtZXNWYWx1ZSkgPyBrZXlmcmFtZXNWYWx1ZSA6IFtrZXlmcmFtZXNWYWx1ZV07XG4gIHZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGtleWZyYW1lcykge1xuICAgIGlmICh0eXBlb2Yga2V5ZnJhbWVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gU3VwcG9ydCBleHRlcm5hbCBhbmltYXRpb24gbGlicmFyaWVzIChpZGVudGlmaWVycyBvbmx5KVxuICAgICAgYW5pbWF0aW9uTmFtZXMucHVzaChrZXlmcmFtZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdGUgcnVsZXMgZm9yIGVhY2ggb2YgdGhlIGtleWZyYW1lc1xuICAgICAgdmFyIF9jcmVhdGVLZXlmcmFtZXMgPSBjcmVhdGVLZXlmcmFtZXMoa2V5ZnJhbWVzKSxcbiAgICAgICAgICBpZGVudGlmaWVyID0gX2NyZWF0ZUtleWZyYW1lcy5pZGVudGlmaWVyLFxuICAgICAgICAgIGtleWZyYW1lc1J1bGVzID0gX2NyZWF0ZUtleWZyYW1lcy5ydWxlcztcblxuICAgICAgYW5pbWF0aW9uTmFtZXMucHVzaChpZGVudGlmaWVyKTtcbiAgICAgIHJ1bGVzLnB1c2guYXBwbHkocnVsZXMsIGtleWZyYW1lc1J1bGVzKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGFuaW1hdGlvbk5hbWVzOiBhbmltYXRpb25OYW1lcyxcbiAgICBydWxlczogcnVsZXNcbiAgfTtcbn0iXX0=