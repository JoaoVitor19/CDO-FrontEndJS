888d1d893fca597d12ab36992c89b889
"use strict";

exports.__esModule = true;
exports.default = renderApplication;
exports.getApplication = getApplication;

var _AppContainer = _interopRequireDefault(require("./AppContainer"));

var _invariant = _interopRequireDefault(require("fbjs/lib/invariant"));

var _render = _interopRequireWildcard(require("../render"));

var _styleResolver = _interopRequireDefault(require("../StyleSheet/styleResolver"));

var _react = _interopRequireDefault(require("react"));

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function renderApplication(RootComponent, WrapperComponent, callback, options) {
  var shouldHydrate = options.hydrate,
      initialProps = options.initialProps,
      rootTag = options.rootTag;
  var renderFn = shouldHydrate ? _render.hydrate : _render.default;
  (0, _invariant.default)(rootTag, 'Expect to have a valid rootTag, instead got ', rootTag);
  renderFn(_react.default.createElement(_AppContainer.default, {
    WrapperComponent: WrapperComponent,
    rootTag: rootTag
  }, _react.default.createElement(RootComponent, initialProps)), rootTag, callback);
}

function getApplication(RootComponent, initialProps, WrapperComponent) {
  var element = _react.default.createElement(_AppContainer.default, {
    WrapperComponent: WrapperComponent,
    rootTag: {}
  }, _react.default.createElement(RootComponent, initialProps));

  var getStyleElement = function getStyleElement(props) {
    var sheet = _styleResolver.default.getStyleSheet();

    return _react.default.createElement("style", _extends({}, props, {
      dangerouslySetInnerHTML: {
        __html: sheet.textContent
      },
      id: sheet.id
    }));
  };

  return {
    element: element,
    getStyleElement: getStyleElement
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlbmRlckFwcGxpY2F0aW9uLmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInJlbmRlckFwcGxpY2F0aW9uIiwiZ2V0QXBwbGljYXRpb24iLCJfQXBwQ29udGFpbmVyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaW52YXJpYW50IiwiX3JlbmRlciIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX3N0eWxlUmVzb2x2ZXIiLCJfcmVhY3QiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJXZWFrTWFwIiwiY2FjaGUiLCJvYmoiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJhcHBseSIsIlJvb3RDb21wb25lbnQiLCJXcmFwcGVyQ29tcG9uZW50IiwiY2FsbGJhY2siLCJvcHRpb25zIiwic2hvdWxkSHlkcmF0ZSIsImh5ZHJhdGUiLCJpbml0aWFsUHJvcHMiLCJyb290VGFnIiwicmVuZGVyRm4iLCJjcmVhdGVFbGVtZW50IiwiZWxlbWVudCIsImdldFN0eWxlRWxlbWVudCIsInByb3BzIiwic2hlZXQiLCJnZXRTdHlsZVNoZWV0IiwiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiLCJfX2h0bWwiLCJ0ZXh0Q29udGVudCIsImlkIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsT0FBTyxDQUFDQyxVQUFSLEdBQXFCLElBQXJCO0FBQ0FELE9BQU8sQ0FBQ0UsT0FBUixHQUFrQkMsaUJBQWxCO0FBQ0FILE9BQU8sQ0FBQ0ksY0FBUixHQUF5QkEsY0FBekI7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TW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZGVmYXVsdCA9IHJlbmRlckFwcGxpY2F0aW9uO1xuZXhwb3J0cy5nZXRBcHBsaWNhdGlvbiA9IGdldEFwcGxpY2F0aW9uO1xuXG52YXIgX0FwcENvbnRhaW5lciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQXBwQ29udGFpbmVyXCIpKTtcblxudmFyIF9pbnZhcmlhbnQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJmYmpzL2xpYi9pbnZhcmlhbnRcIikpO1xuXG52YXIgX3JlbmRlciA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCIuLi9yZW5kZXJcIikpO1xuXG52YXIgX3N0eWxlUmVzb2x2ZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9TdHlsZVNoZWV0L3N0eWxlUmVzb2x2ZXJcIikpO1xuXG52YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpO1xuXG5mdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKSB7IGlmICh0eXBlb2YgV2Vha01hcCAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gbnVsbDsgdmFyIGNhY2hlID0gbmV3IFdlYWtNYXAoKTsgX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlID0gZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCkgeyByZXR1cm4gY2FjaGU7IH07IHJldHVybiBjYWNoZTsgfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygb2JqICE9PSBcImZ1bmN0aW9uXCIpIHsgcmV0dXJuIHsgZGVmYXVsdDogb2JqIH07IH0gdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCk7IGlmIChjYWNoZSAmJiBjYWNoZS5oYXMob2JqKSkgeyByZXR1cm4gY2FjaGUuZ2V0KG9iaik7IH0gdmFyIG5ld09iaiA9IHt9OyB2YXIgaGFzUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsgdmFyIGRlc2MgPSBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IG51bGw7IGlmIChkZXNjICYmIChkZXNjLmdldCB8fCBkZXNjLnNldCkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IGlmIChjYWNoZSkgeyBjYWNoZS5zZXQob2JqLCBuZXdPYmopOyB9IHJldHVybiBuZXdPYmo7IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cblxuZnVuY3Rpb24gcmVuZGVyQXBwbGljYXRpb24oUm9vdENvbXBvbmVudCwgV3JhcHBlckNvbXBvbmVudCwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgdmFyIHNob3VsZEh5ZHJhdGUgPSBvcHRpb25zLmh5ZHJhdGUsXG4gICAgICBpbml0aWFsUHJvcHMgPSBvcHRpb25zLmluaXRpYWxQcm9wcyxcbiAgICAgIHJvb3RUYWcgPSBvcHRpb25zLnJvb3RUYWc7XG4gIHZhciByZW5kZXJGbiA9IHNob3VsZEh5ZHJhdGUgPyBfcmVuZGVyLmh5ZHJhdGUgOiBfcmVuZGVyLmRlZmF1bHQ7XG4gICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKHJvb3RUYWcsICdFeHBlY3QgdG8gaGF2ZSBhIHZhbGlkIHJvb3RUYWcsIGluc3RlYWQgZ290ICcsIHJvb3RUYWcpO1xuICByZW5kZXJGbiggLyojX19QVVJFX18qL19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0FwcENvbnRhaW5lci5kZWZhdWx0LCB7XG4gICAgV3JhcHBlckNvbXBvbmVudDogV3JhcHBlckNvbXBvbmVudCxcbiAgICByb290VGFnOiByb290VGFnXG4gIH0sIC8qI19fUFVSRV9fKi9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFJvb3RDb21wb25lbnQsIGluaXRpYWxQcm9wcykpLCByb290VGFnLCBjYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIGdldEFwcGxpY2F0aW9uKFJvb3RDb21wb25lbnQsIGluaXRpYWxQcm9wcywgV3JhcHBlckNvbXBvbmVudCkge1xuICB2YXIgZWxlbWVudCA9IC8qI19fUFVSRV9fKi9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9BcHBDb250YWluZXIuZGVmYXVsdCwge1xuICAgIFdyYXBwZXJDb21wb25lbnQ6IFdyYXBwZXJDb21wb25lbnQsXG4gICAgcm9vdFRhZzoge31cbiAgfSwgLyojX19QVVJFX18qL19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoUm9vdENvbXBvbmVudCwgaW5pdGlhbFByb3BzKSk7IC8vIERvbid0IGVzY2FwZSBDU1MgdGV4dFxuXG5cbiAgdmFyIGdldFN0eWxlRWxlbWVudCA9IGZ1bmN0aW9uIGdldFN0eWxlRWxlbWVudChwcm9wcykge1xuICAgIHZhciBzaGVldCA9IF9zdHlsZVJlc29sdmVyLmRlZmF1bHQuZ2V0U3R5bGVTaGVldCgpO1xuXG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgICBfX2h0bWw6IHNoZWV0LnRleHRDb250ZW50XG4gICAgICB9LFxuICAgICAgaWQ6IHNoZWV0LmlkXG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZWxlbWVudDogZWxlbWVudCxcbiAgICBnZXRTdHlsZUVsZW1lbnQ6IGdldFN0eWxlRWxlbWVudFxuICB9O1xufSJdfQ==