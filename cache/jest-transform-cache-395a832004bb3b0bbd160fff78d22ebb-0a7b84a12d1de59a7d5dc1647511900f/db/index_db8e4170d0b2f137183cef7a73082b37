b89f193e4076d5305d1a58f1a254fd93
"use strict";

exports.__esModule = true;
exports.default = void 0;

var _invariant = _interopRequireDefault(require("fbjs/lib/invariant"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

var twoArgumentPooler = function twoArgumentPooler(a1, a2) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var instance = Klass.instancePool.pop();
    Klass.call(instance, a1, a2);
    return instance;
  } else {
    return new Klass(a1, a2);
  }
};

var standardReleaser = function standardReleaser(instance) {
  var Klass = this;
  instance.destructor();

  if (Klass.instancePool.length < Klass.poolSize) {
    Klass.instancePool.push(instance);
  }
};

var DEFAULT_POOL_SIZE = 10;
var DEFAULT_POOLER = twoArgumentPooler;

var addPoolingTo = function addPoolingTo(CopyConstructor, pooler) {
  var NewKlass = CopyConstructor;
  NewKlass.instancePool = [];
  NewKlass.getPooled = pooler || DEFAULT_POOLER;

  if (!NewKlass.poolSize) {
    NewKlass.poolSize = DEFAULT_POOL_SIZE;
  }

  NewKlass.release = standardReleaser;
  return NewKlass;
};

var PooledClass = {
  addPoolingTo: addPoolingTo,
  twoArgumentPooler: twoArgumentPooler
};
var _default = PooledClass;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9pbnZhcmlhbnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9iaiIsInR3b0FyZ3VtZW50UG9vbGVyIiwiYTEiLCJhMiIsIktsYXNzIiwiaW5zdGFuY2VQb29sIiwibGVuZ3RoIiwiaW5zdGFuY2UiLCJwb3AiLCJjYWxsIiwic3RhbmRhcmRSZWxlYXNlciIsImRlc3RydWN0b3IiLCJwb29sU2l6ZSIsInB1c2giLCJERUZBVUxUX1BPT0xfU0laRSIsIkRFRkFVTFRfUE9PTEVSIiwiYWRkUG9vbGluZ1RvIiwiQ29weUNvbnN0cnVjdG9yIiwicG9vbGVyIiwiTmV3S2xhc3MiLCJnZXRQb29sZWQiLCJyZWxlYXNlIiwiUG9vbGVkQ2xhc3MiLCJfZGVmYXVsdCIsIm1vZHVsZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUFBLE9BQU8sQ0FBQ0MsVUFBUixHQUFxQixJQUFyQjtBQUNBRCxPQUFPLENBQUNFLE9BQVIsR0FBa0IsS0FBSyxDQUF2Qjs7QUFFQSxJQUFJQyxVQUFVLEdBQUdDLHNCQUFzQixDQUFDQyxPQUFPLENBQUMsb0JBQUQsQ0FBUixDQUF2Qzs7QUFFQSxTQUFTRCxzQkFBVCxDQUFnQ0UsR0FBaEMsRUFBcUM7QUFBRSxTQUFPQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ0wsVUFBWCxHQUF3QkssR0FBeEIsR0FBOEI7QUFBRUosSUFBQUEsT0FBTyxFQUFFSTtBQUFYLEdBQXJDO0FBQXdEOztBQVkvRixJQUFJQyxpQkFBaUIsR0FBRyxTQUFTQSxpQkFBVCxDQUEyQkMsRUFBM0IsRUFBK0JDLEVBQS9CLEVBQW1DO0FBQ3pELE1BQUlDLEtBQUssR0FBRyxJQUFaOztBQUVBLE1BQUlBLEtBQUssQ0FBQ0MsWUFBTixDQUFtQkMsTUFBdkIsRUFBK0I7QUFDN0IsUUFBSUMsUUFBUSxHQUFHSCxLQUFLLENBQUNDLFlBQU4sQ0FBbUJHLEdBQW5CLEVBQWY7QUFDQUosSUFBQUEsS0FBSyxDQUFDSyxJQUFOLENBQVdGLFFBQVgsRUFBcUJMLEVBQXJCLEVBQXlCQyxFQUF6QjtBQUNBLFdBQU9JLFFBQVA7QUFDRCxHQUpELE1BSU87QUFDTCxXQUFPLElBQUlILEtBQUosQ0FBVUYsRUFBVixFQUFjQyxFQUFkLENBQVA7QUFDRDtBQUNGLENBVkQ7O0FBWUEsSUFBSU8sZ0JBQWdCLEdBQUcsU0FBU0EsZ0JBQVQsQ0FBMEJILFFBQTFCLEVBQW9DO0FBQ3pELE1BQUlILEtBQUssR0FBRyxJQUFaO0FBQ0FHLEVBQUFBLFFBQVEsQ0FBQ0ksVUFBVDs7QUFFQSxNQUFJUCxLQUFLLENBQUNDLFlBQU4sQ0FBbUJDLE1BQW5CLEdBQTRCRixLQUFLLENBQUNRLFFBQXRDLEVBQWdEO0FBQzlDUixJQUFBQSxLQUFLLENBQUNDLFlBQU4sQ0FBbUJRLElBQW5CLENBQXdCTixRQUF4QjtBQUNEO0FBQ0YsQ0FQRDs7QUFTQSxJQUFJTyxpQkFBaUIsR0FBRyxFQUF4QjtBQUNBLElBQUlDLGNBQWMsR0FBR2QsaUJBQXJCOztBQVdBLElBQUllLFlBQVksR0FBRyxTQUFTQSxZQUFULENBQXNCQyxlQUF0QixFQUF1Q0MsTUFBdkMsRUFBK0M7QUFHaEUsTUFBSUMsUUFBUSxHQUFHRixlQUFmO0FBQ0FFLEVBQUFBLFFBQVEsQ0FBQ2QsWUFBVCxHQUF3QixFQUF4QjtBQUNBYyxFQUFBQSxRQUFRLENBQUNDLFNBQVQsR0FBcUJGLE1BQU0sSUFBSUgsY0FBL0I7O0FBRUEsTUFBSSxDQUFDSSxRQUFRLENBQUNQLFFBQWQsRUFBd0I7QUFDdEJPLElBQUFBLFFBQVEsQ0FBQ1AsUUFBVCxHQUFvQkUsaUJBQXBCO0FBQ0Q7O0FBRURLLEVBQUFBLFFBQVEsQ0FBQ0UsT0FBVCxHQUFtQlgsZ0JBQW5CO0FBQ0EsU0FBT1MsUUFBUDtBQUNELENBYkQ7O0FBZUEsSUFBSUcsV0FBVyxHQUFHO0FBQ2hCTixFQUFBQSxZQUFZLEVBQUVBLFlBREU7QUFFaEJmLEVBQUFBLGlCQUFpQixFQUFFQTtBQUZILENBQWxCO0FBSUEsSUFBSXNCLFFBQVEsR0FBR0QsV0FBZjtBQUNBNUIsT0FBTyxDQUFDRSxPQUFSLEdBQWtCMkIsUUFBbEI7QUFDQUMsTUFBTSxDQUFDOUIsT0FBUCxHQUFpQkEsT0FBTyxDQUFDRSxPQUF6QiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX2ludmFyaWFudCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImZianMvbGliL2ludmFyaWFudFwiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qIGVzbGludC1kaXNhYmxlICovXG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBGcm9tIFJlYWN0IDE2LjAuMFxuICovXG52YXIgdHdvQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiB0d29Bcmd1bWVudFBvb2xlcihhMSwgYTIpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcblxuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuICAgIHZhciBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcbiAgICBLbGFzcy5jYWxsKGluc3RhbmNlLCBhMSwgYTIpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMik7XG4gIH1cbn07XG5cbnZhciBzdGFuZGFyZFJlbGVhc2VyID0gZnVuY3Rpb24gc3RhbmRhcmRSZWxlYXNlcihpbnN0YW5jZSkge1xuICB2YXIgS2xhc3MgPSB0aGlzO1xuICBpbnN0YW5jZS5kZXN0cnVjdG9yKCk7XG5cbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGggPCBLbGFzcy5wb29sU2l6ZSkge1xuICAgIEtsYXNzLmluc3RhbmNlUG9vbC5wdXNoKGluc3RhbmNlKTtcbiAgfVxufTtcblxudmFyIERFRkFVTFRfUE9PTF9TSVpFID0gMTA7XG52YXIgREVGQVVMVF9QT09MRVIgPSB0d29Bcmd1bWVudFBvb2xlcjtcbi8qKlxuICogQXVnbWVudHMgYENvcHlDb25zdHJ1Y3RvcmAgdG8gYmUgYSBwb29sYWJsZSBjbGFzcywgYXVnbWVudGluZyBvbmx5IHRoZSBjbGFzc1xuICogaXRzZWxmIChzdGF0aWNhbGx5KSBub3QgYWRkaW5nIGFueSBwcm90b3R5cGljYWwgZmllbGRzLiBBbnkgQ29weUNvbnN0cnVjdG9yXG4gKiB5b3UgZ2l2ZSB0aGlzIG1heSBoYXZlIGEgYHBvb2xTaXplYCBwcm9wZXJ0eSwgYW5kIHdpbGwgbG9vayBmb3IgYVxuICogcHJvdG90eXBpY2FsIGBkZXN0cnVjdG9yYCBvbiBpbnN0YW5jZXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gQ29weUNvbnN0cnVjdG9yIENvbnN0cnVjdG9yIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVzZXQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwb29sZXIgQ3VzdG9taXphYmxlIHBvb2xlci5cbiAqL1xuXG52YXIgYWRkUG9vbGluZ1RvID0gZnVuY3Rpb24gYWRkUG9vbGluZ1RvKENvcHlDb25zdHJ1Y3RvciwgcG9vbGVyKSB7XG4gIC8vIENhc3RpbmcgYXMgYW55IHNvIHRoYXQgZmxvdyBpZ25vcmVzIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24gYW5kIHRydXN0c1xuICAvLyBpdCB0byBtYXRjaCB0aGUgdHlwZSB3ZSBkZWNsYXJlZFxuICB2YXIgTmV3S2xhc3MgPSBDb3B5Q29uc3RydWN0b3I7XG4gIE5ld0tsYXNzLmluc3RhbmNlUG9vbCA9IFtdO1xuICBOZXdLbGFzcy5nZXRQb29sZWQgPSBwb29sZXIgfHwgREVGQVVMVF9QT09MRVI7XG5cbiAgaWYgKCFOZXdLbGFzcy5wb29sU2l6ZSkge1xuICAgIE5ld0tsYXNzLnBvb2xTaXplID0gREVGQVVMVF9QT09MX1NJWkU7XG4gIH1cblxuICBOZXdLbGFzcy5yZWxlYXNlID0gc3RhbmRhcmRSZWxlYXNlcjtcbiAgcmV0dXJuIE5ld0tsYXNzO1xufTtcblxudmFyIFBvb2xlZENsYXNzID0ge1xuICBhZGRQb29saW5nVG86IGFkZFBvb2xpbmdUbyxcbiAgdHdvQXJndW1lbnRQb29sZXI6IHR3b0FyZ3VtZW50UG9vbGVyXG59O1xudmFyIF9kZWZhdWx0ID0gUG9vbGVkQ2xhc3M7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdfQ==