5520563622aa1bad2825b2f65ec781c7
"use strict";

exports.__esModule = true;
exports.VirtualizedListContextResetter = VirtualizedListContextResetter;
exports.VirtualizedListContextProvider = VirtualizedListContextProvider;
exports.VirtualizedListCellContextProvider = VirtualizedListCellContextProvider;
exports.VirtualizedListContext = void 0;

var React = _interopRequireWildcard(require("react"));

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

var __DEV__ = process.env.NODE_ENV !== 'production';

var VirtualizedListContext = React.createContext(null);
exports.VirtualizedListContext = VirtualizedListContext;

if (__DEV__) {
  VirtualizedListContext.displayName = 'VirtualizedListContext';
}

function VirtualizedListContextResetter(_ref) {
  var children = _ref.children;
  return React.createElement(VirtualizedListContext.Provider, {
    value: null
  }, children);
}

function VirtualizedListContextProvider(_ref2) {
  var children = _ref2.children,
      value = _ref2.value;
  var context = (0, React.useMemo)(function () {
    return {
      cellKey: null,
      getScrollMetrics: value.getScrollMetrics,
      horizontal: value.horizontal,
      getOutermostParentListRef: value.getOutermostParentListRef,
      getNestedChildState: value.getNestedChildState,
      registerAsNestedChild: value.registerAsNestedChild,
      unregisterAsNestedChild: value.unregisterAsNestedChild,
      debugInfo: {
        cellKey: value.debugInfo.cellKey,
        horizontal: value.debugInfo.horizontal,
        listKey: value.debugInfo.listKey,
        parent: value.debugInfo.parent
      }
    };
  }, [value.getScrollMetrics, value.horizontal, value.getOutermostParentListRef, value.getNestedChildState, value.registerAsNestedChild, value.unregisterAsNestedChild, value.debugInfo.cellKey, value.debugInfo.horizontal, value.debugInfo.listKey, value.debugInfo.parent]);
  return React.createElement(VirtualizedListContext.Provider, {
    value: context
  }, children);
}

function VirtualizedListCellContextProvider(_ref3) {
  var cellKey = _ref3.cellKey,
      children = _ref3.children;
  var context = (0, React.useContext)(VirtualizedListContext);
  return React.createElement(VirtualizedListContext.Provider, {
    value: context == null ? null : _objectSpread(_objectSpread({}, context), {}, {
      cellKey: cellKey
    })
  }, children);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlZpcnR1YWxpemVkTGlzdENvbnRleHQuanMiXSwibmFtZXMiOlsiZXhwb3J0cyIsIl9fZXNNb2R1bGUiLCJWaXJ0dWFsaXplZExpc3RDb250ZXh0UmVzZXR0ZXIiLCJWaXJ0dWFsaXplZExpc3RDb250ZXh0UHJvdmlkZXIiLCJWaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyIiwiVmlydHVhbGl6ZWRMaXN0Q29udGV4dCIsIlJlYWN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiV2Vha01hcCIsImNhY2hlIiwib2JqIiwiZGVmYXVsdCIsImhhcyIsImdldCIsIm5ld09iaiIsImhhc1Byb3BlcnR5RGVzY3JpcHRvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsInNldCIsIm93bktleXMiLCJvYmplY3QiLCJlbnVtZXJhYmxlT25seSIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJzeW1ib2xzIiwiZmlsdGVyIiwic3ltIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidmFsdWUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIl9fREVWX18iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJjcmVhdGVDb250ZXh0IiwiZGlzcGxheU5hbWUiLCJfcmVmIiwiY2hpbGRyZW4iLCJjcmVhdGVFbGVtZW50IiwiUHJvdmlkZXIiLCJfcmVmMiIsImNvbnRleHQiLCJ1c2VNZW1vIiwiY2VsbEtleSIsImdldFNjcm9sbE1ldHJpY3MiLCJob3Jpem9udGFsIiwiZ2V0T3V0ZXJtb3N0UGFyZW50TGlzdFJlZiIsImdldE5lc3RlZENoaWxkU3RhdGUiLCJyZWdpc3RlckFzTmVzdGVkQ2hpbGQiLCJ1bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCIsImRlYnVnSW5mbyIsImxpc3RLZXkiLCJwYXJlbnQiLCJfcmVmMyIsInVzZUNvbnRleHQiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxPQUFPLENBQUNDLFVBQVIsR0FBcUIsSUFBckI7QUFDQUQsT0FBTyxDQUFDRSw4QkFBUixHQUF5Q0EsOEJBQXpDO0FBQ0FGLE9BQU8sQ0FBQ0csOEJBQVIsR0FBeUNBLDhCQUF6QztBQUNBSCxPQUFPLENBQUNJLGtDQUFSLEdBQTZDQSxrQ0FBN0M7QUFDQUosT0FBTyxDQUFDSyxzQkFBUixHQUFpQyxLQUFLLENBQXRDOztBQUVBLElBQUlDLEtBQUssR0FBR0MsdUJBQXVCLENBQUNDLE9BQU8sQ0FBQyxPQUFELENBQVIsQ0FBbkM7O0FBRUEsU0FBU0Msd0JBQVQsR0FBb0M7QUFBRSxNQUFJLE9BQU9DLE9BQVAsS0FBbUIsVUFBdkIsRUFBbUMsT0FBTyxJQUFQO0FBQWEsTUFBSUMsS0FBSyxHQUFHLElBQUlELE9BQUosRUFBWjs7QUFBMkJELEVBQUFBLHdCQUF3QixHQUFHLFNBQVNBLHdCQUFULEdBQW9DO0FBQUUsV0FBT0UsS0FBUDtBQUFlLEdBQWhGOztBQUFrRixTQUFPQSxLQUFQO0FBQWU7O0FBRWxOLFNBQVNKLHVCQUFULENBQWlDSyxHQUFqQyxFQUFzQztBQUFFLE1BQUlBLEdBQUcsSUFBSUEsR0FBRyxDQUFDWCxVQUFmLEVBQTJCO0FBQUUsV0FBT1csR0FBUDtBQUFhOztBQUFDLE1BQUlBLEdBQUcsS0FBSyxJQUFSLElBQWdCLE9BQU9BLEdBQVAsS0FBZSxRQUFmLElBQTJCLE9BQU9BLEdBQVAsS0FBZSxVQUE5RCxFQUEwRTtBQUFFLFdBQU87QUFBRUMsTUFBQUEsT0FBTyxFQUFFRDtBQUFYLEtBQVA7QUFB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QUwsQ0FBZCxFQUE2QixFQUE3QixFQUFpQztBQUM1RUUsTUFBQUEsT0FBTyxFQUFFQTtBQURtRSxLQUFqQztBQUQwQixHQUFyRCxFQUlqQk4sUUFKaUIsQ0FBcEI7QUFLRCIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5WaXJ0dWFsaXplZExpc3RDb250ZXh0UmVzZXR0ZXIgPSBWaXJ0dWFsaXplZExpc3RDb250ZXh0UmVzZXR0ZXI7XG5leHBvcnRzLlZpcnR1YWxpemVkTGlzdENvbnRleHRQcm92aWRlciA9IFZpcnR1YWxpemVkTGlzdENvbnRleHRQcm92aWRlcjtcbmV4cG9ydHMuVmlydHVhbGl6ZWRMaXN0Q2VsbENvbnRleHRQcm92aWRlciA9IFZpcnR1YWxpemVkTGlzdENlbGxDb250ZXh0UHJvdmlkZXI7XG5leHBvcnRzLlZpcnR1YWxpemVkTGlzdENvbnRleHQgPSB2b2lkIDA7XG5cbnZhciBSZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG5cbmZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsOyB2YXIgY2FjaGUgPSBuZXcgV2Vha01hcCgpOyBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUgPSBmdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKSB7IHJldHVybiBjYWNoZTsgfTsgcmV0dXJuIGNhY2hlOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmogIT09IFwiZnVuY3Rpb25cIikgeyByZXR1cm4geyBkZWZhdWx0OiBvYmogfTsgfSB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgaWYgKGNhY2hlKSB7IGNhY2hlLnNldChvYmosIG5ld09iaik7IH0gcmV0dXJuIG5ld09iajsgfVxuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIF9fREVWX18gPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nO1xuXG52YXIgVmlydHVhbGl6ZWRMaXN0Q29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xuZXhwb3J0cy5WaXJ0dWFsaXplZExpc3RDb250ZXh0ID0gVmlydHVhbGl6ZWRMaXN0Q29udGV4dDtcblxuaWYgKF9fREVWX18pIHtcbiAgVmlydHVhbGl6ZWRMaXN0Q29udGV4dC5kaXNwbGF5TmFtZSA9ICdWaXJ0dWFsaXplZExpc3RDb250ZXh0Jztcbn1cbi8qKlxuICogUmVzZXRzIHRoZSBjb250ZXh0LiBJbnRlbmRlZCBmb3IgdXNlIGJ5IHBvcnRhbC1saWtlIGNvbXBvbmVudHMgKGUuZy4gTW9kYWwpLlxuICovXG5cblxuZnVuY3Rpb24gVmlydHVhbGl6ZWRMaXN0Q29udGV4dFJlc2V0dGVyKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFZpcnR1YWxpemVkTGlzdENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogbnVsbFxuICB9LCBjaGlsZHJlbik7XG59XG4vKipcbiAqIFNldHMgdGhlIGNvbnRleHQgd2l0aCBtZW1vaXphdGlvbi4gSW50ZW5kZWQgdG8gYmUgdXNlZCBieSBgVmlydHVhbGl6ZWRMaXN0YC5cbiAqL1xuXG5cbmZ1bmN0aW9uIFZpcnR1YWxpemVkTGlzdENvbnRleHRQcm92aWRlcihfcmVmMikge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmMi5jaGlsZHJlbixcbiAgICAgIHZhbHVlID0gX3JlZjIudmFsdWU7XG4gIC8vIEF2b2lkIHNldHRpbmcgYSBuZXdseSBjcmVhdGVkIGNvbnRleHQgb2JqZWN0IGlmIHRoZSB2YWx1ZXMgYXJlIGlkZW50aWNhbC5cbiAgdmFyIGNvbnRleHQgPSAoMCwgUmVhY3QudXNlTWVtbykoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjZWxsS2V5OiBudWxsLFxuICAgICAgZ2V0U2Nyb2xsTWV0cmljczogdmFsdWUuZ2V0U2Nyb2xsTWV0cmljcyxcbiAgICAgIGhvcml6b250YWw6IHZhbHVlLmhvcml6b250YWwsXG4gICAgICBnZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmOiB2YWx1ZS5nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmLFxuICAgICAgZ2V0TmVzdGVkQ2hpbGRTdGF0ZTogdmFsdWUuZ2V0TmVzdGVkQ2hpbGRTdGF0ZSxcbiAgICAgIHJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogdmFsdWUucmVnaXN0ZXJBc05lc3RlZENoaWxkLFxuICAgICAgdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IHZhbHVlLnVucmVnaXN0ZXJBc05lc3RlZENoaWxkLFxuICAgICAgZGVidWdJbmZvOiB7XG4gICAgICAgIGNlbGxLZXk6IHZhbHVlLmRlYnVnSW5mby5jZWxsS2V5LFxuICAgICAgICBob3Jpem9udGFsOiB2YWx1ZS5kZWJ1Z0luZm8uaG9yaXpvbnRhbCxcbiAgICAgICAgbGlzdEtleTogdmFsdWUuZGVidWdJbmZvLmxpc3RLZXksXG4gICAgICAgIHBhcmVudDogdmFsdWUuZGVidWdJbmZvLnBhcmVudFxuICAgICAgfVxuICAgIH07XG4gIH0sIFt2YWx1ZS5nZXRTY3JvbGxNZXRyaWNzLCB2YWx1ZS5ob3Jpem9udGFsLCB2YWx1ZS5nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmLCB2YWx1ZS5nZXROZXN0ZWRDaGlsZFN0YXRlLCB2YWx1ZS5yZWdpc3RlckFzTmVzdGVkQ2hpbGQsIHZhbHVlLnVucmVnaXN0ZXJBc05lc3RlZENoaWxkLCB2YWx1ZS5kZWJ1Z0luZm8uY2VsbEtleSwgdmFsdWUuZGVidWdJbmZvLmhvcml6b250YWwsIHZhbHVlLmRlYnVnSW5mby5saXN0S2V5LCB2YWx1ZS5kZWJ1Z0luZm8ucGFyZW50XSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChWaXJ0dWFsaXplZExpc3RDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IGNvbnRleHRcbiAgfSwgY2hpbGRyZW4pO1xufVxuLyoqXG4gKiBTZXRzIHRoZSBgY2VsbEtleWAuIEludGVuZGVkIHRvIGJlIHVzZWQgYnkgYFZpcnR1YWxpemVkTGlzdGAgZm9yIGVhY2ggY2VsbC5cbiAqL1xuXG5cbmZ1bmN0aW9uIFZpcnR1YWxpemVkTGlzdENlbGxDb250ZXh0UHJvdmlkZXIoX3JlZjMpIHtcbiAgdmFyIGNlbGxLZXkgPSBfcmVmMy5jZWxsS2V5LFxuICAgICAgY2hpbGRyZW4gPSBfcmVmMy5jaGlsZHJlbjtcbiAgdmFyIGNvbnRleHQgPSAoMCwgUmVhY3QudXNlQ29udGV4dCkoVmlydHVhbGl6ZWRMaXN0Q29udGV4dCk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChWaXJ0dWFsaXplZExpc3RDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IGNvbnRleHQgPT0gbnVsbCA/IG51bGwgOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNvbnRleHQpLCB7fSwge1xuICAgICAgY2VsbEtleTogY2VsbEtleVxuICAgIH0pXG4gIH0sIGNoaWxkcmVuKTtcbn0iXX0=