f905918cb54676def6962d5546f85329
"use strict";

exports.__esModule = true;
exports.default = void 0;

var _normalizeValueWithProperty = _interopRequireDefault(require("./normalizeValueWithProperty"));

var _resolveShadowValue = _interopRequireDefault(require("./resolveShadowValue"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

var defaultOffset = {
  height: 0,
  width: 0
};

function boxShadowReducer(resolvedStyle, style) {
  var boxShadow = style.boxShadow;
  var shadow = (0, _resolveShadowValue.default)(style);

  if (shadow != null) {
    resolvedStyle.boxShadow = boxShadow ? boxShadow + ", " + shadow : shadow;
  }
}

function textShadowReducer(resolvedStyle, style) {
  var textShadowColor = style.textShadowColor,
      textShadowOffset = style.textShadowOffset,
      textShadowRadius = style.textShadowRadius;

  var _ref = textShadowOffset || defaultOffset,
      height = _ref.height,
      width = _ref.width;

  var radius = textShadowRadius || 0;
  var offsetX = (0, _normalizeValueWithProperty.default)(width);
  var offsetY = (0, _normalizeValueWithProperty.default)(height);
  var blurRadius = (0, _normalizeValueWithProperty.default)(radius);
  var color = (0, _normalizeValueWithProperty.default)(textShadowColor, 'textShadowColor');

  if (color && (height !== 0 || width !== 0 || radius !== 0) && offsetX != null && offsetY != null && blurRadius != null) {
    resolvedStyle.textShadow = offsetX + " " + offsetY + " " + blurRadius + " " + color;
  }
}

var createCompileableStyle = function createCompileableStyle(styles) {
  var shadowColor = styles.shadowColor,
      shadowOffset = styles.shadowOffset,
      shadowOpacity = styles.shadowOpacity,
      shadowRadius = styles.shadowRadius,
      textShadowColor = styles.textShadowColor,
      textShadowOffset = styles.textShadowOffset,
      textShadowRadius = styles.textShadowRadius,
      nextStyles = _objectWithoutPropertiesLoose(styles, ["shadowColor", "shadowOffset", "shadowOpacity", "shadowRadius", "textShadowColor", "textShadowOffset", "textShadowRadius"]);

  if (shadowColor != null || shadowOffset != null || shadowOpacity != null || shadowRadius != null) {
    boxShadowReducer(nextStyles, styles);
  }

  if (textShadowColor != null || textShadowOffset != null || textShadowRadius != null) {
    textShadowReducer(nextStyles, styles);
  }

  return nextStyles;
};

var _default = createCompileableStyle;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZUNvbXBpbGVhYmxlU3R5bGUuanMiXSwibmFtZXMiOlsiZXhwb3J0cyIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX25vcm1hbGl6ZVZhbHVlV2l0aFByb3BlcnR5IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfcmVzb2x2ZVNoYWRvd1ZhbHVlIiwib2JqIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCJzb3VyY2UiLCJleGNsdWRlZCIsInRhcmdldCIsInNvdXJjZUtleXMiLCJPYmplY3QiLCJrZXlzIiwia2V5IiwiaSIsImxlbmd0aCIsImluZGV4T2YiLCJkZWZhdWx0T2Zmc2V0IiwiaGVpZ2h0Iiwid2lkdGgiLCJib3hTaGFkb3dSZWR1Y2VyIiwicmVzb2x2ZWRTdHlsZSIsInN0eWxlIiwiYm94U2hhZG93Iiwic2hhZG93IiwidGV4dFNoYWRvd1JlZHVjZXIiLCJ0ZXh0U2hhZG93Q29sb3IiLCJ0ZXh0U2hhZG93T2Zmc2V0IiwidGV4dFNoYWRvd1JhZGl1cyIsIl9yZWYiLCJyYWRpdXMiLCJvZmZzZXRYIiwib2Zmc2V0WSIsImJsdXJSYWRpdXMiLCJjb2xvciIsInRleHRTaGFkb3ciLCJjcmVhdGVDb21waWxlYWJsZVN0eWxlIiwic3R5bGVzIiwic2hhZG93Q29sb3IiLCJzaGFkb3dPZmZzZXQiLCJzaGFkb3dPcGFjaXR5Iiwic2hhZG93UmFkaXVzIiwibmV4dFN0eWxlcyIsIl9kZWZhdWx0IiwibW9kdWxlIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsT0FBTyxDQUFDQyxVQUFSLEdBQXFCLElBQXJCO0FBQ0FELE9BQU8sQ0FBQ0UsT0FBUixHQUFrQixLQUFLLENBQXZCOztBQUVBLElBQUlDLDJCQUEyQixHQUFHQyxzQkFBc0IsQ0FBQ0MsT0FBTyxnQ0FBUixDQUF4RDs7QUFFQSxJQUFJQyxtQkFBbUIsR0FBR0Ysc0JBQXNCLENBQUNDLE9BQU8sd0JBQVIsQ0FBaEQ7O0FBRUEsU0FBU0Qsc0JBQVQsQ0FB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QSxJQUFJQyxRQUFRLEdBQUdQLHNCQUFmO0FBQ0F0QyxPQUFPLENBQUNFLE9BQVIsR0FBa0IyQyxRQUFsQjtBQUNBQyxNQUFNLENBQUM5QyxPQUFQLEdBQWlCQSxPQUFPLENBQUNFLE9BQXpCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfbm9ybWFsaXplVmFsdWVXaXRoUHJvcGVydHkgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL25vcm1hbGl6ZVZhbHVlV2l0aFByb3BlcnR5XCIpKTtcblxudmFyIF9yZXNvbHZlU2hhZG93VmFsdWUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3Jlc29sdmVTaGFkb3dWYWx1ZVwiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSB7fTsgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOyB2YXIga2V5LCBpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxudmFyIGRlZmF1bHRPZmZzZXQgPSB7XG4gIGhlaWdodDogMCxcbiAgd2lkdGg6IDBcbn07XG5cbmZ1bmN0aW9uIGJveFNoYWRvd1JlZHVjZXIocmVzb2x2ZWRTdHlsZSwgc3R5bGUpIHtcbiAgdmFyIGJveFNoYWRvdyA9IHN0eWxlLmJveFNoYWRvdztcbiAgdmFyIHNoYWRvdyA9ICgwLCBfcmVzb2x2ZVNoYWRvd1ZhbHVlLmRlZmF1bHQpKHN0eWxlKTtcblxuICBpZiAoc2hhZG93ICE9IG51bGwpIHtcbiAgICByZXNvbHZlZFN0eWxlLmJveFNoYWRvdyA9IGJveFNoYWRvdyA/IGJveFNoYWRvdyArIFwiLCBcIiArIHNoYWRvdyA6IHNoYWRvdztcbiAgfVxufVxuXG5mdW5jdGlvbiB0ZXh0U2hhZG93UmVkdWNlcihyZXNvbHZlZFN0eWxlLCBzdHlsZSkge1xuICB2YXIgdGV4dFNoYWRvd0NvbG9yID0gc3R5bGUudGV4dFNoYWRvd0NvbG9yLFxuICAgICAgdGV4dFNoYWRvd09mZnNldCA9IHN0eWxlLnRleHRTaGFkb3dPZmZzZXQsXG4gICAgICB0ZXh0U2hhZG93UmFkaXVzID0gc3R5bGUudGV4dFNoYWRvd1JhZGl1cztcblxuICB2YXIgX3JlZiA9IHRleHRTaGFkb3dPZmZzZXQgfHwgZGVmYXVsdE9mZnNldCxcbiAgICAgIGhlaWdodCA9IF9yZWYuaGVpZ2h0LFxuICAgICAgd2lkdGggPSBfcmVmLndpZHRoO1xuXG4gIHZhciByYWRpdXMgPSB0ZXh0U2hhZG93UmFkaXVzIHx8IDA7XG4gIHZhciBvZmZzZXRYID0gKDAsIF9ub3JtYWxpemVWYWx1ZVdpdGhQcm9wZXJ0eS5kZWZhdWx0KSh3aWR0aCk7XG4gIHZhciBvZmZzZXRZID0gKDAsIF9ub3JtYWxpemVWYWx1ZVdpdGhQcm9wZXJ0eS5kZWZhdWx0KShoZWlnaHQpO1xuICB2YXIgYmx1clJhZGl1cyA9ICgwLCBfbm9ybWFsaXplVmFsdWVXaXRoUHJvcGVydHkuZGVmYXVsdCkocmFkaXVzKTtcbiAgdmFyIGNvbG9yID0gKDAsIF9ub3JtYWxpemVWYWx1ZVdpdGhQcm9wZXJ0eS5kZWZhdWx0KSh0ZXh0U2hhZG93Q29sb3IsICd0ZXh0U2hhZG93Q29sb3InKTtcblxuICBpZiAoY29sb3IgJiYgKGhlaWdodCAhPT0gMCB8fCB3aWR0aCAhPT0gMCB8fCByYWRpdXMgIT09IDApICYmIG9mZnNldFggIT0gbnVsbCAmJiBvZmZzZXRZICE9IG51bGwgJiYgYmx1clJhZGl1cyAhPSBudWxsKSB7XG4gICAgcmVzb2x2ZWRTdHlsZS50ZXh0U2hhZG93ID0gb2Zmc2V0WCArIFwiIFwiICsgb2Zmc2V0WSArIFwiIFwiICsgYmx1clJhZGl1cyArIFwiIFwiICsgY29sb3I7XG4gIH1cbn1cblxudmFyIGNyZWF0ZUNvbXBpbGVhYmxlU3R5bGUgPSBmdW5jdGlvbiBjcmVhdGVDb21waWxlYWJsZVN0eWxlKHN0eWxlcykge1xuICB2YXIgc2hhZG93Q29sb3IgPSBzdHlsZXMuc2hhZG93Q29sb3IsXG4gICAgICBzaGFkb3dPZmZzZXQgPSBzdHlsZXMuc2hhZG93T2Zmc2V0LFxuICAgICAgc2hhZG93T3BhY2l0eSA9IHN0eWxlcy5zaGFkb3dPcGFjaXR5LFxuICAgICAgc2hhZG93UmFkaXVzID0gc3R5bGVzLnNoYWRvd1JhZGl1cyxcbiAgICAgIHRleHRTaGFkb3dDb2xvciA9IHN0eWxlcy50ZXh0U2hhZG93Q29sb3IsXG4gICAgICB0ZXh0U2hhZG93T2Zmc2V0ID0gc3R5bGVzLnRleHRTaGFkb3dPZmZzZXQsXG4gICAgICB0ZXh0U2hhZG93UmFkaXVzID0gc3R5bGVzLnRleHRTaGFkb3dSYWRpdXMsXG4gICAgICBuZXh0U3R5bGVzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc3R5bGVzLCBbXCJzaGFkb3dDb2xvclwiLCBcInNoYWRvd09mZnNldFwiLCBcInNoYWRvd09wYWNpdHlcIiwgXCJzaGFkb3dSYWRpdXNcIiwgXCJ0ZXh0U2hhZG93Q29sb3JcIiwgXCJ0ZXh0U2hhZG93T2Zmc2V0XCIsIFwidGV4dFNoYWRvd1JhZGl1c1wiXSk7XG5cbiAgaWYgKHNoYWRvd0NvbG9yICE9IG51bGwgfHwgc2hhZG93T2Zmc2V0ICE9IG51bGwgfHwgc2hhZG93T3BhY2l0eSAhPSBudWxsIHx8IHNoYWRvd1JhZGl1cyAhPSBudWxsKSB7XG4gICAgYm94U2hhZG93UmVkdWNlcihuZXh0U3R5bGVzLCBzdHlsZXMpO1xuICB9XG5cbiAgaWYgKHRleHRTaGFkb3dDb2xvciAhPSBudWxsIHx8IHRleHRTaGFkb3dPZmZzZXQgIT0gbnVsbCB8fCB0ZXh0U2hhZG93UmFkaXVzICE9IG51bGwpIHtcbiAgICB0ZXh0U2hhZG93UmVkdWNlcihuZXh0U3R5bGVzLCBzdHlsZXMpO1xuICB9XG5cbiAgcmV0dXJuIG5leHRTdHlsZXM7XG59O1xuXG52YXIgX2RlZmF1bHQgPSBjcmVhdGVDb21waWxlYWJsZVN0eWxlO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDsiXX0=