064446399421a199f93f9b21f3cb9023
"use strict";

exports.__esModule = true;
exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _View = _interopRequireDefault(require("../View"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;

  _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var KeyboardAvoidingView = function (_React$Component) {
  _inheritsLoose(KeyboardAvoidingView, _React$Component);

  function KeyboardAvoidingView() {
    var _this;

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;
    _this.frame = null;

    _this.onLayout = function (event) {
      _this.frame = event.nativeEvent.layout;
    };

    return _this;
  }

  var _proto = KeyboardAvoidingView.prototype;

  _proto.relativeKeyboardHeight = function relativeKeyboardHeight(keyboardFrame) {
    var frame = this.frame;

    if (!frame || !keyboardFrame) {
      return 0;
    }

    var keyboardY = keyboardFrame.screenY - (this.props.keyboardVerticalOffset || 0);
    return Math.max(frame.y + frame.height - keyboardY, 0);
  };

  _proto.onKeyboardChange = function onKeyboardChange(event) {};

  _proto.render = function render() {
    var _this$props = this.props,
        behavior = _this$props.behavior,
        contentContainerStyle = _this$props.contentContainerStyle,
        keyboardVerticalOffset = _this$props.keyboardVerticalOffset,
        rest = _objectWithoutPropertiesLoose(_this$props, ["behavior", "contentContainerStyle", "keyboardVerticalOffset"]);

    return React.createElement(_View.default, _extends({
      onLayout: this.onLayout
    }, rest));
  };

  return KeyboardAvoidingView;
}(React.Component);

var _default = KeyboardAvoidingView;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIlJlYWN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiX1ZpZXciLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiV2Vha01hcCIsImNhY2hlIiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwiYXBwbHkiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSIsImV4Y2x1ZGVkIiwic291cmNlS2V5cyIsImtleXMiLCJpbmRleE9mIiwiX2luaGVyaXRzTG9vc2UiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIl9zZXRQcm90b3R5cGVPZiIsIm8iLCJwIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJLZXlib2FyZEF2b2lkaW5nVmlldyIsIl9SZWFjdCRDb21wb25lbnQiLCJfdGhpcyIsIl9sZW4iLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiY29uY2F0IiwiZnJhbWUiLCJvbkxheW91dCIsImV2ZW50IiwibmF0aXZlRXZlbnQiLCJsYXlvdXQiLCJfcHJvdG8iLCJyZWxhdGl2ZUtleWJvYXJkSGVpZ2h0Iiwia2V5Ym9hcmRGcmFtZSIsImtleWJvYXJkWSIsInNjcmVlblkiLCJwcm9wcyIsImtleWJvYXJkVmVydGljYWxPZmZzZXQiLCJNYXRoIiwibWF4IiwieSIsImhlaWdodCIsIm9uS2V5Ym9hcmRDaGFuZ2UiLCJyZW5kZXIiLCJfdGhpcyRwcm9wcyIsImJlaGF2aW9yIiwiY29udGVudENvbnRhaW5lclN0eWxlIiwicmVzdCIsImNyZWF0ZUVsZW1lbnQiLCJDb21wb25lbnQiLCJfZGVmYXVsdCIsIm1vZHVsZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUFBLE9BQU8sQ0FBQ0MsVUFBUixHQUFxQixJQUFyQjtBQUNBRCxPQUFPLENBQUNFLE9BQVIsR0FBa0IsS0FBSyxDQUF2Qjs7QUFFQSxJQUFJQyxLQUFLLEdBQUdDLHVCQUF1QixDQUFDQyxPQUFPLENBQUMsT0FBRCxDQUFSLENBQW5DOztBQUVBLElBQUlDLEtBQUssR0FBR0Msc0JBQXNCLENBQUNGLE9BQU8sV0FBUixDQUFsQzs7QUFFQSxTQUFTRSxzQkFBVCxDQUFnQ0MsR0FBaEMsRUFBcUM7QUFBRSxTQUFPQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ1AsVUFBWCxHQUF3Qk8sR0FBeEIsR0FBOEI7QUFBRU4sSUFBQUEsT0FBTyxFQUFFTTtBQUFYLEdBQXJDO0FBQXdEOztBQUUvRixTQUFTQyx3QkFBVCxHQUFvQztBQUFFLE1BQUksT0FBT0MsT0FBUCxLQUFtQixVQUF2QixFQUFtQyxPQUFPLElBQVA7QUFBYSxNQUFJQyxLQUFLLEdBQUcsSUFBSUQsT0FBSixFQUFaOztBQUEyQkQsRUFBQUEsd0JBQXdCLEdBQUcsU0FBU0Esd0JBQVQsR0FBb0M7QUFBRSxXQUFPRSxLQUFQO0FBQWUsR0FBaEY7O0FBQWtGLFNBQU9BLEtBQVA7QUFBZTs7QUFFbE4sU0FBU1AsdUJBQVQsQ0FBaUNJLEdBQWpDLEVBQXNDO0FBQUUsTUFBSUEsR0FBRyxJQUFJQSxHQUFHLENBQUNQLFVBQWYsRUFBMkI7QUFBRSxXQUFPTyxHQUFQO0FBQWE7O0FBQUMsTUFBSUEsR0FBRyxLQUFLLElBQVIsSUFBZ0IsT0FBT0EsR0FBUCxLQUFlLFFBQWYsSUFBMkIsT0FBT0EsR0FBUCxLQUFlLFVBQTlELEVBQTBFO0FBQUUsV0FBTztBQUFFTixNQUFBQSxPQUFPLEVBQUVNO0FBQVgsS0FB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LEdBQUcsS0FBS1IsS0FBdkI7QUFBQSxRQUNJUyxRQUFRLEdBQUdELFdBQVcsQ0FBQ0MsUUFEM0I7QUFBQSxRQUVJQyxxQkFBcUIsR0FBR0YsV0FBVyxDQUFDRSxxQkFGeEM7QUFBQSxRQUdJVCxzQkFBc0IsR0FBR08sV0FBVyxDQUFDUCxzQkFIekM7QUFBQSxRQUlJVSxJQUFJLEdBQUc1Qyw2QkFBNkIsQ0FBQ3lDLFdBQUQsRUFBYyxDQUFDLFVBQUQsRUFBYSx1QkFBYixFQUFzQyx3QkFBdEMsQ0FBZCxDQUp4Qzs7QUFNQSxXQUFvQnZFLEtBQUssQ0FBQzJFLGFBQU4sQ0FBb0J4RSxLQUFLLENBQUNKLE9BQTFCLEVBQW1DdUIsUUFBUSxDQUFDO0FBQzlEZ0MsTUFBQUEsUUFBUSxFQUFFLEtBQUtBO0FBRCtDLEtBQUQsRUFFNURvQixJQUY0RCxDQUEzQyxDQUFwQjtBQUdELEdBVkQ7O0FBWUEsU0FBTzdCLG9CQUFQO0FBQ0QsQ0FoRHVDLENBZ0R0QzdDLEtBQUssQ0FBQzRFLFNBaERnQyxDQUF4Qzs7QUFrREEsSUFBSUMsUUFBUSxHQUFHaEMsb0JBQWY7QUFDQWhELE9BQU8sQ0FBQ0UsT0FBUixHQUFrQjhFLFFBQWxCO0FBQ0FDLE1BQU0sQ0FBQ2pGLE9BQVAsR0FBaUJBLE9BQU8sQ0FBQ0UsT0FBekIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIFJlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcInJlYWN0XCIpKTtcblxudmFyIF9WaWV3ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vVmlld1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsOyB2YXIgY2FjaGUgPSBuZXcgV2Vha01hcCgpOyBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUgPSBmdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKSB7IHJldHVybiBjYWNoZTsgfTsgcmV0dXJuIGNhY2hlOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmogIT09IFwiZnVuY3Rpb25cIikgeyByZXR1cm4geyBkZWZhdWx0OiBvYmogfTsgfSB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgaWYgKGNhY2hlKSB7IGNhY2hlLnNldChvYmosIG5ld09iaik7IH0gcmV0dXJuIG5ld09iajsgfVxuXG5mdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG52YXIgS2V5Ym9hcmRBdm9pZGluZ1ZpZXcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoS2V5Ym9hcmRBdm9pZGluZ1ZpZXcsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEtleWJvYXJkQXZvaWRpbmdWaWV3KCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBfdGhpcyA9IF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSB8fCB0aGlzO1xuICAgIF90aGlzLmZyYW1lID0gbnVsbDtcblxuICAgIF90aGlzLm9uTGF5b3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5mcmFtZSA9IGV2ZW50Lm5hdGl2ZUV2ZW50LmxheW91dDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEtleWJvYXJkQXZvaWRpbmdWaWV3LnByb3RvdHlwZTtcblxuICBfcHJvdG8ucmVsYXRpdmVLZXlib2FyZEhlaWdodCA9IGZ1bmN0aW9uIHJlbGF0aXZlS2V5Ym9hcmRIZWlnaHQoa2V5Ym9hcmRGcmFtZSkge1xuICAgIHZhciBmcmFtZSA9IHRoaXMuZnJhbWU7XG5cbiAgICBpZiAoIWZyYW1lIHx8ICFrZXlib2FyZEZyYW1lKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICB2YXIga2V5Ym9hcmRZID0ga2V5Ym9hcmRGcmFtZS5zY3JlZW5ZIC0gKHRoaXMucHJvcHMua2V5Ym9hcmRWZXJ0aWNhbE9mZnNldCB8fCAwKTtcbiAgICByZXR1cm4gTWF0aC5tYXgoZnJhbWUueSArIGZyYW1lLmhlaWdodCAtIGtleWJvYXJkWSwgMCk7XG4gIH07XG5cbiAgX3Byb3RvLm9uS2V5Ym9hcmRDaGFuZ2UgPSBmdW5jdGlvbiBvbktleWJvYXJkQ2hhbmdlKGV2ZW50KSB7fTtcblxuICBfcHJvdG8ucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIGJlaGF2aW9yID0gX3RoaXMkcHJvcHMuYmVoYXZpb3IsXG4gICAgICAgIGNvbnRlbnRDb250YWluZXJTdHlsZSA9IF90aGlzJHByb3BzLmNvbnRlbnRDb250YWluZXJTdHlsZSxcbiAgICAgICAga2V5Ym9hcmRWZXJ0aWNhbE9mZnNldCA9IF90aGlzJHByb3BzLmtleWJvYXJkVmVydGljYWxPZmZzZXQsXG4gICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfdGhpcyRwcm9wcywgW1wiYmVoYXZpb3JcIiwgXCJjb250ZW50Q29udGFpbmVyU3R5bGVcIiwgXCJrZXlib2FyZFZlcnRpY2FsT2Zmc2V0XCJdKTtcblxuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChfVmlldy5kZWZhdWx0LCBfZXh0ZW5kcyh7XG4gICAgICBvbkxheW91dDogdGhpcy5vbkxheW91dFxuICAgIH0sIHJlc3QpKTtcbiAgfTtcblxuICByZXR1cm4gS2V5Ym9hcmRBdm9pZGluZ1ZpZXc7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBfZGVmYXVsdCA9IEtleWJvYXJkQXZvaWRpbmdWaWV3O1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDsiXX0=