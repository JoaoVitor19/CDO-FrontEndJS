b327be9280be6caeac21ab68ec720d58
'use strict';

exports.__esModule = true;
exports.default = void 0;

var _AnimatedNode = _interopRequireDefault(require("./AnimatedNode"));

var _AnimatedWithChildren2 = _interopRequireDefault(require("./AnimatedWithChildren"));

var _NativeAnimatedHelper = _interopRequireDefault(require("../NativeAnimatedHelper"));

var _invariant = _interopRequireDefault(require("fbjs/lib/invariant"));

var _normalizeCssColor = _interopRequireDefault(require("normalize-css-color"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;

  _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

var __DEV__ = process.env.NODE_ENV !== 'production';

var linear = function linear(t) {
  return t;
};

function createInterpolation(config) {
  if (config.outputRange && typeof config.outputRange[0] === 'string') {
    return createInterpolationFromStringOutputRange(config);
  }

  var outputRange = config.outputRange;
  checkInfiniteRange('outputRange', outputRange);
  var inputRange = config.inputRange;
  checkInfiniteRange('inputRange', inputRange);
  checkValidInputRange(inputRange);
  (0, _invariant.default)(inputRange.length === outputRange.length, 'inputRange (' + inputRange.length + ') and outputRange (' + outputRange.length + ') must have the same length');
  var easing = config.easing || linear;
  var extrapolateLeft = 'extend';

  if (config.extrapolateLeft !== undefined) {
    extrapolateLeft = config.extrapolateLeft;
  } else if (config.extrapolate !== undefined) {
    extrapolateLeft = config.extrapolate;
  }

  var extrapolateRight = 'extend';

  if (config.extrapolateRight !== undefined) {
    extrapolateRight = config.extrapolateRight;
  } else if (config.extrapolate !== undefined) {
    extrapolateRight = config.extrapolate;
  }

  return function (input) {
    (0, _invariant.default)(typeof input === 'number', 'Cannot interpolation an input which is not a number');
    var range = findRange(input, inputRange);
    return interpolate(input, inputRange[range], inputRange[range + 1], outputRange[range], outputRange[range + 1], easing, extrapolateLeft, extrapolateRight);
  };
}

function interpolate(input, inputMin, inputMax, outputMin, outputMax, easing, extrapolateLeft, extrapolateRight) {
  var result = input;

  if (result < inputMin) {
    if (extrapolateLeft === 'identity') {
      return result;
    } else if (extrapolateLeft === 'clamp') {
      result = inputMin;
    } else if (extrapolateLeft === 'extend') {}
  }

  if (result > inputMax) {
    if (extrapolateRight === 'identity') {
      return result;
    } else if (extrapolateRight === 'clamp') {
      result = inputMax;
    } else if (extrapolateRight === 'extend') {}
  }

  if (outputMin === outputMax) {
    return outputMin;
  }

  if (inputMin === inputMax) {
    if (input <= inputMin) {
      return outputMin;
    }

    return outputMax;
  }

  if (inputMin === -Infinity) {
    result = -result;
  } else if (inputMax === Infinity) {
    result = result - inputMin;
  } else {
    result = (result - inputMin) / (inputMax - inputMin);
  }

  result = easing(result);

  if (outputMin === -Infinity) {
    result = -result;
  } else if (outputMax === Infinity) {
    result = result + outputMin;
  } else {
    result = result * (outputMax - outputMin) + outputMin;
  }

  return result;
}

function colorToRgba(input) {
  var normalizedColor = (0, _normalizeCssColor.default)(input);

  if (normalizedColor === null || typeof normalizedColor !== 'number') {
    return input;
  }

  normalizedColor = normalizedColor || 0;
  var r = (normalizedColor & 0xff000000) >>> 24;
  var g = (normalizedColor & 0x00ff0000) >>> 16;
  var b = (normalizedColor & 0x0000ff00) >>> 8;
  var a = (normalizedColor & 0x000000ff) / 255;
  return "rgba(" + r + ", " + g + ", " + b + ", " + a + ")";
}

var stringShapeRegex = /[+-]?(?:\d+\.?\d*|\.\d+)(?:[eE][+-]?\d+)?/g;

function createInterpolationFromStringOutputRange(config) {
  var outputRange = config.outputRange;
  (0, _invariant.default)(outputRange.length >= 2, 'Bad output range');
  outputRange = outputRange.map(colorToRgba);
  checkPattern(outputRange);
  var outputRanges = outputRange[0].match(stringShapeRegex).map(function () {
    return [];
  });
  outputRange.forEach(function (value) {
    value.match(stringShapeRegex).forEach(function (number, i) {
      outputRanges[i].push(+number);
    });
  });
  var interpolations = outputRange[0].match(stringShapeRegex).map(function (value, i) {
    return createInterpolation(_objectSpread(_objectSpread({}, config), {}, {
      outputRange: outputRanges[i]
    }));
  });
  var shouldRound = isRgbOrRgba(outputRange[0]);
  return function (input) {
    var i = 0;
    return outputRange[0].replace(stringShapeRegex, function () {
      var val = +interpolations[i++](input);

      if (shouldRound) {
        val = i < 4 ? Math.round(val) : Math.round(val * 1000) / 1000;
      }

      return String(val);
    });
  };
}

function isRgbOrRgba(range) {
  return typeof range === 'string' && range.startsWith('rgb');
}

function checkPattern(arr) {
  var pattern = arr[0].replace(stringShapeRegex, '');

  for (var i = 1; i < arr.length; ++i) {
    (0, _invariant.default)(pattern === arr[i].replace(stringShapeRegex, ''), 'invalid pattern ' + arr[0] + ' and ' + arr[i]);
  }
}

function findRange(input, inputRange) {
  var i;

  for (i = 1; i < inputRange.length - 1; ++i) {
    if (inputRange[i] >= input) {
      break;
    }
  }

  return i - 1;
}

function checkValidInputRange(arr) {
  (0, _invariant.default)(arr.length >= 2, 'inputRange must have at least 2 elements');

  for (var i = 1; i < arr.length; ++i) {
    (0, _invariant.default)(arr[i] >= arr[i - 1], 'inputRange must be monotonically non-decreasing ' + arr);
  }
}

function checkInfiniteRange(name, arr) {
  (0, _invariant.default)(arr.length >= 2, name + ' must have at least 2 elements');
  (0, _invariant.default)(arr.length !== 2 || arr[0] !== -Infinity || arr[1] !== Infinity, name + 'cannot be ]-infinity;+infinity[ ' + arr);
}

var AnimatedInterpolation = function (_AnimatedWithChildren) {
  _inheritsLoose(AnimatedInterpolation, _AnimatedWithChildren);

  function AnimatedInterpolation(parent, config) {
    var _this;

    _this = _AnimatedWithChildren.call(this) || this;
    _this._parent = parent;
    _this._config = config;
    _this._interpolation = createInterpolation(config);
    return _this;
  }

  var _proto = AnimatedInterpolation.prototype;

  _proto.__makeNative = function __makeNative() {
    this._parent.__makeNative();

    _AnimatedWithChildren.prototype.__makeNative.call(this);
  };

  _proto.__getValue = function __getValue() {
    var parentValue = this._parent.__getValue();

    (0, _invariant.default)(typeof parentValue === 'number', 'Cannot interpolate an input which is not a number.');
    return this._interpolation(parentValue);
  };

  _proto.interpolate = function interpolate(config) {
    return new AnimatedInterpolation(this, config);
  };

  _proto.__attach = function __attach() {
    this._parent.__addChild(this);
  };

  _proto.__detach = function __detach() {
    this._parent.__removeChild(this);

    _AnimatedWithChildren.prototype.__detach.call(this);
  };

  _proto.__transformDataType = function __transformDataType(range) {
    return range.map(_NativeAnimatedHelper.default.transformDataType);
  };

  _proto.__getNativeConfig = function __getNativeConfig() {
    if (__DEV__) {
      _NativeAnimatedHelper.default.validateInterpolation(this._config);
    }

    return {
      inputRange: this._config.inputRange,
      outputRange: this.__transformDataType(this._config.outputRange),
      extrapolateLeft: this._config.extrapolateLeft || this._config.extrapolate || 'extend',
      extrapolateRight: this._config.extrapolateRight || this._config.extrapolate || 'extend',
      type: 'interpolation'
    };
  };

  return AnimatedInterpolation;
}(_AnimatedWithChildren2.default);

AnimatedInterpolation.__createInterpolation = createInterpolation;
var _default = AnimatedInterpolation;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuaW1hdGVkSW50ZXJwb2xhdGlvbi5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfQW5pbWF0ZWROb2RlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfQW5pbWF0ZWRXaXRoQ2hpbGRyZW4yIiwiX05hdGl2ZUFuaW1hdGVkSGVscGVyIiwiX2ludmFyaWFudCIsIl9ub3JtYWxpemVDc3NDb2xvciIsIm9iaiIsIl9pbmhlcml0c0xvb3NlIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJfc2V0UHJvdG90eXBlT2YiLCJvIiwicCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwib3duS2V5cyIsIm9iamVjdCIsImVudW1lcmFibGVPbmx5Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsInN5bWJvbHMiLCJmaWx0ZXIiLCJzeW0iLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJmb3JFYWNoIiwia2V5IiwiX2RlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJfX0RFVl9fIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwibGluZWFyIiwidCIsImNyZWF0ZUludGVycG9sYXRpb24iLCJjb25maWciLCJvdXRwdXRSYW5nZSIsImNyZWF0ZUludGVycG9sYXRpb25Gcm9tU3RyaW5nT3V0cHV0UmFuZ2UiLCJjaGVja0luZmluaXRlUmFuZ2UiLCJpbnB1dFJhbmdlIiwiY2hlY2tWYWxpZElucHV0UmFuZ2UiLCJlYXNpbmciLCJleHRyYXBvbGF0ZUxlZnQiLCJ1bmRlZmluZWQiLCJleHRyYXBvbGF0ZSIsImV4dHJhcG9sYXRlUmlnaHQiLCJpbnB1dCIsInJhbmdlIiwiZmluZFJhbmdlIiwiaW50ZXJwb2xhdGUiLCJpbnB1dE1pbiIsImlucHV0TWF4Iiwib3V0cHV0TWluIiwib3V0cHV0TWF4IiwicmVzdWx0IiwiSW5maW5pdHkiLCJjb2xvclRvUmdiYSIsIm5vcm1hbGl6ZWRDb2xvciIsInIiLCJnIiwiYiIsImEiLCJzdHJpbmdTaGFwZVJlZ2V4IiwibWFwIiwiY2hlY2tQYXR0ZXJuIiwib3V0cHV0UmFuZ2VzIiwibWF0Y2giLCJudW1iZXIiLCJpbnRlcnBvbGF0aW9ucyIsInNob3VsZFJvdW5kIiwiaXNSZ2JPclJnYmEiLCJyZXBsYWNlIiwidmFsIiwiTWF0aCIsInJvdW5kIiwiU3RyaW5nIiwic3RhcnRzV2l0aCIsImFyciIsInBhdHRlcm4iLCJuYW1lIiwiQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIiwiX0FuaW1hdGVkV2l0aENoaWxkcmVuIiwicGFyZW50IiwiX3RoaXMiLCJjYWxsIiwiX3BhcmVudCIsIl9jb25maWciLCJfaW50ZXJwb2xhdGlvbiIsIl9wcm90byIsIl9fbWFrZU5hdGl2ZSIsIl9fZ2V0VmFsdWUiLCJwYXJlbnRWYWx1ZSIsIl9fYXR0YWNoIiwiX19hZGRDaGlsZCIsIl9fZGV0YWNoIiwiX19yZW1vdmVDaGlsZCIsIl9fdHJhbnNmb3JtRGF0YVR5cGUiLCJ0cmFuc2Zvcm1EYXRhVHlwZSIsIl9fZ2V0TmF0aXZlQ29uZmlnIiwidmFsaWRhdGVJbnRlcnBvbGF0aW9uIiwidHlwZSIsIl9fY3JlYXRlSW50ZXJwb2xhdGlvbiIsIl9kZWZhdWx0IiwibW9kdWxlIl0sIm1hcHBpbmdzIjoiQUFXQTs7QUFFQUEsT0FBTyxDQUFDQyxVQUFSLEdBQXFCLElBQXJCO0FBQ0FELE9BQU8sQ0FBQ0UsT0FBUixHQUFrQixLQUFLLENBQXZCOztBQUVBLElBQUlDLGFBQWEsR0FBR0Msc0JBQXNCLENB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LEtBQVA7QUFXRCxHQWhCRDs7QUFrQkEsU0FBT3BCLHFCQUFQO0FBQ0QsQ0FsRXdDLENBa0V2Q2hHLHNCQUFzQixDQUFDSixPQWxFZ0IsQ0FBekM7O0FBb0VBb0cscUJBQXFCLENBQUNxQixxQkFBdEIsR0FBOENuRSxtQkFBOUM7QUFDQSxJQUFJb0UsUUFBUSxHQUFHdEIscUJBQWY7QUFDQXRHLE9BQU8sQ0FBQ0UsT0FBUixHQUFrQjBILFFBQWxCO0FBQ0FDLE1BQU0sQ0FBQzdILE9BQVAsR0FBaUJBLE9BQU8sQ0FBQ0UsT0FBekIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIFxuICogQGZvcm1hdFxuICovXG5cbi8qIGVzbGludCBuby1iaXR3aXNlOiAwICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfQW5pbWF0ZWROb2RlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9BbmltYXRlZE5vZGVcIikpO1xuXG52YXIgX0FuaW1hdGVkV2l0aENoaWxkcmVuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQW5pbWF0ZWRXaXRoQ2hpbGRyZW5cIikpO1xuXG52YXIgX05hdGl2ZUFuaW1hdGVkSGVscGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vTmF0aXZlQW5pbWF0ZWRIZWxwZXJcIikpO1xuXG52YXIgX2ludmFyaWFudCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImZianMvbGliL2ludmFyaWFudFwiKSk7XG5cbnZhciBfbm9ybWFsaXplQ3NzQ29sb3IgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJub3JtYWxpemUtY3NzLWNvbG9yXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG52YXIgX19ERVZfXyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbic7XG5cbnZhciBsaW5lYXIgPSBmdW5jdGlvbiBsaW5lYXIodCkge1xuICByZXR1cm4gdDtcbn07XG4vKipcbiAqIFZlcnkgaGFuZHkgaGVscGVyIHRvIG1hcCBpbnB1dCByYW5nZXMgdG8gb3V0cHV0IHJhbmdlcyB3aXRoIGFuIGVhc2luZ1xuICogZnVuY3Rpb24gYW5kIGN1c3RvbSBiZWhhdmlvciBvdXRzaWRlIG9mIHRoZSByYW5nZXMuXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVJbnRlcnBvbGF0aW9uKGNvbmZpZykge1xuICBpZiAoY29uZmlnLm91dHB1dFJhbmdlICYmIHR5cGVvZiBjb25maWcub3V0cHV0UmFuZ2VbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUludGVycG9sYXRpb25Gcm9tU3RyaW5nT3V0cHV0UmFuZ2UoY29uZmlnKTtcbiAgfVxuXG4gIHZhciBvdXRwdXRSYW5nZSA9IGNvbmZpZy5vdXRwdXRSYW5nZTtcbiAgY2hlY2tJbmZpbml0ZVJhbmdlKCdvdXRwdXRSYW5nZScsIG91dHB1dFJhbmdlKTtcbiAgdmFyIGlucHV0UmFuZ2UgPSBjb25maWcuaW5wdXRSYW5nZTtcbiAgY2hlY2tJbmZpbml0ZVJhbmdlKCdpbnB1dFJhbmdlJywgaW5wdXRSYW5nZSk7XG4gIGNoZWNrVmFsaWRJbnB1dFJhbmdlKGlucHV0UmFuZ2UpO1xuICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShpbnB1dFJhbmdlLmxlbmd0aCA9PT0gb3V0cHV0UmFuZ2UubGVuZ3RoLCAnaW5wdXRSYW5nZSAoJyArIGlucHV0UmFuZ2UubGVuZ3RoICsgJykgYW5kIG91dHB1dFJhbmdlICgnICsgb3V0cHV0UmFuZ2UubGVuZ3RoICsgJykgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aCcpO1xuICB2YXIgZWFzaW5nID0gY29uZmlnLmVhc2luZyB8fCBsaW5lYXI7XG4gIHZhciBleHRyYXBvbGF0ZUxlZnQgPSAnZXh0ZW5kJztcblxuICBpZiAoY29uZmlnLmV4dHJhcG9sYXRlTGVmdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZXh0cmFwb2xhdGVMZWZ0ID0gY29uZmlnLmV4dHJhcG9sYXRlTGVmdDtcbiAgfSBlbHNlIGlmIChjb25maWcuZXh0cmFwb2xhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgIGV4dHJhcG9sYXRlTGVmdCA9IGNvbmZpZy5leHRyYXBvbGF0ZTtcbiAgfVxuXG4gIHZhciBleHRyYXBvbGF0ZVJpZ2h0ID0gJ2V4dGVuZCc7XG5cbiAgaWYgKGNvbmZpZy5leHRyYXBvbGF0ZVJpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBleHRyYXBvbGF0ZVJpZ2h0ID0gY29uZmlnLmV4dHJhcG9sYXRlUmlnaHQ7XG4gIH0gZWxzZSBpZiAoY29uZmlnLmV4dHJhcG9sYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICBleHRyYXBvbGF0ZVJpZ2h0ID0gY29uZmlnLmV4dHJhcG9sYXRlO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicsICdDYW5ub3QgaW50ZXJwb2xhdGlvbiBhbiBpbnB1dCB3aGljaCBpcyBub3QgYSBudW1iZXInKTtcbiAgICB2YXIgcmFuZ2UgPSBmaW5kUmFuZ2UoaW5wdXQsIGlucHV0UmFuZ2UpO1xuICAgIHJldHVybiBpbnRlcnBvbGF0ZShpbnB1dCwgaW5wdXRSYW5nZVtyYW5nZV0sIGlucHV0UmFuZ2VbcmFuZ2UgKyAxXSwgb3V0cHV0UmFuZ2VbcmFuZ2VdLCBvdXRwdXRSYW5nZVtyYW5nZSArIDFdLCBlYXNpbmcsIGV4dHJhcG9sYXRlTGVmdCwgZXh0cmFwb2xhdGVSaWdodCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGludGVycG9sYXRlKGlucHV0LCBpbnB1dE1pbiwgaW5wdXRNYXgsIG91dHB1dE1pbiwgb3V0cHV0TWF4LCBlYXNpbmcsIGV4dHJhcG9sYXRlTGVmdCwgZXh0cmFwb2xhdGVSaWdodCkge1xuICB2YXIgcmVzdWx0ID0gaW5wdXQ7IC8vIEV4dHJhcG9sYXRlXG5cbiAgaWYgKHJlc3VsdCA8IGlucHV0TWluKSB7XG4gICAgaWYgKGV4dHJhcG9sYXRlTGVmdCA9PT0gJ2lkZW50aXR5Jykge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2UgaWYgKGV4dHJhcG9sYXRlTGVmdCA9PT0gJ2NsYW1wJykge1xuICAgICAgcmVzdWx0ID0gaW5wdXRNaW47XG4gICAgfSBlbHNlIGlmIChleHRyYXBvbGF0ZUxlZnQgPT09ICdleHRlbmQnKSB7Ly8gbm9vcFxuICAgIH1cbiAgfVxuXG4gIGlmIChyZXN1bHQgPiBpbnB1dE1heCkge1xuICAgIGlmIChleHRyYXBvbGF0ZVJpZ2h0ID09PSAnaWRlbnRpdHknKSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSBpZiAoZXh0cmFwb2xhdGVSaWdodCA9PT0gJ2NsYW1wJykge1xuICAgICAgcmVzdWx0ID0gaW5wdXRNYXg7XG4gICAgfSBlbHNlIGlmIChleHRyYXBvbGF0ZVJpZ2h0ID09PSAnZXh0ZW5kJykgey8vIG5vb3BcbiAgICB9XG4gIH1cblxuICBpZiAob3V0cHV0TWluID09PSBvdXRwdXRNYXgpIHtcbiAgICByZXR1cm4gb3V0cHV0TWluO1xuICB9XG5cbiAgaWYgKGlucHV0TWluID09PSBpbnB1dE1heCkge1xuICAgIGlmIChpbnB1dCA8PSBpbnB1dE1pbikge1xuICAgICAgcmV0dXJuIG91dHB1dE1pbjtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0TWF4O1xuICB9IC8vIElucHV0IFJhbmdlXG5cblxuICBpZiAoaW5wdXRNaW4gPT09IC1JbmZpbml0eSkge1xuICAgIHJlc3VsdCA9IC1yZXN1bHQ7XG4gIH0gZWxzZSBpZiAoaW5wdXRNYXggPT09IEluZmluaXR5KSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0IC0gaW5wdXRNaW47XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gKHJlc3VsdCAtIGlucHV0TWluKSAvIChpbnB1dE1heCAtIGlucHV0TWluKTtcbiAgfSAvLyBFYXNpbmdcblxuXG4gIHJlc3VsdCA9IGVhc2luZyhyZXN1bHQpOyAvLyBPdXRwdXQgUmFuZ2VcblxuICBpZiAob3V0cHV0TWluID09PSAtSW5maW5pdHkpIHtcbiAgICByZXN1bHQgPSAtcmVzdWx0O1xuICB9IGVsc2UgaWYgKG91dHB1dE1heCA9PT0gSW5maW5pdHkpIHtcbiAgICByZXN1bHQgPSByZXN1bHQgKyBvdXRwdXRNaW47XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0ICogKG91dHB1dE1heCAtIG91dHB1dE1pbikgKyBvdXRwdXRNaW47XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBjb2xvclRvUmdiYShpbnB1dCkge1xuICB2YXIgbm9ybWFsaXplZENvbG9yID0gKDAsIF9ub3JtYWxpemVDc3NDb2xvci5kZWZhdWx0KShpbnB1dCk7XG5cbiAgaWYgKG5vcm1hbGl6ZWRDb2xvciA9PT0gbnVsbCB8fCB0eXBlb2Ygbm9ybWFsaXplZENvbG9yICE9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIG5vcm1hbGl6ZWRDb2xvciA9IG5vcm1hbGl6ZWRDb2xvciB8fCAwO1xuICB2YXIgciA9IChub3JtYWxpemVkQ29sb3IgJiAweGZmMDAwMDAwKSA+Pj4gMjQ7XG4gIHZhciBnID0gKG5vcm1hbGl6ZWRDb2xvciAmIDB4MDBmZjAwMDApID4+PiAxNjtcbiAgdmFyIGIgPSAobm9ybWFsaXplZENvbG9yICYgMHgwMDAwZmYwMCkgPj4+IDg7XG4gIHZhciBhID0gKG5vcm1hbGl6ZWRDb2xvciAmIDB4MDAwMDAwZmYpIC8gMjU1O1xuICByZXR1cm4gXCJyZ2JhKFwiICsgciArIFwiLCBcIiArIGcgKyBcIiwgXCIgKyBiICsgXCIsIFwiICsgYSArIFwiKVwiO1xufVxuXG52YXIgc3RyaW5nU2hhcGVSZWdleCA9IC9bKy1dPyg/OlxcZCtcXC4/XFxkKnxcXC5cXGQrKSg/OltlRV1bKy1dP1xcZCspPy9nO1xuLyoqXG4gKiBTdXBwb3J0cyBzdHJpbmcgc2hhcGVzIGJ5IGV4dHJhY3RpbmcgbnVtYmVycyBzbyBuZXcgdmFsdWVzIGNhbiBiZSBjb21wdXRlZCxcbiAqIGFuZCByZWNvbWJpbmVzIHRob3NlIHZhbHVlcyBpbnRvIG5ldyBzdHJpbmdzIG9mIHRoZSBzYW1lIHNoYXBlLiAgU3VwcG9ydHNcbiAqIHRoaW5ncyBsaWtlOlxuICpcbiAqICAgcmdiYSgxMjMsIDQyLCA5OSwgMC4zNikgLy8gY29sb3JzXG4gKiAgIC00NWRlZyAgICAgICAgICAgICAgICAgIC8vIHZhbHVlcyB3aXRoIHVuaXRzXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlSW50ZXJwb2xhdGlvbkZyb21TdHJpbmdPdXRwdXRSYW5nZShjb25maWcpIHtcbiAgdmFyIG91dHB1dFJhbmdlID0gY29uZmlnLm91dHB1dFJhbmdlO1xuICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShvdXRwdXRSYW5nZS5sZW5ndGggPj0gMiwgJ0JhZCBvdXRwdXQgcmFuZ2UnKTtcbiAgb3V0cHV0UmFuZ2UgPSBvdXRwdXRSYW5nZS5tYXAoY29sb3JUb1JnYmEpO1xuICBjaGVja1BhdHRlcm4ob3V0cHV0UmFuZ2UpOyAvLyBbJ3JnYmEoMCwgMTAwLCAyMDAsIDApJywgJ3JnYmEoNTAsIDE1MCwgMjUwLCAwLjUpJ11cbiAgLy8gLT5cbiAgLy8gW1xuICAvLyAgIFswLCA1MF0sXG4gIC8vICAgWzEwMCwgMTUwXSxcbiAgLy8gICBbMjAwLCAyNTBdLFxuICAvLyAgIFswLCAwLjVdLFxuICAvLyBdXG5cbiAgLyogJEZsb3dGaXhNZSg+PTAuMTguMCk6IGBvdXRwdXRSYW5nZVswXS5tYXRjaCgpYCBjYW4gcmV0dXJuIGBudWxsYC4gTmVlZCB0b1xuICAgKiBndWFyZCBhZ2FpbnN0IHRoaXMgcG9zc2liaWxpdHkuXG4gICAqL1xuXG4gIHZhciBvdXRwdXRSYW5nZXMgPSBvdXRwdXRSYW5nZVswXS5tYXRjaChzdHJpbmdTaGFwZVJlZ2V4KS5tYXAoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBbXTtcbiAgfSk7XG4gIG91dHB1dFJhbmdlLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLyogJEZsb3dGaXhNZSg+PTAuMTguMCk6IGB2YWx1ZS5tYXRjaCgpYCBjYW4gcmV0dXJuIGBudWxsYC4gTmVlZCB0byBndWFyZFxuICAgICAqIGFnYWluc3QgdGhpcyBwb3NzaWJpbGl0eS5cbiAgICAgKi9cbiAgICB2YWx1ZS5tYXRjaChzdHJpbmdTaGFwZVJlZ2V4KS5mb3JFYWNoKGZ1bmN0aW9uIChudW1iZXIsIGkpIHtcbiAgICAgIG91dHB1dFJhbmdlc1tpXS5wdXNoKCtudW1iZXIpO1xuICAgIH0pO1xuICB9KTtcbiAgdmFyIGludGVycG9sYXRpb25zID0gb3V0cHV0UmFuZ2VbMF0ubWF0Y2goc3RyaW5nU2hhcGVSZWdleClcbiAgLyogJEZsb3dGaXhNZSg+PTAuMTguMCk6IGBvdXRwdXRSYW5nZVswXS5tYXRjaCgpYCBjYW4gcmV0dXJuIGBudWxsYC4gTmVlZFxuICAgKiB0byBndWFyZCBhZ2FpbnN0IHRoaXMgcG9zc2liaWxpdHkuICovXG4gIC5tYXAoZnVuY3Rpb24gKHZhbHVlLCBpKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUludGVycG9sYXRpb24oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBjb25maWcpLCB7fSwge1xuICAgICAgb3V0cHV0UmFuZ2U6IG91dHB1dFJhbmdlc1tpXVxuICAgIH0pKTtcbiAgfSk7IC8vIHJnYmEgcmVxdWlyZXMgdGhhdCB0aGUgcixnLGIgYXJlIGludGVnZXJzLi4uLiBzbyB3ZSB3YW50IHRvIHJvdW5kIHRoZW0sIGJ1dCB3ZSAqZG9udCogd2FudCB0b1xuICAvLyByb3VuZCB0aGUgb3BhY2l0eSAoNHRoIGNvbHVtbikuXG5cbiAgdmFyIHNob3VsZFJvdW5kID0gaXNSZ2JPclJnYmEob3V0cHV0UmFuZ2VbMF0pO1xuICByZXR1cm4gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgdmFyIGkgPSAwOyAvLyAncmdiYSgwLCAxMDAsIDIwMCwgMCknXG4gICAgLy8gLT5cbiAgICAvLyAncmdiYSgke2ludGVycG9sYXRpb25zWzBdKGlucHV0KX0sICR7aW50ZXJwb2xhdGlvbnNbMV0oaW5wdXQpfSwgLi4uJ1xuXG4gICAgcmV0dXJuIG91dHB1dFJhbmdlWzBdLnJlcGxhY2Uoc3RyaW5nU2hhcGVSZWdleCwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHZhbCA9ICtpbnRlcnBvbGF0aW9uc1tpKytdKGlucHV0KTtcblxuICAgICAgaWYgKHNob3VsZFJvdW5kKSB7XG4gICAgICAgIHZhbCA9IGkgPCA0ID8gTWF0aC5yb3VuZCh2YWwpIDogTWF0aC5yb3VuZCh2YWwgKiAxMDAwKSAvIDEwMDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBTdHJpbmcodmFsKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaXNSZ2JPclJnYmEocmFuZ2UpIHtcbiAgcmV0dXJuIHR5cGVvZiByYW5nZSA9PT0gJ3N0cmluZycgJiYgcmFuZ2Uuc3RhcnRzV2l0aCgncmdiJyk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrUGF0dGVybihhcnIpIHtcbiAgdmFyIHBhdHRlcm4gPSBhcnJbMF0ucmVwbGFjZShzdHJpbmdTaGFwZVJlZ2V4LCAnJyk7XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcbiAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShwYXR0ZXJuID09PSBhcnJbaV0ucmVwbGFjZShzdHJpbmdTaGFwZVJlZ2V4LCAnJyksICdpbnZhbGlkIHBhdHRlcm4gJyArIGFyclswXSArICcgYW5kICcgKyBhcnJbaV0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRSYW5nZShpbnB1dCwgaW5wdXRSYW5nZSkge1xuICB2YXIgaTtcblxuICBmb3IgKGkgPSAxOyBpIDwgaW5wdXRSYW5nZS5sZW5ndGggLSAxOyArK2kpIHtcbiAgICBpZiAoaW5wdXRSYW5nZVtpXSA+PSBpbnB1dCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGkgLSAxO1xufVxuXG5mdW5jdGlvbiBjaGVja1ZhbGlkSW5wdXRSYW5nZShhcnIpIHtcbiAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkoYXJyLmxlbmd0aCA+PSAyLCAnaW5wdXRSYW5nZSBtdXN0IGhhdmUgYXQgbGVhc3QgMiBlbGVtZW50cycpO1xuXG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkoYXJyW2ldID49IGFycltpIC0gMV0sXG4gICAgLyogJEZsb3dGaXhNZSg+PTAuMTMuMCkgLSBJbiB0aGUgYWRkaXRpb24gZXhwcmVzc2lvbiBiZWxvdyB0aGlzIGNvbW1lbnQsXG4gICAgICogb25lIG9yIGJvdGggb2YgdGhlIG9wZXJhbmRzIG1heSBiZSBzb21ldGhpbmcgdGhhdCBkb2Vzbid0IGNsZWFubHlcbiAgICAgKiBjb252ZXJ0IHRvIGEgc3RyaW5nLCBsaWtlIHVuZGVmaW5lZCwgbnVsbCwgYW5kIG9iamVjdCwgZXRjLiBJZiB5b3UgcmVhbGx5XG4gICAgICogbWVhbiB0aGlzIGltcGxpY2l0IHN0cmluZyBjb252ZXJzaW9uLCB5b3UgY2FuIGRvIHNvbWV0aGluZyBsaWtlXG4gICAgICogU3RyaW5nKG15VGhpbmcpXG4gICAgICovXG4gICAgJ2lucHV0UmFuZ2UgbXVzdCBiZSBtb25vdG9uaWNhbGx5IG5vbi1kZWNyZWFzaW5nICcgKyBhcnIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrSW5maW5pdGVSYW5nZShuYW1lLCBhcnIpIHtcbiAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkoYXJyLmxlbmd0aCA+PSAyLCBuYW1lICsgJyBtdXN0IGhhdmUgYXQgbGVhc3QgMiBlbGVtZW50cycpO1xuICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShhcnIubGVuZ3RoICE9PSAyIHx8IGFyclswXSAhPT0gLUluZmluaXR5IHx8IGFyclsxXSAhPT0gSW5maW5pdHksXG4gIC8qICRGbG93Rml4TWUoPj0wLjEzLjApIC0gSW4gdGhlIGFkZGl0aW9uIGV4cHJlc3Npb24gYmVsb3cgdGhpcyBjb21tZW50LFxuICAgKiBvbmUgb3IgYm90aCBvZiB0aGUgb3BlcmFuZHMgbWF5IGJlIHNvbWV0aGluZyB0aGF0IGRvZXNuJ3QgY2xlYW5seSBjb252ZXJ0XG4gICAqIHRvIGEgc3RyaW5nLCBsaWtlIHVuZGVmaW5lZCwgbnVsbCwgYW5kIG9iamVjdCwgZXRjLiBJZiB5b3UgcmVhbGx5IG1lYW5cbiAgICogdGhpcyBpbXBsaWNpdCBzdHJpbmcgY29udmVyc2lvbiwgeW91IGNhbiBkbyBzb21ldGhpbmcgbGlrZVxuICAgKiBTdHJpbmcobXlUaGluZylcbiAgICovXG4gIG5hbWUgKyAnY2Fubm90IGJlIF0taW5maW5pdHk7K2luZmluaXR5WyAnICsgYXJyKTtcbn1cblxudmFyIEFuaW1hdGVkSW50ZXJwb2xhdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0FuaW1hdGVkV2l0aENoaWxkcmVuKSB7XG4gIF9pbmhlcml0c0xvb3NlKEFuaW1hdGVkSW50ZXJwb2xhdGlvbiwgX0FuaW1hdGVkV2l0aENoaWxkcmVuKTtcblxuICAvLyBFeHBvcnQgZm9yIHRlc3RpbmcuXG4gIGZ1bmN0aW9uIEFuaW1hdGVkSW50ZXJwb2xhdGlvbihwYXJlbnQsIGNvbmZpZykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX0FuaW1hdGVkV2l0aENoaWxkcmVuLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBfdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgIF90aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgX3RoaXMuX2ludGVycG9sYXRpb24gPSBjcmVhdGVJbnRlcnBvbGF0aW9uKGNvbmZpZyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEFuaW1hdGVkSW50ZXJwb2xhdGlvbi5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLl9fbWFrZU5hdGl2ZSA9IGZ1bmN0aW9uIF9fbWFrZU5hdGl2ZSgpIHtcbiAgICB0aGlzLl9wYXJlbnQuX19tYWtlTmF0aXZlKCk7XG5cbiAgICBfQW5pbWF0ZWRXaXRoQ2hpbGRyZW4ucHJvdG90eXBlLl9fbWFrZU5hdGl2ZS5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIF9wcm90by5fX2dldFZhbHVlID0gZnVuY3Rpb24gX19nZXRWYWx1ZSgpIHtcbiAgICB2YXIgcGFyZW50VmFsdWUgPSB0aGlzLl9wYXJlbnQuX19nZXRWYWx1ZSgpO1xuXG4gICAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkodHlwZW9mIHBhcmVudFZhbHVlID09PSAnbnVtYmVyJywgJ0Nhbm5vdCBpbnRlcnBvbGF0ZSBhbiBpbnB1dCB3aGljaCBpcyBub3QgYSBudW1iZXIuJyk7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVycG9sYXRpb24ocGFyZW50VmFsdWUpO1xuICB9O1xuXG4gIF9wcm90by5pbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uIGludGVycG9sYXRlKGNvbmZpZykge1xuICAgIHJldHVybiBuZXcgQW5pbWF0ZWRJbnRlcnBvbGF0aW9uKHRoaXMsIGNvbmZpZyk7XG4gIH07XG5cbiAgX3Byb3RvLl9fYXR0YWNoID0gZnVuY3Rpb24gX19hdHRhY2goKSB7XG4gICAgdGhpcy5fcGFyZW50Ll9fYWRkQ2hpbGQodGhpcyk7XG4gIH07XG5cbiAgX3Byb3RvLl9fZGV0YWNoID0gZnVuY3Rpb24gX19kZXRhY2goKSB7XG4gICAgdGhpcy5fcGFyZW50Ll9fcmVtb3ZlQ2hpbGQodGhpcyk7XG5cbiAgICBfQW5pbWF0ZWRXaXRoQ2hpbGRyZW4ucHJvdG90eXBlLl9fZGV0YWNoLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgX3Byb3RvLl9fdHJhbnNmb3JtRGF0YVR5cGUgPSBmdW5jdGlvbiBfX3RyYW5zZm9ybURhdGFUeXBlKHJhbmdlKSB7XG4gICAgcmV0dXJuIHJhbmdlLm1hcChfTmF0aXZlQW5pbWF0ZWRIZWxwZXIuZGVmYXVsdC50cmFuc2Zvcm1EYXRhVHlwZSk7XG4gIH07XG5cbiAgX3Byb3RvLl9fZ2V0TmF0aXZlQ29uZmlnID0gZnVuY3Rpb24gX19nZXROYXRpdmVDb25maWcoKSB7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIF9OYXRpdmVBbmltYXRlZEhlbHBlci5kZWZhdWx0LnZhbGlkYXRlSW50ZXJwb2xhdGlvbih0aGlzLl9jb25maWcpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpbnB1dFJhbmdlOiB0aGlzLl9jb25maWcuaW5wdXRSYW5nZSxcbiAgICAgIC8vIE9ubHkgdGhlIGBvdXRwdXRSYW5nZWAgY2FuIGNvbnRhaW4gc3RyaW5ncyBzbyB3ZSBkb24ndCBuZWVkIHRvIHRyYW5zZm9ybSBgaW5wdXRSYW5nZWAgaGVyZVxuXG4gICAgICAvKiAkRmxvd0ZpeE1lKD49MC4zOC4wKSAtIEZsb3cgZXJyb3IgZGV0ZWN0ZWQgZHVyaW5nIHRoZSBkZXBsb3ltZW50IG9mXG4gICAgICAgKiB2MC4zOC4wLiBUbyBzZWUgdGhlIGVycm9yLCByZW1vdmUgdGhpcyBjb21tZW50IGFuZCBydW4gZmxvdyAqL1xuICAgICAgb3V0cHV0UmFuZ2U6IHRoaXMuX190cmFuc2Zvcm1EYXRhVHlwZSh0aGlzLl9jb25maWcub3V0cHV0UmFuZ2UpLFxuICAgICAgZXh0cmFwb2xhdGVMZWZ0OiB0aGlzLl9jb25maWcuZXh0cmFwb2xhdGVMZWZ0IHx8IHRoaXMuX2NvbmZpZy5leHRyYXBvbGF0ZSB8fCAnZXh0ZW5kJyxcbiAgICAgIGV4dHJhcG9sYXRlUmlnaHQ6IHRoaXMuX2NvbmZpZy5leHRyYXBvbGF0ZVJpZ2h0IHx8IHRoaXMuX2NvbmZpZy5leHRyYXBvbGF0ZSB8fCAnZXh0ZW5kJyxcbiAgICAgIHR5cGU6ICdpbnRlcnBvbGF0aW9uJ1xuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIEFuaW1hdGVkSW50ZXJwb2xhdGlvbjtcbn0oX0FuaW1hdGVkV2l0aENoaWxkcmVuMi5kZWZhdWx0KTtcblxuQW5pbWF0ZWRJbnRlcnBvbGF0aW9uLl9fY3JlYXRlSW50ZXJwb2xhdGlvbiA9IGNyZWF0ZUludGVycG9sYXRpb247XG52YXIgX2RlZmF1bHQgPSBBbmltYXRlZEludGVycG9sYXRpb247XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdfQ==