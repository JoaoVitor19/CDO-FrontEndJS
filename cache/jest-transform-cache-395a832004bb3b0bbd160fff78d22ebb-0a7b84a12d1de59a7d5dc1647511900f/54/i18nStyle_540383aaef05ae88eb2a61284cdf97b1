007e401130ff33f5a0e286f866d32b85
"use strict";

exports.__esModule = true;
exports.default = void 0;

var _I18nManager = _interopRequireDefault(require("../I18nManager"));

var _multiplyStyleLengthValue = _interopRequireDefault(require("../../modules/multiplyStyleLengthValue"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

var emptyObject = {};
var borderTopLeftRadius = 'borderTopLeftRadius';
var borderTopRightRadius = 'borderTopRightRadius';
var borderBottomLeftRadius = 'borderBottomLeftRadius';
var borderBottomRightRadius = 'borderBottomRightRadius';
var borderLeftColor = 'borderLeftColor';
var borderLeftStyle = 'borderLeftStyle';
var borderLeftWidth = 'borderLeftWidth';
var borderRightColor = 'borderRightColor';
var borderRightStyle = 'borderRightStyle';
var borderRightWidth = 'borderRightWidth';
var right = 'right';
var marginLeft = 'marginLeft';
var marginRight = 'marginRight';
var paddingLeft = 'paddingLeft';
var paddingRight = 'paddingRight';
var left = 'left';
var PROPERTIES_FLIP = {
  borderTopLeftRadius: borderTopRightRadius,
  borderTopRightRadius: borderTopLeftRadius,
  borderBottomLeftRadius: borderBottomRightRadius,
  borderBottomRightRadius: borderBottomLeftRadius,
  borderLeftColor: borderRightColor,
  borderLeftStyle: borderRightStyle,
  borderLeftWidth: borderRightWidth,
  borderRightColor: borderLeftColor,
  borderRightStyle: borderLeftStyle,
  borderRightWidth: borderLeftWidth,
  left: right,
  marginLeft: marginRight,
  marginRight: marginLeft,
  paddingLeft: paddingRight,
  paddingRight: paddingLeft,
  right: left
};
var PROPERTIES_I18N = {
  borderTopStartRadius: borderTopLeftRadius,
  borderTopEndRadius: borderTopRightRadius,
  borderBottomStartRadius: borderBottomLeftRadius,
  borderBottomEndRadius: borderBottomRightRadius,
  borderStartColor: borderLeftColor,
  borderStartStyle: borderLeftStyle,
  borderStartWidth: borderLeftWidth,
  borderEndColor: borderRightColor,
  borderEndStyle: borderRightStyle,
  borderEndWidth: borderRightWidth,
  end: right,
  marginStart: marginLeft,
  marginEnd: marginRight,
  paddingStart: paddingLeft,
  paddingEnd: paddingRight,
  start: left
};
var PROPERTIES_VALUE = {
  clear: true,
  float: true,
  textAlign: true
};

var additiveInverse = function additiveInverse(value) {
  return (0, _multiplyStyleLengthValue.default)(value, -1);
};

var i18nStyle = function i18nStyle(originalStyle) {
  var _I18nManager$getConst = _I18nManager.default.getConstants(),
      doLeftAndRightSwapInRTL = _I18nManager$getConst.doLeftAndRightSwapInRTL,
      isRTL = _I18nManager$getConst.isRTL;

  var style = originalStyle || emptyObject;
  var frozenProps = {};
  var nextStyle = {};

  for (var originalProp in style) {
    if (!Object.prototype.hasOwnProperty.call(style, originalProp)) {
      continue;
    }

    var originalValue = style[originalProp];
    var prop = originalProp;
    var value = originalValue;

    if (PROPERTIES_I18N.hasOwnProperty(originalProp)) {
      var convertedProp = PROPERTIES_I18N[originalProp];
      prop = isRTL ? PROPERTIES_FLIP[convertedProp] : convertedProp;
    } else if (isRTL && doLeftAndRightSwapInRTL && PROPERTIES_FLIP[originalProp]) {
      prop = PROPERTIES_FLIP[originalProp];
    }

    if (PROPERTIES_VALUE.hasOwnProperty(originalProp)) {
      if (originalValue === 'start') {
        value = isRTL ? 'right' : 'left';
      } else if (originalValue === 'end') {
        value = isRTL ? 'left' : 'right';
      } else if (isRTL && doLeftAndRightSwapInRTL) {
        if (originalValue === 'left') {
          value = 'right';
        } else if (originalValue === 'right') {
          value = 'left';
        }
      }
    }

    if (prop === 'transitionProperty') {
      if (PROPERTIES_I18N.hasOwnProperty(value)) {
        var convertedValue = PROPERTIES_I18N[originalValue];
        value = isRTL ? PROPERTIES_FLIP[convertedValue] : convertedValue;
      } else if (isRTL && doLeftAndRightSwapInRTL) {
        var flippedValue = PROPERTIES_FLIP[originalValue];

        if (flippedValue != null) {
          value = flippedValue;
        }
      }
    }

    if (isRTL && prop === 'textShadowOffset') {
      var invertedValue = additiveInverse(value.width);
      value.width = invertedValue;
      nextStyle[prop] = value;
    } else if (!frozenProps[prop]) {
      nextStyle[prop] = value;
    }

    if (PROPERTIES_I18N[originalProp]) {
      frozenProps[prop] = true;
    }
  }

  return nextStyle;
};

var _default = i18nStyle;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImkxOG5TdHlsZS5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfSTE4bk1hbmFnZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9tdWx0aXBseVN0eWxlTGVuZ3RoVmFsdWUiLCJvYmoiLCJlbXB0eU9iamVjdCIsImJvcmRlclRvcExlZnRSYWRpdXMiLCJib3JkZXJUb3BSaWdodFJhZGl1cyIsImJvcmRlckJvdHRvbUxlZnRSYWRpdXMiLCJib3JkZXJCb3R0b21SaWdodFJhZGl1cyIsImJvcmRlckxlZnRDb2xvciIsImJvcmRlckxlZnRTdHlsZSIsImJvcmRlckxlZnRXaWR0aCIsImJvcmRlclJpZ2h0Q29sb3IiLCJib3JkZXJSaWdodFN0eWxlIiwiYm9yZGVyUmlnaHRXaWR0aCIsInJpZ2h0IiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0IiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJsZWZ0IiwiUFJPUEVSVElFU19GTElQIiwiUFJPUEVSVElFU19JMThOIiwiYm9yZGVyVG9wU3RhcnRSYWRpdXMiLCJib3JkZXJUb3BFbmRSYWRpdXMiLCJib3JkZXJCb3R0b21TdGFydFJhZGl1cyIsImJvcmRlckJvdHRvbUVuZFJhZGl1cyIsImJvcmRlclN0YXJ0Q29sb3IiLCJib3JkZXJTdGFydFN0eWxlIiwiYm9yZGVyU3RhcnRXaWR0aCIsImJvcmRlckVuZENvbG9yIiwiYm9yZGVyRW5kU3R5bGUiLCJib3JkZXJFbmRXaWR0aCIsImVuZCIsIm1hcmdpblN0YXJ0IiwibWFyZ2luRW5kIiwicGFkZGluZ1N0YXJ0IiwicGFkZGluZ0VuZCIsInN0YXJ0IiwiUFJPUEVSVElFU19WQUxVRSIsImNsZWFyIiwiZmxvYXQiLCJ0ZXh0QWxpZ24iLCJhZGRpdGl2ZUludmVyc2UiLCJ2YWx1ZSIsImkxOG5TdHlsZSIsIm9yaWdpbmFsU3R5bGUiLCJfSTE4bk1hbmFnZXIkZ2V0Q29uc3QiLCJnZXRDb25zdGFudHMiLCJkb0xlZnRBbmRSaWdodFN3YXBJblJUTCIsImlzUlRMIiwic3R5bGUiLCJmcm96ZW5Qcm9wcyIsIm5leHRTdHlsZSIsIm9yaWdpbmFsUHJvcCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm9yaWdpbmFsVmFsdWUiLCJwcm9wIiwiY29udmVydGVkUHJvcCIsImNvbnZlcnRlZFZhbHVlIiwiZmxpcHBlZFZhbHVlIiwiaW52ZXJ0ZWRWYWx1ZSIsIndpZHRoIiwiX2RlZmF1bHQiLCJtb2R1bGUiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxPQUFPLENBQUNDLFVBQVIsR0FBcUIsSUFBckI7QUFDQUQsT0FBTyxDQUFDRSxPQUFSLEdBQWtCLEtBQUssQ0FBdkI7O0FBRUEsSUFBSUMsWUFBWSxHQUFHQyxzQkFBc0IsQ0FBQ0MsT0FBTyxrQkFBUixDQUF6Qzs7QUFFQSxJQUFJQyx5QkFBeUIsR0FBR0Ysc0JBQXNCLENBQUNDLE9BQU8sMENBQVIsQ0FBdEQ7O0FBRUEsU0FBU0Qsc0JBQVQsQ0FBZ0NHLEdBQWhDLEVBQXFDO0FBQUUsU0FBT0EsR0FBRyxJQUFJQSxHQUFHLENBQUNOLFVBQVgsR0FBd0JNLEdBQXhCLEdBQThCO0FBQUVMLElBQUFBLE9BQU8sRUFBRUs7QUFBWCxHQUFyQztBQUF3RDs7QUFVL0YsSUFBSUMsV0FBVyxHQUFHLEVBQWxCO0FBQ0EsSUFBSUMsbUJBQW1CLEdBQUcscUJBQTFCO0FBQ0EsSUFBSUMsb0JBQW9CLEdBQUcsc0JBQTNCO0FBQ0EsSUFBSUMsc0JBQXNCLEdBQUcsd0JBQTdCO0FBQ0EsSUFBSUMsdUJBQXVCLEdBQUcseUJBQTlCO0FBQ0EsSUFBSUMsZUFBZSxHQUFHLGlCQUF0QjtBQUNBLElBQUlDLGVBQWUsR0FBRyxpQkFBdEI7QUFDQSxJQUFJQyxlQUFlLEdBQUcsaUJBQXRCO0FBQ0EsSUFBSUMsZ0JBQWdCLEdBQUcsa0JBQXZCO0FBQ0EsSUFBSUMsZ0JBQWdCLEdBQUcsa0JBQXZCO0FBQ0EsSUFBSUMsZ0JBQWdCLEdBQUcsa0JB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LE9BQVIsR0FBa0JvRSxRQUFsQjtBQUNBQyxNQUFNLENBQUN2RSxPQUFQLEdBQWlCQSxPQUFPLENBQUNFLE9BQXpCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfSTE4bk1hbmFnZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9JMThuTWFuYWdlclwiKSk7XG5cbnZhciBfbXVsdGlwbHlTdHlsZUxlbmd0aFZhbHVlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vbW9kdWxlcy9tdWx0aXBseVN0eWxlTGVuZ3RoVmFsdWVcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTmljb2xhcyBHYWxsYWdoZXIuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogXG4gKi9cbnZhciBlbXB0eU9iamVjdCA9IHt9O1xudmFyIGJvcmRlclRvcExlZnRSYWRpdXMgPSAnYm9yZGVyVG9wTGVmdFJhZGl1cyc7XG52YXIgYm9yZGVyVG9wUmlnaHRSYWRpdXMgPSAnYm9yZGVyVG9wUmlnaHRSYWRpdXMnO1xudmFyIGJvcmRlckJvdHRvbUxlZnRSYWRpdXMgPSAnYm9yZGVyQm90dG9tTGVmdFJhZGl1cyc7XG52YXIgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXMgPSAnYm9yZGVyQm90dG9tUmlnaHRSYWRpdXMnO1xudmFyIGJvcmRlckxlZnRDb2xvciA9ICdib3JkZXJMZWZ0Q29sb3InO1xudmFyIGJvcmRlckxlZnRTdHlsZSA9ICdib3JkZXJMZWZ0U3R5bGUnO1xudmFyIGJvcmRlckxlZnRXaWR0aCA9ICdib3JkZXJMZWZ0V2lkdGgnO1xudmFyIGJvcmRlclJpZ2h0Q29sb3IgPSAnYm9yZGVyUmlnaHRDb2xvcic7XG52YXIgYm9yZGVyUmlnaHRTdHlsZSA9ICdib3JkZXJSaWdodFN0eWxlJztcbnZhciBib3JkZXJSaWdodFdpZHRoID0gJ2JvcmRlclJpZ2h0V2lkdGgnO1xudmFyIHJpZ2h0ID0gJ3JpZ2h0JztcbnZhciBtYXJnaW5MZWZ0ID0gJ21hcmdpbkxlZnQnO1xudmFyIG1hcmdpblJpZ2h0ID0gJ21hcmdpblJpZ2h0JztcbnZhciBwYWRkaW5nTGVmdCA9ICdwYWRkaW5nTGVmdCc7XG52YXIgcGFkZGluZ1JpZ2h0ID0gJ3BhZGRpbmdSaWdodCc7XG52YXIgbGVmdCA9ICdsZWZ0JzsgLy8gTWFwIG9mIExUUiBwcm9wZXJ0eSBuYW1lcyB0byB0aGVpciBCaURpIGVxdWl2YWxlbnQuXG5cbnZhciBQUk9QRVJUSUVTX0ZMSVAgPSB7XG4gIGJvcmRlclRvcExlZnRSYWRpdXM6IGJvcmRlclRvcFJpZ2h0UmFkaXVzLFxuICBib3JkZXJUb3BSaWdodFJhZGl1czogYm9yZGVyVG9wTGVmdFJhZGl1cyxcbiAgYm9yZGVyQm90dG9tTGVmdFJhZGl1czogYm9yZGVyQm90dG9tUmlnaHRSYWRpdXMsXG4gIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzOiBib3JkZXJCb3R0b21MZWZ0UmFkaXVzLFxuICBib3JkZXJMZWZ0Q29sb3I6IGJvcmRlclJpZ2h0Q29sb3IsXG4gIGJvcmRlckxlZnRTdHlsZTogYm9yZGVyUmlnaHRTdHlsZSxcbiAgYm9yZGVyTGVmdFdpZHRoOiBib3JkZXJSaWdodFdpZHRoLFxuICBib3JkZXJSaWdodENvbG9yOiBib3JkZXJMZWZ0Q29sb3IsXG4gIGJvcmRlclJpZ2h0U3R5bGU6IGJvcmRlckxlZnRTdHlsZSxcbiAgYm9yZGVyUmlnaHRXaWR0aDogYm9yZGVyTGVmdFdpZHRoLFxuICBsZWZ0OiByaWdodCxcbiAgbWFyZ2luTGVmdDogbWFyZ2luUmlnaHQsXG4gIG1hcmdpblJpZ2h0OiBtYXJnaW5MZWZ0LFxuICBwYWRkaW5nTGVmdDogcGFkZGluZ1JpZ2h0LFxuICBwYWRkaW5nUmlnaHQ6IHBhZGRpbmdMZWZ0LFxuICByaWdodDogbGVmdFxufTsgLy8gTWFwIG9mIEkxOE4gcHJvcGVydHkgbmFtZXMgdG8gdGhlaXIgTFRSIGVxdWl2YWxlbnQuXG5cbnZhciBQUk9QRVJUSUVTX0kxOE4gPSB7XG4gIGJvcmRlclRvcFN0YXJ0UmFkaXVzOiBib3JkZXJUb3BMZWZ0UmFkaXVzLFxuICBib3JkZXJUb3BFbmRSYWRpdXM6IGJvcmRlclRvcFJpZ2h0UmFkaXVzLFxuICBib3JkZXJCb3R0b21TdGFydFJhZGl1czogYm9yZGVyQm90dG9tTGVmdFJhZGl1cyxcbiAgYm9yZGVyQm90dG9tRW5kUmFkaXVzOiBib3JkZXJCb3R0b21SaWdodFJhZGl1cyxcbiAgYm9yZGVyU3RhcnRDb2xvcjogYm9yZGVyTGVmdENvbG9yLFxuICBib3JkZXJTdGFydFN0eWxlOiBib3JkZXJMZWZ0U3R5bGUsXG4gIGJvcmRlclN0YXJ0V2lkdGg6IGJvcmRlckxlZnRXaWR0aCxcbiAgYm9yZGVyRW5kQ29sb3I6IGJvcmRlclJpZ2h0Q29sb3IsXG4gIGJvcmRlckVuZFN0eWxlOiBib3JkZXJSaWdodFN0eWxlLFxuICBib3JkZXJFbmRXaWR0aDogYm9yZGVyUmlnaHRXaWR0aCxcbiAgZW5kOiByaWdodCxcbiAgbWFyZ2luU3RhcnQ6IG1hcmdpbkxlZnQsXG4gIG1hcmdpbkVuZDogbWFyZ2luUmlnaHQsXG4gIHBhZGRpbmdTdGFydDogcGFkZGluZ0xlZnQsXG4gIHBhZGRpbmdFbmQ6IHBhZGRpbmdSaWdodCxcbiAgc3RhcnQ6IGxlZnRcbn07XG52YXIgUFJPUEVSVElFU19WQUxVRSA9IHtcbiAgY2xlYXI6IHRydWUsXG4gIGZsb2F0OiB0cnVlLFxuICB0ZXh0QWxpZ246IHRydWVcbn07IC8vIEludmVydCB0aGUgc2lnbiBvZiBhIG51bWVyaWMtbGlrZSB2YWx1ZVxuXG52YXIgYWRkaXRpdmVJbnZlcnNlID0gZnVuY3Rpb24gYWRkaXRpdmVJbnZlcnNlKHZhbHVlKSB7XG4gIHJldHVybiAoMCwgX211bHRpcGx5U3R5bGVMZW5ndGhWYWx1ZS5kZWZhdWx0KSh2YWx1ZSwgLTEpO1xufTtcblxudmFyIGkxOG5TdHlsZSA9IGZ1bmN0aW9uIGkxOG5TdHlsZShvcmlnaW5hbFN0eWxlKSB7XG4gIHZhciBfSTE4bk1hbmFnZXIkZ2V0Q29uc3QgPSBfSTE4bk1hbmFnZXIuZGVmYXVsdC5nZXRDb25zdGFudHMoKSxcbiAgICAgIGRvTGVmdEFuZFJpZ2h0U3dhcEluUlRMID0gX0kxOG5NYW5hZ2VyJGdldENvbnN0LmRvTGVmdEFuZFJpZ2h0U3dhcEluUlRMLFxuICAgICAgaXNSVEwgPSBfSTE4bk1hbmFnZXIkZ2V0Q29uc3QuaXNSVEw7XG5cbiAgdmFyIHN0eWxlID0gb3JpZ2luYWxTdHlsZSB8fCBlbXB0eU9iamVjdDtcbiAgdmFyIGZyb3plblByb3BzID0ge307XG4gIHZhciBuZXh0U3R5bGUgPSB7fTtcblxuICBmb3IgKHZhciBvcmlnaW5hbFByb3AgaW4gc3R5bGUpIHtcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzdHlsZSwgb3JpZ2luYWxQcm9wKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIG9yaWdpbmFsVmFsdWUgPSBzdHlsZVtvcmlnaW5hbFByb3BdO1xuICAgIHZhciBwcm9wID0gb3JpZ2luYWxQcm9wO1xuICAgIHZhciB2YWx1ZSA9IG9yaWdpbmFsVmFsdWU7IC8vIEJpRGkgZmxpcCBwcm9wZXJ0aWVzXG5cbiAgICBpZiAoUFJPUEVSVElFU19JMThOLmhhc093blByb3BlcnR5KG9yaWdpbmFsUHJvcCkpIHtcbiAgICAgIC8vIGNvbnZlcnQgc3RhcnQvZW5kXG4gICAgICB2YXIgY29udmVydGVkUHJvcCA9IFBST1BFUlRJRVNfSTE4TltvcmlnaW5hbFByb3BdO1xuICAgICAgcHJvcCA9IGlzUlRMID8gUFJPUEVSVElFU19GTElQW2NvbnZlcnRlZFByb3BdIDogY29udmVydGVkUHJvcDtcbiAgICB9IGVsc2UgaWYgKGlzUlRMICYmIGRvTGVmdEFuZFJpZ2h0U3dhcEluUlRMICYmIFBST1BFUlRJRVNfRkxJUFtvcmlnaW5hbFByb3BdKSB7XG4gICAgICBwcm9wID0gUFJPUEVSVElFU19GTElQW29yaWdpbmFsUHJvcF07XG4gICAgfSAvLyBCaURpIGZsaXAgdmFsdWVzXG5cblxuICAgIGlmIChQUk9QRVJUSUVTX1ZBTFVFLmhhc093blByb3BlcnR5KG9yaWdpbmFsUHJvcCkpIHtcbiAgICAgIGlmIChvcmlnaW5hbFZhbHVlID09PSAnc3RhcnQnKSB7XG4gICAgICAgIHZhbHVlID0gaXNSVEwgPyAncmlnaHQnIDogJ2xlZnQnO1xuICAgICAgfSBlbHNlIGlmIChvcmlnaW5hbFZhbHVlID09PSAnZW5kJykge1xuICAgICAgICB2YWx1ZSA9IGlzUlRMID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgIH0gZWxzZSBpZiAoaXNSVEwgJiYgZG9MZWZ0QW5kUmlnaHRTd2FwSW5SVEwpIHtcbiAgICAgICAgaWYgKG9yaWdpbmFsVmFsdWUgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIHZhbHVlID0gJ3JpZ2h0JztcbiAgICAgICAgfSBlbHNlIGlmIChvcmlnaW5hbFZhbHVlID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgdmFsdWUgPSAnbGVmdCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIEJpRGkgZmxpcCB0cmFuc2l0aW9uUHJvcGVydHkgdmFsdWVcblxuXG4gICAgaWYgKHByb3AgPT09ICd0cmFuc2l0aW9uUHJvcGVydHknKSB7XG4gICAgICAvLyBCaURpIGZsaXAgcHJvcGVydGllc1xuICAgICAgaWYgKFBST1BFUlRJRVNfSTE4Ti5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkpIHtcbiAgICAgICAgLy8gY29udmVydCBzdGFydC9lbmRcbiAgICAgICAgdmFyIGNvbnZlcnRlZFZhbHVlID0gUFJPUEVSVElFU19JMThOW29yaWdpbmFsVmFsdWVdO1xuICAgICAgICB2YWx1ZSA9IGlzUlRMID8gUFJPUEVSVElFU19GTElQW2NvbnZlcnRlZFZhbHVlXSA6IGNvbnZlcnRlZFZhbHVlO1xuICAgICAgfSBlbHNlIGlmIChpc1JUTCAmJiBkb0xlZnRBbmRSaWdodFN3YXBJblJUTCkge1xuICAgICAgICB2YXIgZmxpcHBlZFZhbHVlID0gUFJPUEVSVElFU19GTElQW29yaWdpbmFsVmFsdWVdO1xuXG4gICAgICAgIGlmIChmbGlwcGVkVmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIHZhbHVlID0gZmxpcHBlZFZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBDcmVhdGUgZmluYWxpemVkIHN0eWxlXG5cblxuICAgIGlmIChpc1JUTCAmJiBwcm9wID09PSAndGV4dFNoYWRvd09mZnNldCcpIHtcbiAgICAgIHZhciBpbnZlcnRlZFZhbHVlID0gYWRkaXRpdmVJbnZlcnNlKHZhbHVlLndpZHRoKTtcbiAgICAgIHZhbHVlLndpZHRoID0gaW52ZXJ0ZWRWYWx1ZTtcbiAgICAgIG5leHRTdHlsZVtwcm9wXSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoIWZyb3plblByb3BzW3Byb3BdKSB7XG4gICAgICBuZXh0U3R5bGVbcHJvcF0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBpZiAoUFJPUEVSVElFU19JMThOW29yaWdpbmFsUHJvcF0pIHtcbiAgICAgIGZyb3plblByb3BzW3Byb3BdID0gdHJ1ZTtcbiAgICB9XG4gIH0gLy8gJEZsb3dJZ25vcmVcblxuXG4gIHJldHVybiBuZXh0U3R5bGU7XG59O1xuXG52YXIgX2RlZmF1bHQgPSBpMThuU3R5bGU7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdfQ==