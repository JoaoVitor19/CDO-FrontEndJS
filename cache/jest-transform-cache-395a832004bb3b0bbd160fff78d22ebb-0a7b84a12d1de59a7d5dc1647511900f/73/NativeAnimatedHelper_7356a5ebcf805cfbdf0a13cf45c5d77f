abb9f5d026fadedeb6dea2bd6ec2573b
"use strict";

exports.__esModule = true;
exports.generateNewAnimationId = generateNewAnimationId;
exports.shouldUseNativeDriver = shouldUseNativeDriver;
exports.default = void 0;

var _NativeAnimatedModule = _interopRequireDefault(require("./NativeAnimatedModule"));

var _NativeAnimatedTurboModule = _interopRequireDefault(require("./NativeAnimatedTurboModule"));

var _NativeEventEmitter = _interopRequireDefault(require("../NativeEventEmitter"));

var _Platform = _interopRequireDefault(require("../../../exports/Platform"));

var _invariant = _interopRequireDefault(require("fbjs/lib/invariant"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

var NativeAnimatedModule = _Platform.default.OS === 'ios' && global.RN$Bridgeless ? _NativeAnimatedTurboModule.default : _NativeAnimatedModule.default;
var __nativeAnimatedNodeTagCount = 1;
var __nativeAnimationIdCount = 1;
var nativeEventEmitter;
var waitingForQueuedOperations = new Set();
var queueOperations = false;
var queue = [];
var API = {
  getValue: function getValue(tag, saveValueCallback) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');

    if (NativeAnimatedModule.getValue) {
      NativeAnimatedModule.getValue(tag, saveValueCallback);
    }
  },
  setWaitingForIdentifier: function setWaitingForIdentifier(id) {
    waitingForQueuedOperations.add(id);
    queueOperations = true;
  },
  unsetWaitingForIdentifier: function unsetWaitingForIdentifier(id) {
    waitingForQueuedOperations.delete(id);

    if (waitingForQueuedOperations.size === 0) {
      queueOperations = false;
      API.disableQueue();
    }
  },
  disableQueue: function disableQueue() {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');

    if (_Platform.default.OS === 'android') {
      NativeAnimatedModule.startOperationBatch();
    }

    for (var q = 0, l = queue.length; q < l; q++) {
      queue[q]();
    }

    queue.length = 0;

    if (_Platform.default.OS === 'android') {
      NativeAnimatedModule.finishOperationBatch();
    }
  },
  queueOperation: function queueOperation(fn) {
    if (queueOperations) {
      queue.push(fn);
    } else {
      fn();
    }
  },
  createAnimatedNode: function createAnimatedNode(tag, config) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.createAnimatedNode(tag, config);
    });
  },
  startListeningToAnimatedNodeValue: function startListeningToAnimatedNodeValue(tag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.startListeningToAnimatedNodeValue(tag);
    });
  },
  stopListeningToAnimatedNodeValue: function stopListeningToAnimatedNodeValue(tag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.stopListeningToAnimatedNodeValue(tag);
    });
  },
  connectAnimatedNodes: function connectAnimatedNodes(parentTag, childTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.connectAnimatedNodes(parentTag, childTag);
    });
  },
  disconnectAnimatedNodes: function disconnectAnimatedNodes(parentTag, childTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.disconnectAnimatedNodes(parentTag, childTag);
    });
  },
  startAnimatingNode: function startAnimatingNode(animationId, nodeTag, config, endCallback) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.startAnimatingNode(animationId, nodeTag, config, endCallback);
    });
  },
  stopAnimation: function stopAnimation(animationId) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.stopAnimation(animationId);
    });
  },
  setAnimatedNodeValue: function setAnimatedNodeValue(nodeTag, value) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.setAnimatedNodeValue(nodeTag, value);
    });
  },
  setAnimatedNodeOffset: function setAnimatedNodeOffset(nodeTag, offset) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.setAnimatedNodeOffset(nodeTag, offset);
    });
  },
  flattenAnimatedNodeOffset: function flattenAnimatedNodeOffset(nodeTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.flattenAnimatedNodeOffset(nodeTag);
    });
  },
  extractAnimatedNodeOffset: function extractAnimatedNodeOffset(nodeTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.extractAnimatedNodeOffset(nodeTag);
    });
  },
  connectAnimatedNodeToView: function connectAnimatedNodeToView(nodeTag, viewTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.connectAnimatedNodeToView(nodeTag, viewTag);
    });
  },
  disconnectAnimatedNodeFromView: function disconnectAnimatedNodeFromView(nodeTag, viewTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.disconnectAnimatedNodeFromView(nodeTag, viewTag);
    });
  },
  restoreDefaultValues: function restoreDefaultValues(nodeTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');

    if (NativeAnimatedModule.restoreDefaultValues != null) {
      API.queueOperation(function () {
        return NativeAnimatedModule.restoreDefaultValues(nodeTag);
      });
    }
  },
  dropAnimatedNode: function dropAnimatedNode(tag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.dropAnimatedNode(tag);
    });
  },
  addAnimatedEventToView: function addAnimatedEventToView(viewTag, eventName, eventMapping) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.addAnimatedEventToView(viewTag, eventName, eventMapping);
    });
  },
  removeAnimatedEventFromView: function removeAnimatedEventFromView(viewTag, eventName, animatedNodeTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.removeAnimatedEventFromView(viewTag, eventName, animatedNodeTag);
    });
  }
};
var SUPPORTED_STYLES = {
  opacity: true,
  transform: true,
  borderRadius: true,
  borderBottomEndRadius: true,
  borderBottomLeftRadius: true,
  borderBottomRightRadius: true,
  borderBottomStartRadius: true,
  borderTopEndRadius: true,
  borderTopLeftRadius: true,
  borderTopRightRadius: true,
  borderTopStartRadius: true,
  elevation: true,
  zIndex: true,
  shadowOpacity: true,
  shadowRadius: true,
  scaleX: true,
  scaleY: true,
  translateX: true,
  translateY: true
};
var SUPPORTED_TRANSFORMS = {
  translateX: true,
  translateY: true,
  scale: true,
  scaleX: true,
  scaleY: true,
  rotate: true,
  rotateX: true,
  rotateY: true,
  rotateZ: true,
  perspective: true
};
var SUPPORTED_INTERPOLATION_PARAMS = {
  inputRange: true,
  outputRange: true,
  extrapolate: true,
  extrapolateRight: true,
  extrapolateLeft: true
};

function addWhitelistedStyleProp(prop) {
  SUPPORTED_STYLES[prop] = true;
}

function addWhitelistedTransformProp(prop) {
  SUPPORTED_TRANSFORMS[prop] = true;
}

function addWhitelistedInterpolationParam(param) {
  SUPPORTED_INTERPOLATION_PARAMS[param] = true;
}

function validateTransform(configs) {
  configs.forEach(function (config) {
    if (!SUPPORTED_TRANSFORMS.hasOwnProperty(config.property)) {
      throw new Error("Property '" + config.property + "' is not supported by native animated module");
    }
  });
}

function validateStyles(styles) {
  for (var _key in styles) {
    if (!SUPPORTED_STYLES.hasOwnProperty(_key)) {
      throw new Error("Style property '" + _key + "' is not supported by native animated module");
    }
  }
}

function validateInterpolation(config) {
  for (var _key2 in config) {
    if (!SUPPORTED_INTERPOLATION_PARAMS.hasOwnProperty(_key2)) {
      throw new Error("Interpolation property '" + _key2 + "' is not supported by native animated module");
    }
  }
}

function generateNewNodeTag() {
  return __nativeAnimatedNodeTagCount++;
}

function generateNewAnimationId() {
  return __nativeAnimationIdCount++;
}

function assertNativeAnimatedModule() {
  (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
}

var _warnedMissingNativeAnimated = false;

function shouldUseNativeDriver(config) {
  if (config.useNativeDriver == null) {
    console.warn('Animated: `useNativeDriver` was not specified. This is a required ' + 'option and must be explicitly set to `true` or `false`');
  }

  if (config.useNativeDriver === true && !NativeAnimatedModule) {
    if (!_warnedMissingNativeAnimated) {
      console.warn('Animated: `useNativeDriver` is not supported because the native ' + 'animated module is missing. Falling back to JS-based animation. To ' + 'resolve this, add `RCTAnimation` module to this app, or remove ' + '`useNativeDriver`. ' + 'Make sure to run `pod install` first. Read more about autolinking: https://github.com/react-native-community/cli/blob/master/docs/autolinking.md');
      _warnedMissingNativeAnimated = true;
    }

    return false;
  }

  return config.useNativeDriver || false;
}

function transformDataType(value) {
  if (typeof value !== 'string') {
    return value;
  }

  if (/deg$/.test(value)) {
    var degrees = parseFloat(value) || 0;
    var radians = degrees * Math.PI / 180.0;
    return radians;
  } else {
    return value;
  }
}

var _default = {
  API: API,
  addWhitelistedStyleProp: addWhitelistedStyleProp,
  addWhitelistedTransformProp: addWhitelistedTransformProp,
  addWhitelistedInterpolationParam: addWhitelistedInterpolationParam,
  validateStyles: validateStyles,
  validateTransform: validateTransform,
  validateInterpolation: validateInterpolation,
  generateNewNodeTag: generateNewNodeTag,
  generateNewAnimationId: generateNewAnimationId,
  assertNativeAnimatedModule: assertNativeAnimatedModule,
  shouldUseNativeDriver: shouldUseNativeDriver,
  transformDataType: transformDataType,

  get nativeEventEmitter() {
    if (!nativeEventEmitter) {
      nativeEventEmitter = new _NativeEventEmitter.default(NativeAnimatedModule);
    }

    return nativeEventEmitter;
  }

};
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5hdGl2ZUFuaW1hdGVkSGVscGVyLmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiZ2VuZXJhdGVOZXdBbmltYXRpb25JZCIsInNob3VsZFVzZU5hdGl2ZURyaXZlciIsImRlZmF1bHQiLCJfTmF0aXZlQW5pbWF0ZWRNb2R1bGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9OYXRpdmVBbmltYXRlZFR1cmJvTW9kdWxlIiwiX05hdGl2ZUV2ZW50RW1pdHRlciIsIl9QbGF0Zm9ybSIsIl9pbnZhcmlhbnQiLCJvYmoiLCJOYXRpdmVBbmltYXRlZE1vZHVsZSIsIk9TIiwiZ2xvYmFsIiwiUk4kQnJpZGdlbGVzcyIsIl9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQiLCJfX25hdGl2ZUFuaW1hdGlvbklkQ291bnQiLCJuYXRpdmVFdmVudEVtaXR0ZXIiLCJ3YWl0aW5nRm9yUXVldWVkT3BlcmF0aW9ucyIsIlNldCIsInF1ZXVlT3BlcmF0aW9ucyIsInF1ZXVlIiwiQVBJIiwiZ2V0VmFsdWUiLCJ0YWciLCJzYXZlVmFsdWVDYWxsYmFjayIsInNldFdhaXRpbmdGb3JJZGVudGlmaWVyIiwiaWQiLCJhZGQiLCJ1bnNldFdhaXRpbmdGb3JJZGVudGlmaWVyIiwiZGVsZXRlIiwic2l6ZSIsImRpc2FibGVRdWV1ZSIsInN0YXJ0T3BlcmF0aW9uQmF0Y2giLCJxIiwibCIsImxlbmd0aCIsImZpbmlzaE9wZXJhdGlvbkJhdGNoIiwicXVldWVPcGVyYXRpb24iLCJmbiIsInB1c2giLCJjcmVhdGVBbmltYXRlZE5vZGUiLCJjb25maWciLCJzdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUiLCJzdG9wTGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZSIsImNvbm5lY3RBbmltYXRlZE5vZGVzIiwicGFyZW50VGFnIiwiY2hpbGRUYWciLCJkaXNjb25uZWN0QW5pbWF0ZWROb2RlcyIsInN0YXJ0QW5pbWF0aW5nTm9kZSIsImFuaW1hdGlvbklkIiwibm9kZVRhZyIsImVuZENhbGxiYWNrIiwic3RvcEFuaW1hdGlvbiIsInNldEFuaW1hdGVkTm9kZVZhbHVlIiwidmFsdWUiLCJzZXRBbmltYXRlZE5vZGVPZmZzZXQiLCJvZmZzZXQiLCJmbGF0dGVuQW5pbWF0ZWROb2RlT2Zmc2V0IiwiZXh0cmFjdEFuaW1hdGVkTm9kZU9mZnNldCIsImNvbm5lY3RBbmltYXRlZE5vZGVUb1ZpZXciLCJ2aWV3VGFnIiwiZGlzY29ubmVjdEFuaW1hdGVkTm9kZUZyb21WaWV3IiwicmVzdG9yZURlZmF1bHRWYWx1ZXMiLCJkcm9wQW5pbWF0ZWROb2RlIiwiYWRkQW5pbWF0ZWRFdmVudFRvVmlldyIsImV2ZW50TmFtZSIsImV2ZW50TWFwcGluZyIsInJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyIsImFuaW1hdGVkTm9kZVRhZyIsIlNVUFBPUlRFRF9TVFlMRVMiLCJvcGFjaXR5IiwidHJhbnNmb3JtIiwiYm9yZGVyUmFkaXVzIiwiYm9yZGVyQm90dG9tRW5kUmFkaXVzIiwiYm9yZGVyQm90dG9tTGVmdFJhZGl1cyIsImJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzIiwiYm9yZGVyQm90dG9tU3RhcnRSYWRpdXMiLCJib3JkZXJUb3BFbmRSYWRpdXMiLCJib3JkZXJUb3BMZWZ0UmFkaXVzIiwiYm9yZGVyVG9wUmlnaHRSYWRpdXMiLCJib3JkZXJUb3BTdGFydFJhZGl1cyIsImVsZXZhdGlvbiIsInpJbmRleCIsInNoYWRvd09wYWNpdHkiLCJzaGFkb3dSYWRpdXMiLCJzY2FsZVgiLCJzY2FsZVkiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsIlNVUFBPUlRFRF9UUkFOU0ZPUk1TIiwic2NhbGUiLCJyb3RhdGUiLCJyb3RhdGVYIiwicm90YXRlWSIsInJvdGF0ZVoiLCJwZXJzcGVjdGl2ZSIsIlNVUFBPUlRFRF9JTlRFUlBPTEFUSU9OX1BBUkFNUyIsImlucHV0UmFuZ2UiLCJvdXRwdXRSYW5nZSIsImV4dHJhcG9sYXRlIiwiZXh0cmFwb2xhdGVSaWdodCIsImV4dHJhcG9sYXRlTGVmdCIsImFkZFdoaXRlbGlzdGVkU3R5bGVQcm9wIiwicHJvcCIsImFkZFdoaXRlbGlzdGVkVHJhbnNmb3JtUHJvcCIsImFkZFdoaXRlbGlzdGVkSW50ZXJwb2xhdGlvblBhcmFtIiwicGFyYW0iLCJ2YWxpZGF0ZVRyYW5zZm9ybSIsImNvbmZpZ3MiLCJmb3JFYWNoIiwiaGFzT3duUHJvcGVydHkiLCJwcm9wZXJ0eSIsIkVycm9yIiwidmFsaWRhdGVTdHlsZXMiLCJzdHlsZXMiLCJfa2V5IiwidmFsaWRhdGVJbnRlcnBvbGF0aW9uIiwiX2tleTIiLCJnZW5lcmF0ZU5ld05vZGVUYWciLCJhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSIsIl93YXJuZWRNaXNzaW5nTmF0aXZlQW5pbWF0ZWQiLCJ1c2VOYXRpdmVEcml2ZXIiLCJjb25zb2xlIiwid2FybiIsInRyYW5zZm9ybURhdGFUeXBlIiwidGVzdCIsImRlZ3JlZXMiLCJwYXJzZUZsb2F0IiwicmFkaWFucyIsIk1hdGgiLCJQSSIsIl9kZWZhdWx0Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsT0FBTyxDQUFDQyxVQUFSLEdBQXFCLElBQXJCO0FBQ0FELE9BQU8sQ0FBQ0Usc0JBQVIsR0FBaUNBLHNCQUFqQztBQUNBRixPQUFPLENBQUNHLHFCQUFSLEdBQWdDQSxxQkFBaEM7QUFDQUgsT0FBTyxDQUFDSSxPQUFSLEdBQWtCLEtBQUssQ0FBdkI7O0FBRUEsSUFBSUMscUJBQXFCLEdBQUdDLHNCQUFzQixDQUFDQyxPQUFPLDBCQUFSLENBQWxEOztBQUVBLElBQUlDLDBCQUEwQixHQUFHRixzQkFBc0IsQ0FBQ0MsT0FBTywrQkFBUixDQUF2RDs7QUFFQSxJQUFJRSxtQkFBbUIsR0FBR0gsc0JBQXNCLENBQUNDLE9BQU8seUJBQVIsQ0FBaEQ7O0FBRUEsSUFBSUcsU0FBUyxHQUFHSixzQkFBc0IsQ0FBQ0MsT0FBTyw2QkFBUixDQUF0Qzs7QUFFQSxJQUFJSSxVQUFVLEdBQUdMLHNCQUFzQixDQUFDQyxPQUFPLENBQUMsb0JBQUQsQ0FBUixDQUF2Qzs7QUFFQSxTQUFTRCxzQkFBVCxDQUFnQ00sR0FBaEMsRUFBcUM7QUFBRSxTQUFPQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ1gsVUFBWCxHQUF3QlcsR0FBeEIsR0FBOEI7QUFBRVIsSUFBQUEsT0FBTyxFQUFFUTtBQUFYLEdBQXJDO0FBQXdEOztBQVkvRixJQUFJQyxvQkFBb0IsR0FBR0gsU0FBUyxDQUFDTixPQUFWLENBQWtCVSxFQUFsQixLQUF5QixLQUF6QixJQUFrQ0MsTUFBTSxDQUFDQyxhQUF6QyxHQUF5RFIsMEJBQTBCLENBQUNKLE9BQXBGLEdBQThGQyxxQkFBcUIsQ0FBQ0QsT0FBL0k7QUFDQSxJQUFJYSw0QkFBNEIsR0FBRyxDQUFuQztBQUdBLElBQUlDLHdCQUF3QixHQUFHLENBQS9CO0FBR0EsSUFBSUMsa0JBQUo7QUFDQSxJQUFJQywwQkFBMEIsR0FBRyxJQUFJQyxHQUFKLEVBQWpDO0FBQ0EsSUFBSUMsZUFBZSxHQUFHLEtBQXRCO0FBQ0EsSUFBSUMsS0FBSyxHQUFHLEVBQVo7QUFNQSxJQUFJQyxHQUFHLEdBQUc7QUFDUkMsRUFBQUEsUUFBUSxFQUFFLFNBQVNBLFFBQVQsQ0FBa0JDLEdBQWxCLEVBQXVCQyxpQkFBdkIsRUFBMEM7QUFDbEQsS0FBQyxHQUFHaEIsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDOztBQUVBLFFBQUlBLG9CQUFvQixDQUFDWSxRQUF6QixFQUFtQztBQUNqQ1osTUFBQUEsb0JBQW9CLENBQUNZLFFBQXJCLENBQThCQyxHQUE5QixFQUFtQ0MsaUJBQW5DO0FBQ0Q7QUFDRixHQVBPO0FBUVJDLEVBQUFBLHVCQUF1QixFQUFFLFNBQVNBLHVCQUFULENBQWlDQyxFQUFqQyxFQUFxQztBQUM1RFQsSUFBQUEsMEJBQTBCLENBQUNVLEdBQTNCLENBQStCRCxFQUEvQjtBQUNBUCxJQUFBQSxlQUFlLEdBQUcsSUFBbEI7QUFDRCxHQVhPO0FBWVJTLEVBQUFBLHlCQUF5QixFQUFFLFNBQVNBLHlCQUFULENBQW1DRixFQUFuQyxFQUF1QztBQUNoRVQsSUFBQUEsMEJBQTBCLENBQUNZLE1BQTNCLENBQWtDSCxFQUFsQzs7QUFFQSxRQUFJVCwwQkFBMEIsQ0FBQ2EsSUFBM0IsS0FBb0MsQ0FBeEMsRUFBMkM7QUFDekNYLE1BQUFBLGVBQWUsR0FBRyxLQUFsQjtBQUNBRSxNQUFBQSxHQUFHLENBQUNVLFlBQUo7QUFDRDtBQUNGLEdBbkJPO0FBb0JSQSxFQUFBQSxZQUFZLEVBQUUsU0FBU0EsWUFBVCxHQUF3QjtBQUNwQyxLQUFDLEdBQUd2QixVQUFVLENBQUNQLE9BQWYsRUFBd0JTLG9CQUF4QixFQUE4Qyx5Q0FBOUM7O0FBRUEsUUFBSUgsU0FBUyxDQUFDTixPQUFWLENBQWtCVSxFQUFsQixLQUF5QixTQUE3QixFQUF3QztBQUN0Q0QsTUFBQUEsb0JBQW9CLENBQUNzQixtQkFBckI7QUFDRDs7QUFFRCxTQUFLLElBQUlDLENBQUMsR0FBRyxDQUFSLEVBQVdDLENBQUMsR0FBR2QsS0FBSyxDQUFDZSxNQUExQixFQUFrQ0YsQ0FBQyxHQUFHQyxDQUF0QyxFQUF5Q0QsQ0FBQyxFQUExQyxFQUE4QztBQUM1Q2IsTUFBQUEsS0FBSyxDQUFDYSxDQUFELENBQUw7QUFDRDs7QUFFRGIsSUFBQUEsS0FBSyxDQUFDZSxNQUFOLEdBQWUsQ0FBZjs7QUFFQSxRQUFJNUIsU0FBUyxDQUFDTixPQUFWLENBQWtCVSxFQUFsQixLQUF5QixTQUE3QixFQUF3QztBQUN0Q0QsTUFBQUEsb0JBQW9CLENBQUMwQixvQkFBckI7QUFDRDtBQUNGLEdBcENPO0FBcUNSQyxFQUFBQSxjQUFjLEVBQUUsU0FBU0EsY0FBVCxDQUF3QkMsRUFBeEIsRUFBNEI7QUFDMUMsUUFBSW5CLGVBQUosRUFBcUI7QUFDbkJDLE1BQUFBLEtBQUssQ0FBQ21CLElBQU4sQ0FBV0QsRUFBWDtBQUNELEtBRkQsTUFFTztBQUNMQSxNQUFBQSxFQUFFO0FBQ0g7QUFDRixHQTNDTztBQTRDUkUsRUFBQUEsa0JBQWtCLEVBQUUsU0FBU0Esa0JBQVQsQ0FBNEJqQixHQUE1QixFQUFpQ2tCLE1BQWpDLEVBQXlDO0FBQzNELEtBQUMsR0FBR2pDLFVBQVUsQ0FBQ1AsT0FBZixFQUF3QlMsb0JBQXhCLEVBQThDLHlDQUE5QztBQUNBVyxJQUFBQSxHQUFHLENBQUNnQixjQUFKLENBQW1CLFlBQVk7QUFDN0IsYUFBTzNCLG9CQUFvQixDQUFDOEIsa0JBQXJCLENBQXdDakIsR0FBeEMsRUFBNkNrQixNQUE3QyxDQUFQO0FBQ0QsS0FGRDtBQUdELEdBakRPO0FBa0RSQyxFQUFBQSxpQ0FBaUMsRUFBRSxTQUFTQSxpQ0FBVCxDQUEyQ25CLEdBQTNDLEVBQWdEO0FBQ2pGLEtBQUMsR0FBR2YsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDO0FBQ0FXLElBQUFBLEdBQUcsQ0FBQ2dCLGNBQUosQ0FBbUIsWUFBWTtBQUM3QixhQUFPM0Isb0JBQW9CLENBQUNnQyxpQ0FBckIsQ0FBdURuQixHQUF2RCxDQUFQO0FBQ0QsS0FGRDtBQUdELEdBdkRPO0FBd0RSb0IsRUFBQUEsZ0NBQWdDLEVBQUUsU0FBU0EsZ0NBQVQsQ0FBMENwQixHQUExQyxFQUErQztBQUMvRSxLQUFDLEdBQUdmLFVBQVUsQ0FBQ1AsT0FBZixFQUF3QlMsb0JBQXhCLEVBQThDLHlDQUE5QztBQUNBVyxJQUFBQSxHQUFHLENBQUNnQixjQUFKLENBQW1CLFlBQVk7QUFDN0IsYUFBTzNCLG9CQUFvQixDQUFDaUMsZ0NBQXJCLENBQXNEcEIsR0FBdEQsQ0FBUDtBQUNELEtBRkQ7QUFHRCxHQTdETztBQThEUnFCLEVBQUFBLG9CQUFvQixFQUFFLFNBQVNBLG9CQUFULENBQThCQyxTQUE5QixFQUF5Q0MsUUFBekMsRUFBbUQ7QUFDdkUsS0FBQyxHQUFHdEMsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDO0FBQ0FXLElBQUFBLEdBQUcsQ0FBQ2dCLGNBQUosQ0FBbUIsWUFBWTtBQUM3QixhQUFPM0Isb0JBQW9CLENBQUNrQyxvQkFBckIsQ0FBMENDLFNBQTFDLEVBQXFEQyxRQUFyRCxDQUFQO0FBQ0QsS0FGRDtBQUdELEdBbkVPO0FBb0VSQyxFQUFBQSx1QkFBdUIsRUFBRSxTQUFTQSx1QkFBVCxDQUFpQ0YsU0FBakMsRUFBNENDLFFBQTVDLEVBQXNEO0FBQzdFLEtBQUMsR0FBR3RDLFVBQVUsQ0FBQ1AsT0FBZixFQUF3QlMsb0JBQXhCLEVBQThDLHlDQUE5QztBQUNBVyxJQUFBQSxHQUFHLENBQUNnQixjQUFKLENBQW1CLFlBQVk7QUFDN0IsYUFBTzNCLG9CQUFvQixDQUFDcUMsdUJBQXJCLENBQTZDRixTQUE3QyxFQUF3REMsUUFBeEQsQ0FBUDtBQUNELEtBRkQ7QUFHRCxHQXpFTztBQTBFUkUsRUFBQUEsa0JBQWtCLEVBQUUsU0FBU0Esa0JBQVQsQ0FBNEJDLFdBQTVCLEVBQXlDQyxPQUF6QyxFQUFrRFQsTUFBbEQsRUFBMERVLFdBQTFELEVBQXVFO0FBQ3pGLEtBQUMsR0FBRzNDLFVBQVUsQ0FBQ1AsT0FBZixFQUF3QlMsb0JBQXhCLEVBQThDLHlDQUE5QztBQUNBVyxJQUFBQSxHQUFHLENBQUNnQixjQUFKLENBQW1CLFlBQVk7QUFDN0IsYUFBTzNCLG9CQUFvQixDQUFDc0Msa0JBQXJCLENBQXdDQyxXQUF4QyxFQUFxREMsT0FBckQsRUFBOERULE1BQTlELEVBQXNFVSxXQUF0RSxDQUFQO0FBQ0QsS0FGRDtBQUdELEdBL0VPO0FBZ0ZSQyxFQUFBQSxhQUFhLEVBQUUsU0FBU0EsYUFBVCxDQUF1QkgsV0FBdkIsRUFBb0M7QUFDakQsS0FBQyxHQUFHekMsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDO0FBQ0FXLElBQUFBLEdBQUcsQ0FBQ2dCLGNBQUosQ0FBbUIsWUFBWTtBQUM3QixhQUFPM0Isb0JBQW9CLENBQUMwQyxhQUFyQixDQUFtQ0gsV0FBbkMsQ0FBUDtBQUNELEtBRkQ7QUFHRCxHQXJGTztBQXNGUkksRUFBQUEsb0JBQW9CLEVBQUUsU0FBU0Esb0JBQVQsQ0FBOEJILE9BQTlCLEVBQXVDSSxLQUF2QyxFQUE4QztBQUNsRSxLQUFDLEdBQUc5QyxVQUFVLENBQUNQLE9BQWYsRUFBd0JTLG9CQUF4QixFQUE4Qyx5Q0FBOUM7QUFDQVcsSUFBQUEsR0FBRyxDQUFDZ0IsY0FBSixDQUFtQixZQUFZO0FBQzdCLGFBQU8zQixvQkFBb0IsQ0FBQzJDLG9CQUFyQixDQUEwQ0gsT0FBMUMsRUFBbURJLEtBQW5ELENBQVA7QUFDRCxLQUZEO0FBR0QsR0EzRk87QUE0RlJDLEVBQUFBLHFCQUFxQixFQUFFLFNBQVNBLHFCQUFULENBQStCTCxPQUEvQixFQUF3Q00sTUFBeEMsRUFBZ0Q7QUFDckUsS0FBQyxHQUFHaEQsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDO0FBQ0FXLElBQUFBLEdBQUcsQ0FBQ2dCLGNBQUosQ0FBbUIsWUFBWTtBQUM3QixhQUFPM0Isb0JBQW9CLENBQUM2QyxxQkFBckIsQ0FBMkNMLE9BQTNDLEVBQW9ETSxNQUFwRCxDQUFQO0FBQ0QsS0FGRDtBQUdELEdBakdPO0FBa0dSQyxFQUFBQSx5QkFBeUIsRUFBRSxTQUFTQSx5QkFBVCxDQUFtQ1AsT0FBbkMsRUFBNEM7QUFDckUsS0FBQyxHQUFHMUMsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDO0FBQ0FXLElBQUFBLEdBQUcsQ0FBQ2dCLGNBQUosQ0FBbUIsWUFBWTtBQUM3QixhQUFPM0Isb0JBQW9CLENBQUMrQyx5QkFBckIsQ0FBK0NQLE9BQS9DLENBQVA7QUFDRCxLQUZEO0FBR0QsR0F2R087QUF3R1JRLEVBQUFBLHlCQUF5QixFQUFFLFNBQVNBLHlCQUFULENBQW1DUixPQUFuQyxFQUE0QztBQUNyRSxLQUFDLEdBQUcxQyxVQUFVLENBQUNQLE9BQWYsRUFBd0JTLG9CQUF4QixFQUE4Qyx5Q0FBOUM7QUFDQVcsSUFBQUEsR0FBRyxDQUFDZ0IsY0FBSixDQUFtQixZQUFZO0FBQzdCLGFBQU8zQixvQkFBb0IsQ0FBQ2dELHlCQUFyQixDQUErQ1IsT0FBL0MsQ0FBUDtBQUNELEtBRkQ7QUFHRCxHQTdHTztBQThHUlMsRUFBQUEseUJBQXlCLEVBQUUsU0FBU0EseUJBQVQsQ0FBbUNULE9BQW5DLEVBQTRDVSxPQUE1QyxFQUFxRDtBQUM5RSxLQUFDLEdBQUdwRCxVQUFVLENBQUNQLE9BQWYsRUFBd0JTLG9CQUF4QixFQUE4Qyx5Q0FBOUM7QUFDQVcsSUFBQUEsR0FBRyxDQUFDZ0IsY0FBSixDQUFtQixZQUFZO0FBQzdCLGFBQU8zQixvQkFBb0IsQ0FBQ2lELHlCQUFyQixDQUErQ1QsT0FBL0MsRUFBd0RVLE9BQXhELENBQVA7QUFDRCxLQUZEO0FBR0QsR0FuSE87QUFvSFJDLEVBQUFBLDhCQUE4QixFQUFFLFNBQVNBLDhCQUFULENBQXdDWCxPQUF4QyxFQUFpRFUsT0FBakQsRUFBMEQ7QUFDeEYsS0FBQyxHQUFHcEQsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDO0FBQ0FXLElBQUFBLEdBQUcsQ0FBQ2dCLGNBQUosQ0FBbUIsWUFBWTtBQUM3QixhQUFPM0Isb0JBQW9CLENBQUNtRCw4QkFBckIsQ0FBb0RYLE9BQXBELEVBQTZEVSxPQUE3RCxDQUFQO0FBQ0QsS0FGRDtBQUdELEdBekhPO0FBMEhSRSxFQUFBQSxvQkFBb0IsRUFBRSxTQUFTQSxvQkFBVCxDQUE4QlosT0FBOUIsRUFBdUM7QUFDM0QsS0FBQyxHQUFHMUMsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDOztBQUVBLFFBQUlBLG9CQUFvQixDQUFDb0Qsb0JBQXJCLElBQTZDLElBQWpELEVBQXVEO0FBQ3JEekMsTUFBQUEsR0FBRyxDQUFDZ0IsY0FBSixDQUFtQixZQUFZO0FBQzdCLGVBQU8zQixvQkFBb0IsQ0FBQ29ELG9CQUFyQixDQUEwQ1osT0FBMUMsQ0FBUDtBQUNELE9BRkQ7QUFHRDtBQUNGLEdBbElPO0FBbUlSYSxFQUFBQSxnQkFBZ0IsRUFBRSxTQUFTQSxnQkFBVCxDQUEwQnhDLEdBQTFCLEVBQStCO0FBQy9DLEtBQUMsR0FBR2YsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDO0FBQ0FXLElBQUFBLEdBQUcsQ0FBQ2dCLGNBQUosQ0FBbUIsWUFBWTtBQUM3QixhQUFPM0Isb0JBQW9CLENBQUNxRCxnQkFBckIsQ0FBc0N4QyxHQUF0QyxDQUFQO0FBQ0QsS0FGRDtBQUdELEdBeElPO0FBeUlSeUMsRUFBQUEsc0JBQXNCLEVBQUUsU0FBU0Esc0JBQVQsQ0FBZ0NKLE9BQWhDLEVBQXlDSyxTQUF6QyxFQUFvREMsWUFBcEQsRUFBa0U7QUFDeEYsS0FBQyxHQUFHMUQsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDO0FBQ0FXLElBQUFBLEdBQUcsQ0FBQ2dCLGNBQUosQ0FBbUIsWUFBWTtBQUM3QixhQUFPM0Isb0JBQW9CLENBQUNzRCxzQkFBckIsQ0FBNENKLE9BQTVDLEVBQXFESyxTQUFyRCxFQUFnRUMsWUFBaEUsQ0FBUDtBQUNELEtBRkQ7QUFHRCxHQTlJTztBQStJUkMsRUFBQUEsMkJBQTJCLEVBQUUsU0FBU0EsMkJBQVQsQ0FBcUNQLE9BQXJDLEVBQThDSyxTQUE5QyxFQUF5REcsZUFBekQsRUFBMEU7QUFDckcsS0FBQyxHQUFHNUQsVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDO0FBQ0FXLElBQUFBLEdBQUcsQ0FBQ2dCLGNBQUosQ0FBbUIsWUFBWTtBQUM3QixhQUFPM0Isb0JBQW9CLENBQUN5RCwyQkFBckIsQ0FBaURQLE9BQWpELEVBQTBESyxTQUExRCxFQUFxRUcsZUFBckUsQ0FBUDtBQUNELEtBRkQ7QUFHRDtBQXBKTyxDQUFWO0FBNkpBLElBQUlDLGdCQUFnQixHQUFHO0FBQ3JCQyxFQUFBQSxPQUFPLEVBQUUsSUFEWTtBQUVyQkMsRUFBQUEsU0FBUyxFQUFFLElBRlU7QUFHckJDLEVBQUFBLFlBQVksRUFBRSxJQUhPO0FBSXJCQyxFQUFBQSxxQkFBcUIsRUFBRSxJQUpGO0FBS3JCQyxFQUFBQSxzQkFBc0IsRUFBRSxJQUxIO0FBTXJCQyxFQUFBQSx1QkFBdUIsRUFBRSxJQU5KO0FBT3JCQyxFQUFBQSx1QkFBdUIsRUFBRSxJQVBKO0FBUXJCQyxFQUFBQSxrQkFBa0IsRUFBRSxJQVJDO0FBU3JCQyxFQUFBQSxtQkFBbUIsRUFBRSxJQVRBO0FBVXJCQyxFQUFBQSxvQkFBb0IsRUFBRSxJQVZEO0FBV3JCQyxFQUFBQSxvQkFBb0IsRUFBRSxJQVhEO0FBWXJCQyxFQUFBQSxTQUFTLEVBQUUsSUFaVTtBQWFyQkMsRUFBQUEsTUFBTSxFQUFFLElBYmE7QUFnQnJCQyxFQUFBQSxhQUFhLEVBQUUsSUFoQk07QUFpQnJCQyxFQUFBQSxZQUFZLEVBQUUsSUFqQk87QUFvQnJCQyxFQUFBQSxNQUFNLEVBQUUsSUFwQmE7QUFxQnJCQyxFQUFBQSxNQUFNLEVBQUUsSUFyQmE7QUFzQnJCQyxFQUFBQSxVQUFVLEVBQUUsSUF0QlM7QUF1QnJCQyxFQUFBQSxVQUFVLEVBQUU7QUF2QlMsQ0FBdkI7QUF5QkEsSUFBSUMsb0JBQW9CLEdBQUc7QUFDekJGLEVBQUFBLFVBQVUsRUFBRSxJQURhO0FBRXpCQyxFQUFBQSxVQUFVLEVBQUUsSUFGYTtBQUd6QkUsRUFBQUEsS0FBSyxFQUFFLElBSGtCO0FBSXpCTCxFQUFBQSxNQUFNLEVBQUUsSUFKaUI7QUFLekJDLEVBQUFBLE1BQU0sRUFBRSxJQUxpQjtBQU16QkssRUFBQUEsTUFBTSxFQUFFLElBTmlCO0FBT3pCQyxFQUFBQSxPQUFPLEVBQUUsSUFQZ0I7QUFRekJDLEVBQUFBLE9BQU8sRUFBRSxJQVJnQjtBQVN6QkMsRUFBQUEsT0FBTyxFQUFFLElBVGdCO0FBVXpCQyxFQUFBQSxXQUFXLEVBQUU7QUFWWSxDQUEzQjtBQVlBLElBQUlDLDhCQUE4QixHQUFHO0FBQ25DQyxFQUFBQSxVQUFVLEVBQUUsSUFEdUI7QUFFbkNDLEVBQUFBLFdBQVcsRUFBRSxJQUZzQjtBQUduQ0MsRUFBQUEsV0FBVyxFQUFFLElBSHNCO0FBSW5DQyxFQUFBQSxnQkFBZ0IsRUFBRSxJQUppQjtBQUtuQ0MsRUFBQUEsZUFBZSxFQUFFO0FBTGtCLENBQXJDOztBQVFBLFNBQVNDLHVCQUFULENBQWlDQyxJQUFqQyxFQUF1QztBQUNyQ2xDLEVBQUFBLGdCQUFnQixDQUFDa0MsSUFBRCxDQUFoQixHQUF5QixJQUF6QjtBQUNEOztBQUVELFNBQVNDLDJCQUFULENBQXFDRCxJQUFyQyxFQUEyQztBQUN6Q2QsRUFBQUEsb0JBQW9CLENBQUNjLElBQUQsQ0FBcEIsR0FBNkIsSUFBN0I7QUFDRDs7QUFFRCxTQUFTRSxnQ0FBVCxDQUEwQ0MsS0FBMUMsRUFBaUQ7QUFDL0NWLEVBQUFBLDhCQUE4QixDQUFDVSxLQUFELENBQTlCLEdBQXdDLElBQXhDO0FBQ0Q7O0FBRUQsU0FBU0MsaUJBQVQsQ0FBMkJDLE9BQTNCLEVBQW9DO0FBQ2xDQSxFQUFBQSxPQUFPLENBQUNDLE9BQVIsQ0FBZ0IsVUFBVXBFLE1BQVYsRUFBa0I7QUFDaEMsUUFBSSxDQUFDZ0Qsb0JBQW9CLENBQUNxQixjQUFyQixDQUFvQ3JFLE1BQU0sQ0FBQ3NFLFFBQTNDLENBQUwsRUFBMkQ7QUFDekQsWUFBTSxJQUFJQyxLQUFKLENBQVUsZUFBZXZFLE1BQU0sQ0FBQ3NFLFFBQXRCLEdBQWlDLDhDQUEzQyxDQUFOO0FBQ0Q7QUFDRixHQUpEO0FBS0Q7O0FBRUQsU0FBU0UsY0FBVCxDQUF3QkMsTUFBeEIsRUFBZ0M7QUFDOUIsT0FBSyxJQUFJQyxJQUFULElBQWlCRCxNQUFqQixFQUF5QjtBQUN2QixRQUFJLENBQUM3QyxnQkFBZ0IsQ0FBQ3lDLGNBQWpCLENBQWdDSyxJQUFoQyxDQUFMLEVBQTRDO0FBQzFDLFlBQU0sSUFBSUgsS0FBSixDQUFVLHFCQUFxQkcsSUFBckIsR0FBNEIsOENBQXRDLENBQU47QUFDRDtBQUNGO0FBQ0Y7O0FBRUQsU0FBU0MscUJBQVQsQ0FBK0IzRSxNQUEvQixFQUF1QztBQUNyQyxPQUFLLElBQUk0RSxLQUFULElBQWtCNUUsTUFBbEIsRUFBMEI7QUFDeEIsUUFBSSxDQUFDdUQsOEJBQThCLENBQUNjLGNBQS9CLENBQThDTyxLQUE5QyxDQUFMLEVBQTJEO0FBQ3pELFlBQU0sSUFBSUwsS0FBSixDQUFVLDZCQUE2QkssS0FBN0IsR0FBcUMsOENBQS9DLENBQU47QUFDRDtBQUNGO0FBQ0Y7O0FBRUQsU0FBU0Msa0JBQVQsR0FBOEI7QUFDNUIsU0FBT3hHLDRCQUE0QixFQUFuQztBQUNEOztBQUVELFNBQVNmLHNCQUFULEdBQWtDO0FBQ2hDLFNBQU9nQix3QkFBd0IsRUFBL0I7QUFDRDs7QUFFRCxTQUFTd0csMEJBQVQsR0FBc0M7QUFDcEMsR0FBQyxHQUFHL0csVUFBVSxDQUFDUCxPQUFmLEVBQXdCUyxvQkFBeEIsRUFBOEMseUNBQTlDO0FBQ0Q7O0FBRUQsSUFBSThHLDRCQUE0QixHQUFHLEtBQW5DOztBQUVBLFNBQVN4SCxxQkFBVCxDQUErQnlDLE1BQS9CLEVBQXVDO0FBQ3JDLE1BQUlBLE1BQU0sQ0FBQ2dGLGVBQVAsSUFBMEIsSUFBOUIsRUFBb0M7QUFDbENDLElBQUFBLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLHVFQUF1RSx3REFBcEY7QUFDRDs7QUFFRCxNQUFJbEYsTUFBTSxDQUFDZ0YsZUFBUCxLQUEyQixJQUEzQixJQUFtQyxDQUFDL0csb0JBQXhDLEVBQThEO0FBQzVELFFBQUksQ0FBQzhHLDRCQUFMLEVBQW1DO0FBQ2pDRSxNQUFBQSxPQUFPLENBQUNDLElBQVIsQ0FBYSxxRUFBcUUscUVBQXJFLEdBQTZJLGlFQUE3SSxHQUFpTixxQkFBak4sR0FBeU8sa0pBQXRQO0FBQ0FILE1BQUFBLDRCQUE0QixHQUFHLElBQS9CO0FBQ0Q7O0FBRUQsV0FBTyxLQUFQO0FBQ0Q7O0FBRUQsU0FBTy9FLE1BQU0sQ0FBQ2dGLGVBQVAsSUFBMEIsS0FBakM7QUFDRDs7QUFFRCxTQUFTRyxpQkFBVCxDQUEyQnRFLEtBQTNCLEVBQWtDO0FBR2hDLE1BQUksT0FBT0EsS0FBUCxLQUFpQixRQUFyQixFQUErQjtBQUM3QixXQUFPQSxLQUFQO0FBQ0Q7O0FBRUQsTUFBSSxPQUFPdUUsSUFBUCxDQUFZdkUsS0FBWixDQUFKLEVBQXdCO0FBQ3RCLFFBQUl3RSxPQUFPLEdBQUdDLFVBQVUsQ0FBQ3pFLEtBQUQsQ0FBVixJQUFxQixDQUFuQztBQUNBLFFBQUkwRSxPQUFPLEdBQUdGLE9BQU8sR0FBR0csSUFBSSxDQUFDQyxFQUFmLEdBQW9CLEtBQWxDO0FBQ0EsV0FBT0YsT0FBUDtBQUNELEdBSkQsTUFJTztBQUNMLFdBQU8xRSxLQUFQO0FBQ0Q7QUFDRjs7QUFFRCxJQUFJNkUsUUFBUSxHQUFHO0FBQ2I5RyxFQUFBQSxHQUFHLEVBQUVBLEdBRFE7QUFFYmlGLEVBQUFBLHVCQUF1QixFQUFFQSx1QkFGWjtBQUdiRSxFQUFBQSwyQkFBMkIsRUFBRUEsMkJBSGhCO0FBSWJDLEVBQUFBLGdDQUFnQyxFQUFFQSxnQ0FKckI7QUFLYlEsRUFBQUEsY0FBYyxFQUFFQSxjQUxIO0FBTWJOLEVBQUFBLGlCQUFpQixFQUFFQSxpQkFOTjtBQU9iUyxFQUFBQSxxQkFBcUIsRUFBRUEscUJBUFY7QUFRYkUsRUFBQUEsa0JBQWtCLEVBQUVBLGtCQVJQO0FBU2J2SCxFQUFBQSxzQkFBc0IsRUFBRUEsc0JBVFg7QUFVYndILEVBQUFBLDBCQUEwQixFQUFFQSwwQkFWZjtBQVdidkgsRUFBQUEscUJBQXFCLEVBQUVBLHFCQVhWO0FBWWI0SCxFQUFBQSxpQkFBaUIsRUFBRUEsaUJBWk47O0FBZWIsTUFBSTVHLGtCQUFKLEdBQXlCO0FBQ3ZCLFFBQUksQ0FBQ0Esa0JBQUwsRUFBeUI7QUFDdkJBLE1BQUFBLGtCQUFrQixHQUFHLElBQUlWLG1CQUFtQixDQUFDTCxPQUF4QixDQUFnQ1Msb0JBQWhDLENBQXJCO0FBQ0Q7O0FBRUQsV0FBT00sa0JBQVA7QUFDRDs7QUFyQlksQ0FBZjtBQXdCQW5CLE9BQU8sQ0FBQ0ksT0FBUixHQUFrQmtJLFFBQWxCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmdlbmVyYXRlTmV3QW5pbWF0aW9uSWQgPSBnZW5lcmF0ZU5ld0FuaW1hdGlvbklkO1xuZXhwb3J0cy5zaG91bGRVc2VOYXRpdmVEcml2ZXIgPSBzaG91bGRVc2VOYXRpdmVEcml2ZXI7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfTmF0aXZlQW5pbWF0ZWRNb2R1bGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL05hdGl2ZUFuaW1hdGVkTW9kdWxlXCIpKTtcblxudmFyIF9OYXRpdmVBbmltYXRlZFR1cmJvTW9kdWxlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9OYXRpdmVBbmltYXRlZFR1cmJvTW9kdWxlXCIpKTtcblxudmFyIF9OYXRpdmVFdmVudEVtaXR0ZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9OYXRpdmVFdmVudEVtaXR0ZXJcIikpO1xuXG52YXIgX1BsYXRmb3JtID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vLi4vZXhwb3J0cy9QbGF0Zm9ybVwiKSk7XG5cbnZhciBfaW52YXJpYW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiZmJqcy9saWIvaW52YXJpYW50XCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBcbiAqIEBmb3JtYXRcbiAqL1xuLy8gVE9ETyBUNjk0MzcxNTIgQHBldGV0aGVoZWF0IC0gRGVsZXRlIHRoaXMgZm9yayB3aGVuIEZhYnJpYyBzaGlwcyB0byAxMDAlLlxudmFyIE5hdGl2ZUFuaW1hdGVkTW9kdWxlID0gX1BsYXRmb3JtLmRlZmF1bHQuT1MgPT09ICdpb3MnICYmIGdsb2JhbC5STiRCcmlkZ2VsZXNzID8gX05hdGl2ZUFuaW1hdGVkVHVyYm9Nb2R1bGUuZGVmYXVsdCA6IF9OYXRpdmVBbmltYXRlZE1vZHVsZS5kZWZhdWx0O1xudmFyIF9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQgPSAxO1xuLyogdXNlZCBmb3IgYW5pbWF0ZWQgbm9kZXMgKi9cblxudmFyIF9fbmF0aXZlQW5pbWF0aW9uSWRDb3VudCA9IDE7XG4vKiB1c2VkIGZvciBzdGFydGVkIGFuaW1hdGlvbnMgKi9cblxudmFyIG5hdGl2ZUV2ZW50RW1pdHRlcjtcbnZhciB3YWl0aW5nRm9yUXVldWVkT3BlcmF0aW9ucyA9IG5ldyBTZXQoKTtcbnZhciBxdWV1ZU9wZXJhdGlvbnMgPSBmYWxzZTtcbnZhciBxdWV1ZSA9IFtdO1xuLyoqXG4gKiBTaW1wbGUgd3JhcHBlcnMgYXJvdW5kIE5hdGl2ZUFuaW1hdGVkTW9kdWxlIHRvIHByb3ZpZGUgZmxvdyBhbmQgYXV0b2NvbXBsZXRlIHN1cHBvcnQgZm9yXG4gKiB0aGUgbmF0aXZlIG1vZHVsZSBtZXRob2RzXG4gKi9cblxudmFyIEFQSSA9IHtcbiAgZ2V0VmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKHRhZywgc2F2ZVZhbHVlQ2FsbGJhY2spIHtcbiAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShOYXRpdmVBbmltYXRlZE1vZHVsZSwgJ05hdGl2ZSBhbmltYXRlZCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZScpO1xuXG4gICAgaWYgKE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmdldFZhbHVlKSB7XG4gICAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5nZXRWYWx1ZSh0YWcsIHNhdmVWYWx1ZUNhbGxiYWNrKTtcbiAgICB9XG4gIH0sXG4gIHNldFdhaXRpbmdGb3JJZGVudGlmaWVyOiBmdW5jdGlvbiBzZXRXYWl0aW5nRm9ySWRlbnRpZmllcihpZCkge1xuICAgIHdhaXRpbmdGb3JRdWV1ZWRPcGVyYXRpb25zLmFkZChpZCk7XG4gICAgcXVldWVPcGVyYXRpb25zID0gdHJ1ZTtcbiAgfSxcbiAgdW5zZXRXYWl0aW5nRm9ySWRlbnRpZmllcjogZnVuY3Rpb24gdW5zZXRXYWl0aW5nRm9ySWRlbnRpZmllcihpZCkge1xuICAgIHdhaXRpbmdGb3JRdWV1ZWRPcGVyYXRpb25zLmRlbGV0ZShpZCk7XG5cbiAgICBpZiAod2FpdGluZ0ZvclF1ZXVlZE9wZXJhdGlvbnMuc2l6ZSA9PT0gMCkge1xuICAgICAgcXVldWVPcGVyYXRpb25zID0gZmFsc2U7XG4gICAgICBBUEkuZGlzYWJsZVF1ZXVlKCk7XG4gICAgfVxuICB9LFxuICBkaXNhYmxlUXVldWU6IGZ1bmN0aW9uIGRpc2FibGVRdWV1ZSgpIHtcbiAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShOYXRpdmVBbmltYXRlZE1vZHVsZSwgJ05hdGl2ZSBhbmltYXRlZCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZScpO1xuXG4gICAgaWYgKF9QbGF0Zm9ybS5kZWZhdWx0Lk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnN0YXJ0T3BlcmF0aW9uQmF0Y2goKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBxID0gMCwgbCA9IHF1ZXVlLmxlbmd0aDsgcSA8IGw7IHErKykge1xuICAgICAgcXVldWVbcV0oKTtcbiAgICB9XG5cbiAgICBxdWV1ZS5sZW5ndGggPSAwO1xuXG4gICAgaWYgKF9QbGF0Zm9ybS5kZWZhdWx0Lk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmZpbmlzaE9wZXJhdGlvbkJhdGNoKCk7XG4gICAgfVxuICB9LFxuICBxdWV1ZU9wZXJhdGlvbjogZnVuY3Rpb24gcXVldWVPcGVyYXRpb24oZm4pIHtcbiAgICBpZiAocXVldWVPcGVyYXRpb25zKSB7XG4gICAgICBxdWV1ZS5wdXNoKGZuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm4oKTtcbiAgICB9XG4gIH0sXG4gIGNyZWF0ZUFuaW1hdGVkTm9kZTogZnVuY3Rpb24gY3JlYXRlQW5pbWF0ZWROb2RlKHRhZywgY29uZmlnKSB7XG4gICAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmNyZWF0ZUFuaW1hdGVkTm9kZSh0YWcsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0sXG4gIHN0YXJ0TGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZTogZnVuY3Rpb24gc3RhcnRMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKHRhZykge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBOYXRpdmVBbmltYXRlZE1vZHVsZS5zdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUodGFnKTtcbiAgICB9KTtcbiAgfSxcbiAgc3RvcExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWU6IGZ1bmN0aW9uIHN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKHRhZykge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBOYXRpdmVBbmltYXRlZE1vZHVsZS5zdG9wTGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZSh0YWcpO1xuICAgIH0pO1xuICB9LFxuICBjb25uZWN0QW5pbWF0ZWROb2RlczogZnVuY3Rpb24gY29ubmVjdEFuaW1hdGVkTm9kZXMocGFyZW50VGFnLCBjaGlsZFRhZykge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBOYXRpdmVBbmltYXRlZE1vZHVsZS5jb25uZWN0QW5pbWF0ZWROb2RlcyhwYXJlbnRUYWcsIGNoaWxkVGFnKTtcbiAgICB9KTtcbiAgfSxcbiAgZGlzY29ubmVjdEFuaW1hdGVkTm9kZXM6IGZ1bmN0aW9uIGRpc2Nvbm5lY3RBbmltYXRlZE5vZGVzKHBhcmVudFRhZywgY2hpbGRUYWcpIHtcbiAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShOYXRpdmVBbmltYXRlZE1vZHVsZSwgJ05hdGl2ZSBhbmltYXRlZCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIEFQSS5xdWV1ZU9wZXJhdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gTmF0aXZlQW5pbWF0ZWRNb2R1bGUuZGlzY29ubmVjdEFuaW1hdGVkTm9kZXMocGFyZW50VGFnLCBjaGlsZFRhZyk7XG4gICAgfSk7XG4gIH0sXG4gIHN0YXJ0QW5pbWF0aW5nTm9kZTogZnVuY3Rpb24gc3RhcnRBbmltYXRpbmdOb2RlKGFuaW1hdGlvbklkLCBub2RlVGFnLCBjb25maWcsIGVuZENhbGxiYWNrKSB7XG4gICAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnN0YXJ0QW5pbWF0aW5nTm9kZShhbmltYXRpb25JZCwgbm9kZVRhZywgY29uZmlnLCBlbmRDYWxsYmFjayk7XG4gICAgfSk7XG4gIH0sXG4gIHN0b3BBbmltYXRpb246IGZ1bmN0aW9uIHN0b3BBbmltYXRpb24oYW5pbWF0aW9uSWQpIHtcbiAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShOYXRpdmVBbmltYXRlZE1vZHVsZSwgJ05hdGl2ZSBhbmltYXRlZCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIEFQSS5xdWV1ZU9wZXJhdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc3RvcEFuaW1hdGlvbihhbmltYXRpb25JZCk7XG4gICAgfSk7XG4gIH0sXG4gIHNldEFuaW1hdGVkTm9kZVZhbHVlOiBmdW5jdGlvbiBzZXRBbmltYXRlZE5vZGVWYWx1ZShub2RlVGFnLCB2YWx1ZSkge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBOYXRpdmVBbmltYXRlZE1vZHVsZS5zZXRBbmltYXRlZE5vZGVWYWx1ZShub2RlVGFnLCB2YWx1ZSk7XG4gICAgfSk7XG4gIH0sXG4gIHNldEFuaW1hdGVkTm9kZU9mZnNldDogZnVuY3Rpb24gc2V0QW5pbWF0ZWROb2RlT2Zmc2V0KG5vZGVUYWcsIG9mZnNldCkge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBOYXRpdmVBbmltYXRlZE1vZHVsZS5zZXRBbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZywgb2Zmc2V0KTtcbiAgICB9KTtcbiAgfSxcbiAgZmxhdHRlbkFuaW1hdGVkTm9kZU9mZnNldDogZnVuY3Rpb24gZmxhdHRlbkFuaW1hdGVkTm9kZU9mZnNldChub2RlVGFnKSB7XG4gICAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZyk7XG4gICAgfSk7XG4gIH0sXG4gIGV4dHJhY3RBbmltYXRlZE5vZGVPZmZzZXQ6IGZ1bmN0aW9uIGV4dHJhY3RBbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZykge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBOYXRpdmVBbmltYXRlZE1vZHVsZS5leHRyYWN0QW5pbWF0ZWROb2RlT2Zmc2V0KG5vZGVUYWcpO1xuICAgIH0pO1xuICB9LFxuICBjb25uZWN0QW5pbWF0ZWROb2RlVG9WaWV3OiBmdW5jdGlvbiBjb25uZWN0QW5pbWF0ZWROb2RlVG9WaWV3KG5vZGVUYWcsIHZpZXdUYWcpIHtcbiAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShOYXRpdmVBbmltYXRlZE1vZHVsZSwgJ05hdGl2ZSBhbmltYXRlZCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIEFQSS5xdWV1ZU9wZXJhdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gTmF0aXZlQW5pbWF0ZWRNb2R1bGUuY29ubmVjdEFuaW1hdGVkTm9kZVRvVmlldyhub2RlVGFnLCB2aWV3VGFnKTtcbiAgICB9KTtcbiAgfSxcbiAgZGlzY29ubmVjdEFuaW1hdGVkTm9kZUZyb21WaWV3OiBmdW5jdGlvbiBkaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXcobm9kZVRhZywgdmlld1RhZykge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBOYXRpdmVBbmltYXRlZE1vZHVsZS5kaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXcobm9kZVRhZywgdmlld1RhZyk7XG4gICAgfSk7XG4gIH0sXG4gIHJlc3RvcmVEZWZhdWx0VmFsdWVzOiBmdW5jdGlvbiByZXN0b3JlRGVmYXVsdFZhbHVlcyhub2RlVGFnKSB7XG4gICAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTsgLy8gQmFja3dhcmRzIGNvbXBhdCB3aXRoIG9sZGVyIG5hdGl2ZSBydW50aW1lcywgY2FuIGJlIHJlbW92ZWQgbGF0ZXIuXG5cbiAgICBpZiAoTmF0aXZlQW5pbWF0ZWRNb2R1bGUucmVzdG9yZURlZmF1bHRWYWx1ZXMgIT0gbnVsbCkge1xuICAgICAgQVBJLnF1ZXVlT3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnJlc3RvcmVEZWZhdWx0VmFsdWVzKG5vZGVUYWcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBkcm9wQW5pbWF0ZWROb2RlOiBmdW5jdGlvbiBkcm9wQW5pbWF0ZWROb2RlKHRhZykge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBOYXRpdmVBbmltYXRlZE1vZHVsZS5kcm9wQW5pbWF0ZWROb2RlKHRhZyk7XG4gICAgfSk7XG4gIH0sXG4gIGFkZEFuaW1hdGVkRXZlbnRUb1ZpZXc6IGZ1bmN0aW9uIGFkZEFuaW1hdGVkRXZlbnRUb1ZpZXcodmlld1RhZywgZXZlbnROYW1lLCBldmVudE1hcHBpbmcpIHtcbiAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShOYXRpdmVBbmltYXRlZE1vZHVsZSwgJ05hdGl2ZSBhbmltYXRlZCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIEFQSS5xdWV1ZU9wZXJhdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gTmF0aXZlQW5pbWF0ZWRNb2R1bGUuYWRkQW5pbWF0ZWRFdmVudFRvVmlldyh2aWV3VGFnLCBldmVudE5hbWUsIGV2ZW50TWFwcGluZyk7XG4gICAgfSk7XG4gIH0sXG4gIHJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldzogZnVuY3Rpb24gcmVtb3ZlQW5pbWF0ZWRFdmVudEZyb21WaWV3KHZpZXdUYWcsIGV2ZW50TmFtZSwgYW5pbWF0ZWROb2RlVGFnKSB7XG4gICAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyh2aWV3VGFnLCBldmVudE5hbWUsIGFuaW1hdGVkTm9kZVRhZyk7XG4gICAgfSk7XG4gIH1cbn07XG4vKipcbiAqIFN0eWxlcyBhbGxvd2VkIGJ5IHRoZSBuYXRpdmUgYW5pbWF0ZWQgaW1wbGVtZW50YXRpb24uXG4gKlxuICogSW4gZ2VuZXJhbCBuYXRpdmUgYW5pbWF0ZWQgaW1wbGVtZW50YXRpb24gc2hvdWxkIHN1cHBvcnQgYW55IG51bWVyaWMgcHJvcGVydHkgdGhhdCBkb2Vzbid0IG5lZWRcbiAqIHRvIGJlIHVwZGF0ZWQgdGhyb3VnaCB0aGUgc2hhZG93IHZpZXcgaGllcmFyY2h5IChhbGwgbm9uLWxheW91dCBwcm9wZXJ0aWVzKS5cbiAqL1xuXG52YXIgU1VQUE9SVEVEX1NUWUxFUyA9IHtcbiAgb3BhY2l0eTogdHJ1ZSxcbiAgdHJhbnNmb3JtOiB0cnVlLFxuICBib3JkZXJSYWRpdXM6IHRydWUsXG4gIGJvcmRlckJvdHRvbUVuZFJhZGl1czogdHJ1ZSxcbiAgYm9yZGVyQm90dG9tTGVmdFJhZGl1czogdHJ1ZSxcbiAgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXM6IHRydWUsXG4gIGJvcmRlckJvdHRvbVN0YXJ0UmFkaXVzOiB0cnVlLFxuICBib3JkZXJUb3BFbmRSYWRpdXM6IHRydWUsXG4gIGJvcmRlclRvcExlZnRSYWRpdXM6IHRydWUsXG4gIGJvcmRlclRvcFJpZ2h0UmFkaXVzOiB0cnVlLFxuICBib3JkZXJUb3BTdGFydFJhZGl1czogdHJ1ZSxcbiAgZWxldmF0aW9uOiB0cnVlLFxuICB6SW5kZXg6IHRydWUsXG5cbiAgLyogaW9zIHN0eWxlcyAqL1xuICBzaGFkb3dPcGFjaXR5OiB0cnVlLFxuICBzaGFkb3dSYWRpdXM6IHRydWUsXG5cbiAgLyogbGVnYWN5IGFuZHJvaWQgdHJhbnNmb3JtIHByb3BlcnRpZXMgKi9cbiAgc2NhbGVYOiB0cnVlLFxuICBzY2FsZVk6IHRydWUsXG4gIHRyYW5zbGF0ZVg6IHRydWUsXG4gIHRyYW5zbGF0ZVk6IHRydWVcbn07XG52YXIgU1VQUE9SVEVEX1RSQU5TRk9STVMgPSB7XG4gIHRyYW5zbGF0ZVg6IHRydWUsXG4gIHRyYW5zbGF0ZVk6IHRydWUsXG4gIHNjYWxlOiB0cnVlLFxuICBzY2FsZVg6IHRydWUsXG4gIHNjYWxlWTogdHJ1ZSxcbiAgcm90YXRlOiB0cnVlLFxuICByb3RhdGVYOiB0cnVlLFxuICByb3RhdGVZOiB0cnVlLFxuICByb3RhdGVaOiB0cnVlLFxuICBwZXJzcGVjdGl2ZTogdHJ1ZVxufTtcbnZhciBTVVBQT1JURURfSU5URVJQT0xBVElPTl9QQVJBTVMgPSB7XG4gIGlucHV0UmFuZ2U6IHRydWUsXG4gIG91dHB1dFJhbmdlOiB0cnVlLFxuICBleHRyYXBvbGF0ZTogdHJ1ZSxcbiAgZXh0cmFwb2xhdGVSaWdodDogdHJ1ZSxcbiAgZXh0cmFwb2xhdGVMZWZ0OiB0cnVlXG59O1xuXG5mdW5jdGlvbiBhZGRXaGl0ZWxpc3RlZFN0eWxlUHJvcChwcm9wKSB7XG4gIFNVUFBPUlRFRF9TVFlMRVNbcHJvcF0gPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBhZGRXaGl0ZWxpc3RlZFRyYW5zZm9ybVByb3AocHJvcCkge1xuICBTVVBQT1JURURfVFJBTlNGT1JNU1twcm9wXSA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGFkZFdoaXRlbGlzdGVkSW50ZXJwb2xhdGlvblBhcmFtKHBhcmFtKSB7XG4gIFNVUFBPUlRFRF9JTlRFUlBPTEFUSU9OX1BBUkFNU1twYXJhbV0gPSB0cnVlO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVRyYW5zZm9ybShjb25maWdzKSB7XG4gIGNvbmZpZ3MuZm9yRWFjaChmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgaWYgKCFTVVBQT1JURURfVFJBTlNGT1JNUy5oYXNPd25Qcm9wZXJ0eShjb25maWcucHJvcGVydHkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9wZXJ0eSAnXCIgKyBjb25maWcucHJvcGVydHkgKyBcIicgaXMgbm90IHN1cHBvcnRlZCBieSBuYXRpdmUgYW5pbWF0ZWQgbW9kdWxlXCIpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlU3R5bGVzKHN0eWxlcykge1xuICBmb3IgKHZhciBfa2V5IGluIHN0eWxlcykge1xuICAgIGlmICghU1VQUE9SVEVEX1NUWUxFUy5oYXNPd25Qcm9wZXJ0eShfa2V5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3R5bGUgcHJvcGVydHkgJ1wiICsgX2tleSArIFwiJyBpcyBub3Qgc3VwcG9ydGVkIGJ5IG5hdGl2ZSBhbmltYXRlZCBtb2R1bGVcIik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW50ZXJwb2xhdGlvbihjb25maWcpIHtcbiAgZm9yICh2YXIgX2tleTIgaW4gY29uZmlnKSB7XG4gICAgaWYgKCFTVVBQT1JURURfSU5URVJQT0xBVElPTl9QQVJBTVMuaGFzT3duUHJvcGVydHkoX2tleTIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcnBvbGF0aW9uIHByb3BlcnR5ICdcIiArIF9rZXkyICsgXCInIGlzIG5vdCBzdXBwb3J0ZWQgYnkgbmF0aXZlIGFuaW1hdGVkIG1vZHVsZVwiKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVOZXdOb2RlVGFnKCkge1xuICByZXR1cm4gX19uYXRpdmVBbmltYXRlZE5vZGVUYWdDb3VudCsrO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZU5ld0FuaW1hdGlvbklkKCkge1xuICByZXR1cm4gX19uYXRpdmVBbmltYXRpb25JZENvdW50Kys7XG59XG5cbmZ1bmN0aW9uIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCkge1xuICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShOYXRpdmVBbmltYXRlZE1vZHVsZSwgJ05hdGl2ZSBhbmltYXRlZCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZScpO1xufVxuXG52YXIgX3dhcm5lZE1pc3NpbmdOYXRpdmVBbmltYXRlZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBzaG91bGRVc2VOYXRpdmVEcml2ZXIoY29uZmlnKSB7XG4gIGlmIChjb25maWcudXNlTmF0aXZlRHJpdmVyID09IG51bGwpIHtcbiAgICBjb25zb2xlLndhcm4oJ0FuaW1hdGVkOiBgdXNlTmF0aXZlRHJpdmVyYCB3YXMgbm90IHNwZWNpZmllZC4gVGhpcyBpcyBhIHJlcXVpcmVkICcgKyAnb3B0aW9uIGFuZCBtdXN0IGJlIGV4cGxpY2l0bHkgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgJyk7XG4gIH1cblxuICBpZiAoY29uZmlnLnVzZU5hdGl2ZURyaXZlciA9PT0gdHJ1ZSAmJiAhTmF0aXZlQW5pbWF0ZWRNb2R1bGUpIHtcbiAgICBpZiAoIV93YXJuZWRNaXNzaW5nTmF0aXZlQW5pbWF0ZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybignQW5pbWF0ZWQ6IGB1c2VOYXRpdmVEcml2ZXJgIGlzIG5vdCBzdXBwb3J0ZWQgYmVjYXVzZSB0aGUgbmF0aXZlICcgKyAnYW5pbWF0ZWQgbW9kdWxlIGlzIG1pc3NpbmcuIEZhbGxpbmcgYmFjayB0byBKUy1iYXNlZCBhbmltYXRpb24uIFRvICcgKyAncmVzb2x2ZSB0aGlzLCBhZGQgYFJDVEFuaW1hdGlvbmAgbW9kdWxlIHRvIHRoaXMgYXBwLCBvciByZW1vdmUgJyArICdgdXNlTmF0aXZlRHJpdmVyYC4gJyArICdNYWtlIHN1cmUgdG8gcnVuIGBwb2QgaW5zdGFsbGAgZmlyc3QuIFJlYWQgbW9yZSBhYm91dCBhdXRvbGlua2luZzogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LW5hdGl2ZS1jb21tdW5pdHkvY2xpL2Jsb2IvbWFzdGVyL2RvY3MvYXV0b2xpbmtpbmcubWQnKTtcbiAgICAgIF93YXJuZWRNaXNzaW5nTmF0aXZlQW5pbWF0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBjb25maWcudXNlTmF0aXZlRHJpdmVyIHx8IGZhbHNlO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1EYXRhVHlwZSh2YWx1ZSkge1xuICAvLyBDaGFuZ2UgdGhlIHN0cmluZyB0eXBlIHRvIG51bWJlciB0eXBlIHNvIHdlIGNhbiByZXVzZSB0aGUgc2FtZSBsb2dpYyBpblxuICAvLyBpT1MgYW5kIEFuZHJvaWQgcGxhdGZvcm1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBpZiAoL2RlZyQvLnRlc3QodmFsdWUpKSB7XG4gICAgdmFyIGRlZ3JlZXMgPSBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwO1xuICAgIHZhciByYWRpYW5zID0gZGVncmVlcyAqIE1hdGguUEkgLyAxODAuMDtcbiAgICByZXR1cm4gcmFkaWFucztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxudmFyIF9kZWZhdWx0ID0ge1xuICBBUEk6IEFQSSxcbiAgYWRkV2hpdGVsaXN0ZWRTdHlsZVByb3A6IGFkZFdoaXRlbGlzdGVkU3R5bGVQcm9wLFxuICBhZGRXaGl0ZWxpc3RlZFRyYW5zZm9ybVByb3A6IGFkZFdoaXRlbGlzdGVkVHJhbnNmb3JtUHJvcCxcbiAgYWRkV2hpdGVsaXN0ZWRJbnRlcnBvbGF0aW9uUGFyYW06IGFkZFdoaXRlbGlzdGVkSW50ZXJwb2xhdGlvblBhcmFtLFxuICB2YWxpZGF0ZVN0eWxlczogdmFsaWRhdGVTdHlsZXMsXG4gIHZhbGlkYXRlVHJhbnNmb3JtOiB2YWxpZGF0ZVRyYW5zZm9ybSxcbiAgdmFsaWRhdGVJbnRlcnBvbGF0aW9uOiB2YWxpZGF0ZUludGVycG9sYXRpb24sXG4gIGdlbmVyYXRlTmV3Tm9kZVRhZzogZ2VuZXJhdGVOZXdOb2RlVGFnLFxuICBnZW5lcmF0ZU5ld0FuaW1hdGlvbklkOiBnZW5lcmF0ZU5ld0FuaW1hdGlvbklkLFxuICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZTogYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUsXG4gIHNob3VsZFVzZU5hdGl2ZURyaXZlcjogc2hvdWxkVXNlTmF0aXZlRHJpdmVyLFxuICB0cmFuc2Zvcm1EYXRhVHlwZTogdHJhbnNmb3JtRGF0YVR5cGUsXG5cbiAgLy8gJEZsb3dFeHBlY3RlZEVycm9yIC0gdW5zYWZlIGdldHRlciBsaW50IHN1cHByZXNpb25cbiAgZ2V0IG5hdGl2ZUV2ZW50RW1pdHRlcigpIHtcbiAgICBpZiAoIW5hdGl2ZUV2ZW50RW1pdHRlcikge1xuICAgICAgbmF0aXZlRXZlbnRFbWl0dGVyID0gbmV3IF9OYXRpdmVFdmVudEVtaXR0ZXIuZGVmYXVsdChOYXRpdmVBbmltYXRlZE1vZHVsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hdGl2ZUV2ZW50RW1pdHRlcjtcbiAgfVxuXG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7Il19