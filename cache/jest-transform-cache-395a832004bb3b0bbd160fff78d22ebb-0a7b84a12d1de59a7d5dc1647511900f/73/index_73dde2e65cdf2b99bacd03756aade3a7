9d232865e0fdccc2cb016346f381a87d
'use strict';

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault2(require("@babel/runtime/helpers/extends"));

exports.__esModule = true;
exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _pick = _interopRequireDefault(require("../../modules/pick"));

var _useMergeRefs = _interopRequireDefault(require("../../modules/useMergeRefs"));

var _usePressEvents = _interopRequireDefault(require("../../modules/usePressEvents"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

var forwardPropsList = {
  accessibilityDisabled: true,
  accessibilityLabel: true,
  accessibilityLiveRegion: true,
  accessibilityRole: true,
  accessibilityState: true,
  accessibilityValue: true,
  children: true,
  disabled: true,
  focusable: true,
  nativeID: true,
  onBlur: true,
  onFocus: true,
  onLayout: true,
  testID: true
};

var pickProps = function pickProps(props) {
  return (0, _pick.default)(props, forwardPropsList);
};

function TouchableWithoutFeedback(props, forwardedRef) {
  var delayPressIn = props.delayPressIn,
      delayPressOut = props.delayPressOut,
      delayLongPress = props.delayLongPress,
      disabled = props.disabled,
      focusable = props.focusable,
      onLongPress = props.onLongPress,
      onPress = props.onPress,
      onPressIn = props.onPressIn,
      onPressOut = props.onPressOut,
      rejectResponderTermination = props.rejectResponderTermination;
  var hostRef = (0, React.useRef)(null);
  var pressConfig = (0, React.useMemo)(function () {
    return {
      cancelable: !rejectResponderTermination,
      disabled: disabled,
      delayLongPress: delayLongPress,
      delayPressStart: delayPressIn,
      delayPressEnd: delayPressOut,
      onLongPress: onLongPress,
      onPress: onPress,
      onPressStart: onPressIn,
      onPressEnd: onPressOut
    };
  }, [disabled, delayPressIn, delayPressOut, delayLongPress, onLongPress, onPress, onPressIn, onPressOut, rejectResponderTermination]);
  var pressEventHandlers = (0, _usePressEvents.default)(hostRef, pressConfig);
  var element = React.Children.only(props.children);
  var children = [element.props.children];
  var supportedProps = pickProps(props);
  supportedProps.accessibilityDisabled = disabled;
  supportedProps.focusable = !disabled && focusable !== false;
  supportedProps.ref = (0, _useMergeRefs.default)(forwardedRef, hostRef, element.ref);
  var elementProps = (0, _extends2.default)(supportedProps, pressEventHandlers);
  return React.cloneElement.apply(React, [element, elementProps].concat(children));
}

var MemoedTouchableWithoutFeedback = React.memo(React.forwardRef(TouchableWithoutFeedback));
MemoedTouchableWithoutFeedback.displayName = 'TouchableWithoutFeedback';
var _default = MemoedTouchableWithoutFeedback;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIlJlYWN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiX3BpY2siLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3VzZU1lcmdlUmVmcyIsIl91c2VQcmVzc0V2ZW50cyIsIm9iaiIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIldlYWtNYXAiLCJjYWNoZSIsImhhcyIsImdldCIsIm5ld09iaiIsImhhc1Byb3BlcnR5RGVzY3JpcHRvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsInNldCIsImZvcndhcmRQcm9wc0xpc3QiLCJhY2Nlc3NpYmlsaXR5RGlzYWJsZWQiLCJhY2Nlc3NpYmlsaXR5TGFiZWwiLCJhY2Nlc3NpYmlsaXR5TGl2ZVJlZ2lvbiIsImFjY2Vzc2liaWxpdHlSb2xlIiwiYWNjZXNzaWJpbGl0eVN0YXRlIiwiYWNjZXNzaWJpbGl0eVZhbHVlIiwiY2hpbGRyZW4iLCJkaXNhYmxlZCIsImZvY3VzYWJsZSIsIm5hdGl2ZUlEIiwib25CbHVyIiwib25Gb2N1cyIsIm9uTGF5b3V0IiwidGVzdElEIiwicGlja1Byb3BzIiwicHJvcHMiLCJUb3VjaGFibGVXaXRob3V0RmVlZGJhY2siLCJmb3J3YXJkZWRSZWYiLCJkZWxheVByZXNzSW4iLCJkZWxheVByZXNzT3V0IiwiZGVsYXlMb25nUHJlc3MiLCJvbkxvbmdQcmVzcyIsIm9uUHJlc3MiLCJvblByZXNzSW4iLCJvblByZXNzT3V0IiwicmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb24iLCJob3N0UmVmIiwidXNlUmVmIiwicHJlc3NDb25maWciLCJ1c2VNZW1vIiwiY2FuY2VsYWJsZSIsImRlbGF5UHJlc3NTdGFydCIsImRlbGF5UHJlc3NFbmQiLCJvblByZXNzU3RhcnQiLCJvblByZXNzRW5kIiwicHJlc3NFdmVudEhhbmRsZXJzIiwiZWxlbWVudCIsIkNoaWxkcmVuIiwib25seSIsInN1cHBvcnRlZFByb3BzIiwicmVmIiwiZWxlbWVudFByb3BzIiwiY2xvbmVFbGVtZW50IiwiYXBwbHkiLCJjb25jYXQiLCJNZW1vZWRUb3VjaGFibGVXaXRob3V0RmVlZGJhY2siLCJtZW1vIiwiZm9yd2FyZFJlZiIsImRpc3BsYXlOYW1lIiwiX2RlZmF1bHQiLCJtb2R1bGUiXSwibWFwcGluZ3MiOiJBQVNBOzs7Ozs7QUFFQUEsT0FBTyxDQUFDQyxVQUFSLEdBQXFCLElBQXJCO0FBQ0FELE9BQU8sQ0FBQ0UsT0FBUixHQUFrQixLQUFLLENBQXZCOztBQUVBLElBQUlDLEtBQUssR0FBR0MsdUJBQXVCLENBQUNDLE9BQU8sQ0FBQyxPQUFELENBQVIsQ0FBbkM7O0FBRUEsSUFBSUMsS0FBSyxHQUFHQyxzQkFBc0IsQ0FBQ0YsT0FBTyxzQkFBUixDQUFsQzs7QUFFQSxJQUFJRyxhQUFhLEdBQUdELHNCQUFzQixDQUFDRixPQUFPLDhCQUFSLENBQTFDOztBQUVBLElBQUlJLGVBQWUsR0FBR0Ysc0JBQXNCLENBQUNGLE9BQU8sZ0NBQVIsQ0FBNUM7O0FBRUEsU0FBU0Usc0JBQVQsQ0FBZ0NHLEdBQWhDLEVBQXFDO0FBQUUsU0FBT0EsR0FBRyxJQUFJQSxHQUFHLENBQUNULFVBQVgsR0FBd0JTLEdBQXhCLEdBQThCO0FBQUVSLElBQUFBLE9BQU8sRUFBRVE7QUFBWCxHQUFyQztBQUF3RDs7QUFFL0YsU0FBU0Msd0JBQVQsR0FBb0M7QUFBRSxNQUFJLE9BQU9DLE9BQVAsS0FBbUIsVUFBdkIsRUFBbUMsT0FBTyxJQUFQO0FBQWEsTUFBSUMsS0FBSyxHQUFHLElBQUlELE9BQUosRUFBWjs7QUFBMkJELEVBQUFBLHdCQUF3QixHQUFHLFNBQVNBLHdCQUFULEdBQW9DO0FBQUUsV0FBT0UsS0FBUDtBQUFlLEdBQWhGOztBQUFrRixTQUFPQSxLQUFQO0FBQWU7O0FB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dCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIFxuICogQGZvcm1hdFxuICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBSZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG5cbnZhciBfcGljayA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uLy4uL21vZHVsZXMvcGlja1wiKSk7XG5cbnZhciBfdXNlTWVyZ2VSZWZzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vbW9kdWxlcy91c2VNZXJnZVJlZnNcIikpO1xuXG52YXIgX3VzZVByZXNzRXZlbnRzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vbW9kdWxlcy91c2VQcmVzc0V2ZW50c1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsOyB2YXIgY2FjaGUgPSBuZXcgV2Vha01hcCgpOyBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUgPSBmdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKSB7IHJldHVybiBjYWNoZTsgfTsgcmV0dXJuIGNhY2hlOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmogIT09IFwiZnVuY3Rpb25cIikgeyByZXR1cm4geyBkZWZhdWx0OiBvYmogfTsgfSB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgaWYgKGNhY2hlKSB7IGNhY2hlLnNldChvYmosIG5ld09iaik7IH0gcmV0dXJuIG5ld09iajsgfVxuXG52YXIgZm9yd2FyZFByb3BzTGlzdCA9IHtcbiAgYWNjZXNzaWJpbGl0eURpc2FibGVkOiB0cnVlLFxuICBhY2Nlc3NpYmlsaXR5TGFiZWw6IHRydWUsXG4gIGFjY2Vzc2liaWxpdHlMaXZlUmVnaW9uOiB0cnVlLFxuICBhY2Nlc3NpYmlsaXR5Um9sZTogdHJ1ZSxcbiAgYWNjZXNzaWJpbGl0eVN0YXRlOiB0cnVlLFxuICBhY2Nlc3NpYmlsaXR5VmFsdWU6IHRydWUsXG4gIGNoaWxkcmVuOiB0cnVlLFxuICBkaXNhYmxlZDogdHJ1ZSxcbiAgZm9jdXNhYmxlOiB0cnVlLFxuICBuYXRpdmVJRDogdHJ1ZSxcbiAgb25CbHVyOiB0cnVlLFxuICBvbkZvY3VzOiB0cnVlLFxuICBvbkxheW91dDogdHJ1ZSxcbiAgdGVzdElEOiB0cnVlXG59O1xuXG52YXIgcGlja1Byb3BzID0gZnVuY3Rpb24gcGlja1Byb3BzKHByb3BzKSB7XG4gIHJldHVybiAoMCwgX3BpY2suZGVmYXVsdCkocHJvcHMsIGZvcndhcmRQcm9wc0xpc3QpO1xufTtcblxuZnVuY3Rpb24gVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrKHByb3BzLCBmb3J3YXJkZWRSZWYpIHtcbiAgdmFyIGRlbGF5UHJlc3NJbiA9IHByb3BzLmRlbGF5UHJlc3NJbixcbiAgICAgIGRlbGF5UHJlc3NPdXQgPSBwcm9wcy5kZWxheVByZXNzT3V0LFxuICAgICAgZGVsYXlMb25nUHJlc3MgPSBwcm9wcy5kZWxheUxvbmdQcmVzcyxcbiAgICAgIGRpc2FibGVkID0gcHJvcHMuZGlzYWJsZWQsXG4gICAgICBmb2N1c2FibGUgPSBwcm9wcy5mb2N1c2FibGUsXG4gICAgICBvbkxvbmdQcmVzcyA9IHByb3BzLm9uTG9uZ1ByZXNzLFxuICAgICAgb25QcmVzcyA9IHByb3BzLm9uUHJlc3MsXG4gICAgICBvblByZXNzSW4gPSBwcm9wcy5vblByZXNzSW4sXG4gICAgICBvblByZXNzT3V0ID0gcHJvcHMub25QcmVzc091dCxcbiAgICAgIHJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uID0gcHJvcHMucmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb247XG4gIHZhciBob3N0UmVmID0gKDAsIFJlYWN0LnVzZVJlZikobnVsbCk7XG4gIHZhciBwcmVzc0NvbmZpZyA9ICgwLCBSZWFjdC51c2VNZW1vKShmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNhbmNlbGFibGU6ICFyZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbixcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgIGRlbGF5TG9uZ1ByZXNzOiBkZWxheUxvbmdQcmVzcyxcbiAgICAgIGRlbGF5UHJlc3NTdGFydDogZGVsYXlQcmVzc0luLFxuICAgICAgZGVsYXlQcmVzc0VuZDogZGVsYXlQcmVzc091dCxcbiAgICAgIG9uTG9uZ1ByZXNzOiBvbkxvbmdQcmVzcyxcbiAgICAgIG9uUHJlc3M6IG9uUHJlc3MsXG4gICAgICBvblByZXNzU3RhcnQ6IG9uUHJlc3NJbixcbiAgICAgIG9uUHJlc3NFbmQ6IG9uUHJlc3NPdXRcbiAgICB9O1xuICB9LCBbZGlzYWJsZWQsIGRlbGF5UHJlc3NJbiwgZGVsYXlQcmVzc091dCwgZGVsYXlMb25nUHJlc3MsIG9uTG9uZ1ByZXNzLCBvblByZXNzLCBvblByZXNzSW4sIG9uUHJlc3NPdXQsIHJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uXSk7XG4gIHZhciBwcmVzc0V2ZW50SGFuZGxlcnMgPSAoMCwgX3VzZVByZXNzRXZlbnRzLmRlZmF1bHQpKGhvc3RSZWYsIHByZXNzQ29uZmlnKTtcbiAgdmFyIGVsZW1lbnQgPSBSZWFjdC5DaGlsZHJlbi5vbmx5KHByb3BzLmNoaWxkcmVuKTtcbiAgdmFyIGNoaWxkcmVuID0gW2VsZW1lbnQucHJvcHMuY2hpbGRyZW5dO1xuICB2YXIgc3VwcG9ydGVkUHJvcHMgPSBwaWNrUHJvcHMocHJvcHMpO1xuICBzdXBwb3J0ZWRQcm9wcy5hY2Nlc3NpYmlsaXR5RGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgc3VwcG9ydGVkUHJvcHMuZm9jdXNhYmxlID0gIWRpc2FibGVkICYmIGZvY3VzYWJsZSAhPT0gZmFsc2U7XG4gIHN1cHBvcnRlZFByb3BzLnJlZiA9ICgwLCBfdXNlTWVyZ2VSZWZzLmRlZmF1bHQpKGZvcndhcmRlZFJlZiwgaG9zdFJlZiwgZWxlbWVudC5yZWYpO1xuICB2YXIgZWxlbWVudFByb3BzID0gT2JqZWN0LmFzc2lnbihzdXBwb3J0ZWRQcm9wcywgcHJlc3NFdmVudEhhbmRsZXJzKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQuYXBwbHkoUmVhY3QsIFtlbGVtZW50LCBlbGVtZW50UHJvcHNdLmNvbmNhdChjaGlsZHJlbikpO1xufVxuXG52YXIgTWVtb2VkVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrID0gLyojX19QVVJFX18qL1JlYWN0Lm1lbW8oIC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjaykpO1xuTWVtb2VkVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrLmRpc3BsYXlOYW1lID0gJ1RvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayc7XG52YXIgX2RlZmF1bHQgPSBNZW1vZWRUb3VjaGFibGVXaXRob3V0RmVlZGJhY2s7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdfQ==